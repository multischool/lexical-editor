import{__spreadArray as o,__assign as e}from"../../../node_modules/tslib/tslib.es6.mjs.js";import n,{useEffect as r}from"react";import{LexicalComposer as t}from"../../../node_modules/@lexical/react/LexicalComposer.mjs.js";import{OnChangePlugin as m}from"../../../node_modules/@lexical/react/LexicalOnChangePlugin.mjs.js";import{FloatingLinkContext as a}from"../components/context/floating-link-context.js";import{SharedAutocompleteContext as i}from"../components/context/shared-autocomplete-context.js";import{editorTheme as s}from"../components/themes/editor-theme.js";import{TooltipProvider as l}from"../ui/tooltip.js";import{nodes as c}from"./nodes.js";import{Plugins as f}from"./plugins.js";import{TEXT_MATCH_TRANSFORMERS as p,CHECK_LIST as d,ELEMENT_TRANSFORMERS as u,MULTILINE_ELEMENT_TRANSFORMERS as g,TEXT_FORMAT_TRANSFORMERS as h,$convertToMarkdownString as j,$convertFromMarkdownString as x}from"@lexical/markdown";import{EMOJI as w}from"../components/transformers/markdown-emoji-transformer.js";import{EQUATION as k}from"../components/transformers/markdown-equation-transofrmer.js";import{HR as v}from"../components/transformers/markdown-hr-transformer.js";import{IMAGE as E}from"../components/transformers/markdown-image-transformer.js";import{TABLE as C}from"../components/transformers/markdown-table-transformer.js";import{TWEET as M}from"../components/transformers/markdown-tweet-transformer.js";import{MENTION_MARKDOWN_TRANSFORMER as b}from"../components/transformers/markdown-mention-transformer.js";import{useLexicalComposerContext as I}from"../../../node_modules/@lexical/react/LexicalComposerContext.mjs.js";var L={namespace:"Editor",theme:s,nodes:c,onError:function(o){console.error(o)}};function S(o){var e=o.initialMarkdown,n=o.transformers,t=I()[0];return r((function(){e&&t.update((function(){x(e,n)}))}),[]),null}function O(r){var s=r.onChange,c=r.onSerializedChange,x=r.pluginOptions,I=void 0===x?{}:x,O=r.maxLength,_=void 0===O?5e3:O,N=r.height,A=void 0===N?"70vh":N,G=r.onMentionSearch,U=r.onImageUpload,q=r.onAIGeneration,y=r.mentionMenu,z=r.mentionMenuItem,J=r.onMarkdownChange,P=r.initialMarkdown,B=o(o(o(o([b,C,v,E,w,k,M,d],u,!0),g,!0),h,!0),p,!0);return n.createElement("div",{className:"overflow-hidden rounded-lg border bg-background shadow flex flex-col",style:{height:A}},n.createElement(t,{initialConfig:e(e(e({},L),{}),{})},n.createElement(l,null,n.createElement(i,null,n.createElement(a,null,P&&n.createElement(S,{initialMarkdown:P,transformers:B}),n.createElement("div",{className:"flex flex-col h-full"},n.createElement(f,{maxLength:_,pluginOptions:I,onMentionSearch:G,onImageUpload:U,onAIGeneration:q,mentionMenu:y,mentionMenuItem:z})),n.createElement(m,{ignoreSelectionChange:!0,onChange:function(o){null==s||s(o),null==c||c(o.toJSON());var e="";o.read((function(){e=j(B)})),null==J||J(e)}}))))))}export{O as MarkdownEditor};
//# sourceMappingURL=editor.js.map
