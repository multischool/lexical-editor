{"version":3,"file":"image-component.js","sources":["../../../../../../src/components/lexicalEditor/components/editor-ui/image-component.tsx"],"sourcesContent":[null],"names":["imageCache","Set","RIGHT_CLICK_IMAGE_COMMAND","createCommand","LazyImage","_a","altText","className","imageRef","src","width","height","maxWidth","onError","has","Promise","resolve","img","Image","onload","add","onerror","useSuspenseImage","React","undefined","alt","ref","style","draggable","BrokenImage","createElement","opacity","ImageComponent","nodeKey","resizable","showCaption","caption","captionsEnabled","useRef","buttonRef","_b","useLexicalNodeSelection","isSelected","setSelected","clearSelection","_c","useState","isResizing","setIsResizing","useCollaborationContext","editor","useLexicalComposerContext","_d","selection","setSelection","activeEditorRef","_e","isLoadError","setIsLoadError","isEditable","useLexicalEditable","$onDelete","useCallback","payload","deleteSelection","$getSelection","$isNodeSelection","preventDefault","update","getNodes","forEach","node","$isImageNode","remove","$onEnter","event","latestSelection","buttonElem","current","length","$setSelection","focus","document","activeElement","$onEscape","target","parentRootElement","getRootElement","onClick","shiftKey","onRightClick","getEditorState","read","tagName","$isRangeSelection","dispatchCommand","useEffect","isMounted","rootElement","unregister","mergeRegister","registerUpdateListener","editorState","registerCommand","SELECTION_CHANGE_COMMAND","_","activeEditor","COMMAND_PRIORITY_LOW","CLICK_COMMAND","DRAGSTART_COMMAND","KEY_DELETE_COMMAND","KEY_BACKSPACE_COMMAND","KEY_ENTER_COMMAND","KEY_ESCAPE_COMMAND","addEventListener","removeEventListener","isFocused","Suspense","fallback","Fragment","concat","LexicalNestedComposer","initialEditor","initialNodes","RootNode","TextNode","ParagraphNode","AutoFocusPlugin","HistoryPlugin","RichTextPlugin","contentEditable","ContentEditable","placeholderClassName","placeholder","ErrorBoundary","LexicalErrorBoundary","ImageResizer","setShowCaption","$getNodeByKey","onResizeStart","onResizeEnd","nextWidth","nextHeight","setTimeout","setWidthAndHeight"],"mappings":"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"}