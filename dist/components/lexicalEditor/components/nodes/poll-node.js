import{__extends as t}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import*as o from"react";import{Suspense as e}from"react";import{DecoratorNode as n}from"lexical";var r=o.lazy((function(){return import("../editor-ui/poll-component.js")}));function i(t){return void 0===t&&(t=""),{text:t,uid:Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),votes:[]}}function s(t,o,e){return{text:o,uid:t.uid,votes:e||Array.from(t.votes)}}function p(t){var o=t.getAttribute("data-lexical-poll-question"),e=t.getAttribute("data-lexical-poll-options");return null!==o&&null!==e?{node:a(o,JSON.parse(e))}:null}var u=function(n){function i(t,o,e){var r=n.call(this,e)||this;return r.__question=t,r.__options=o,r}return t(i,n),i.getType=function(){return"poll"},i.clone=function(t){return new i(t.__question,t.__options,t.__key)},i.importJSON=function(t){var o=a(t.question,t.options);return t.options.forEach(o.addOption),o},i.prototype.exportJSON=function(){return{options:this.__options,question:this.__question,type:"poll",version:1}},i.prototype.addOption=function(t){var o=this.getWritable(),e=Array.from(o.__options);e.push(t),o.__options=e},i.prototype.deleteOption=function(t){var o=this.getWritable(),e=Array.from(o.__options),n=e.indexOf(t);e.splice(n,1),o.__options=e},i.prototype.setOptionText=function(t,o){var e=this.getWritable(),n=s(t,o),r=Array.from(e.__options),i=r.indexOf(t);r[i]=n,e.__options=r},i.prototype.toggleVote=function(t,o){var e=this.getWritable(),n=t.votes,r=Array.from(n),i=n.indexOf(o);-1===i?r.push(o):r.splice(i,1);var p=s(t,t.text,r),u=Array.from(e.__options),a=u.indexOf(t);u[a]=p,e.__options=u},i.importDOM=function(){return{span:function(t){return t.hasAttribute("data-lexical-poll-question")?{conversion:p,priority:2}:null}}},i.prototype.exportDOM=function(){var t=document.createElement("span");return t.setAttribute("data-lexical-poll-question",this.__question),t.setAttribute("data-lexical-poll-options",JSON.stringify(this.__options)),{element:t}},i.prototype.createDOM=function(){var t=document.createElement("span");return t.style.display="inline-block",t},i.prototype.updateDOM=function(){return!1},i.prototype.decorate=function(){return o.createElement(e,{fallback:null},o.createElement(r,{question:this.__question,options:this.__options,nodeKey:this.__key}))},i}(n);function a(t,o){return new u(t,o)}function l(t){return t instanceof u}export{a as $createPollNode,l as $isPollNode,u as PollNode,i as createPollOption};
//# sourceMappingURL=poll-node.js.map
