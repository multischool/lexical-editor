import{__extends as t,__assign as e}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import{$isElementNode as r,$createParagraphNode as n,ElementNode as o}from"lexical";import{IS_CHROME as i}from"../shared/environment.js";import{invariant as l}from"../shared/invariant.js";import{$isCollapsibleContainerNode as s}from"./collapsible-container-node.js";import{$isCollapsibleContentNode as p}from"./collapsible-content-node.js";function a(t){return{node:c()}}var u=function(o){function u(){return null!==o&&o.apply(this,arguments)||this}return t(u,o),u.getType=function(){return"collapsible-title"},u.clone=function(t){return new u(t.__key)},u.prototype.createDOM=function(t,e){var r=this,n=document.createElement("summary");return n.classList.add("Collapsible__title"),i&&n.addEventListener("click",(function(){e.update((function(){var t=r.getLatest().getParentOrThrow();l(s(t),"Expected parent node to be a CollapsibleContainerNode"),t.toggleOpen()}))})),n},u.prototype.updateDOM=function(t,e){return!1},u.importDOM=function(){return{summary:function(t){return{conversion:a,priority:1}}}},u.importJSON=function(t){return c()},u.prototype.exportJSON=function(){return e(e({},o.prototype.exportJSON.call(this)),{type:"collapsible-title",version:1})},u.prototype.collapseAtStart=function(t){return this.getParentOrThrow().insertBefore(this),!0},u.transform=function(){return function(t){l(f(t),"node is not a CollapsibleTitleNode"),t.isEmpty()&&t.remove()}},u.prototype.insertNewAfter=function(t,e){void 0===e&&(e=!0);var o=this.getParentOrThrow();if(!s(o))throw new Error("CollapsibleTitleNode expects to be child of CollapsibleContainerNode");if(o.getOpen()){var i=this.getNextSibling();if(!p(i))throw new Error("CollapsibleTitleNode expects to have CollapsibleContentNode sibling");var l=i.getFirstChild();if(r(l))return l;var a=n();return i.append(a),a}a=n();return o.insertAfter(a,e),a},u}(o);function c(){return new u}function f(t){return t instanceof u}export{a as $convertSummaryElement,c as $createCollapsibleTitleNode,f as $isCollapsibleTitleNode,u as CollapsibleTitleNode};
//# sourceMappingURL=collapsible-title-node.js.map
