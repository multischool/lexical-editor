import{__extends as t}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import*as i from"react";import{Suspense as e}from"react";import{$applyNodeReplacement as o,createEditor as n,DecoratorNode as r}from"lexical";var s=i.lazy((function(){return import("../editor-ui/inline-image-component.js")}));function h(t){if(t instanceof HTMLImageElement){var i=t.alt,e=t.src,o=t.width;return{node:_({altText:i,height:t.height,src:e,width:o})}}return null}var a=function(o){function r(t,i,e,r,s,h,a,_){var p=o.call(this,_)||this;return p.__src=t,p.__altText=i,p.__width=r||"inherit",p.__height=s||"inherit",p.__showCaption=h||!1,p.__caption=a||n(),p.__position=e,p}return t(r,o),r.getType=function(){return"inline-image"},r.clone=function(t){return new r(t.__src,t.__altText,t.__position,t.__width,t.__height,t.__showCaption,t.__caption,t.__key)},r.importJSON=function(t){var i=t.altText,e=t.height,o=t.width,n=t.caption,r=t.src,s=t.showCaption,h=_({altText:i,height:e,position:t.position,showCaption:s,src:r,width:o}),a=h.__caption,p=a.parseEditorState(n.editorState);return p.isEmpty()||a.setEditorState(p),h},r.importDOM=function(){return{img:function(t){return{conversion:h,priority:0}}}},r.prototype.exportDOM=function(){var t=document.createElement("img");return t.setAttribute("src",this.__src),t.setAttribute("alt",this.__altText),t.setAttribute("width",this.__width.toString()),t.setAttribute("height",this.__height.toString()),{element:t}},r.prototype.exportJSON=function(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:"inherit"===this.__height?0:this.__height,position:this.__position,showCaption:this.__showCaption,src:this.getSrc(),type:"inline-image",version:1,width:"inherit"===this.__width?0:this.__width}},r.prototype.getSrc=function(){return this.__src},r.prototype.getAltText=function(){return this.__altText},r.prototype.setAltText=function(t){this.getWritable().__altText=t},r.prototype.setWidthAndHeight=function(t,i){var e=this.getWritable();e.__width=t,e.__height=i},r.prototype.getShowCaption=function(){return this.__showCaption},r.prototype.setShowCaption=function(t){this.getWritable().__showCaption=t},r.prototype.getPosition=function(){return this.__position},r.prototype.setPosition=function(t){this.getWritable().__position=t},r.prototype.update=function(t){var i=this.getWritable(),e=t.altText,o=t.showCaption,n=t.position;void 0!==e&&(i.__altText=e),void 0!==o&&(i.__showCaption=o),void 0!==n&&(i.__position=n)},r.prototype.getPositionClassName=function(){switch(this.__position){case"left":return"float-left w-1/2";case"right":return"float-right w-1/2 ";case"full":return"w-full";default:return""}},r.prototype.createDOM=function(t){var i=document.createElement("span"),e="".concat(t.theme.inlineImage," ").concat(this.getPositionClassName());return void 0!==e&&(i.className=e),i},r.prototype.updateDOM=function(t,i,e){if(this.__position!==t.__position){var o="".concat(e.theme.inlineImage," ").concat(this.getPositionClassName());void 0!==o&&(i.className=o)}return!1},r.prototype.decorate=function(){return i.createElement(e,{fallback:null},i.createElement(s,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,position:this.__position}))},r}(r);function _(t){var i=t.altText,e=t.position,n=t.height,r=t.src,s=t.width,h=t.showCaption,_=t.caption,p=t.key;return o(new a(r,i,e,s,n,h,_,p))}function p(t){return t instanceof a}export{_ as $createInlineImageNode,p as $isInlineImageNode,a as InlineImageNode};
//# sourceMappingURL=inline-image-node.js.map
