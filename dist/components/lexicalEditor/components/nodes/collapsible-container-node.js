import{__extends as e,__assign as t}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import{isHTMLElement as n,ElementNode as o}from"lexical";import{IS_CHROME as r}from"../shared/environment.js";import{invariant as i}from"../shared/invariant.js";import{setDomHiddenUntilFound as p}from"../utils/collapsible.js";function s(e){return{node:c(void 0===e.open||e.open)}}var u=function(o){function u(e,t){var n=o.call(this,t)||this;return n.__open=e,n}return e(u,o),u.getType=function(){return"collapsible-container"},u.clone=function(e){return new u(e.__open,e.__key)},u.prototype.createDOM=function(e,t){var n,o=this;if(r)(n=document.createElement("div")).setAttribute("open","");else{var i=document.createElement("details");i.open=this.__open,i.addEventListener("toggle",(function(){t.getEditorState().read((function(){return o.getOpen()}))!==i.open&&t.update((function(){return o.toggleOpen()}))})),n=i}return n.classList.add("Collapsible__container"),n},u.prototype.updateDOM=function(e,t){var o=this.__open;if(e.__open!==o)if(r){var s=t.children[1];i(n(s),"Expected contentDom to be an HTMLElement"),o?(t.setAttribute("open",""),s.hidden=!1):(t.removeAttribute("open"),p(s))}else t.open=this.__open;return!1},u.importDOM=function(){return{details:function(e){return{conversion:s,priority:1}}}},u.importJSON=function(e){return c(e.open)},u.prototype.exportDOM=function(){var e=document.createElement("details");return e.classList.add("Collapsible__container"),e.setAttribute("open",this.__open.toString()),{element:e}},u.prototype.exportJSON=function(){return t(t({},o.prototype.exportJSON.call(this)),{open:this.__open,type:"collapsible-container",version:1})},u.prototype.setOpen=function(e){this.getWritable().__open=e},u.prototype.getOpen=function(){return this.getLatest().__open},u.prototype.toggleOpen=function(){this.setOpen(!this.getOpen())},u}(o);function c(e){return new u(e)}function a(e){return e instanceof u}export{s as $convertDetailsElement,c as $createCollapsibleContainerNode,a as $isCollapsibleContainerNode,u as CollapsibleContainerNode};
//# sourceMappingURL=collapsible-container-node.js.map
