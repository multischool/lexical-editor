import{__extends as e}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import{useCallback as t,useEffect as r}from"react";import{useLexicalComposerContext as o}from"../../../../node_modules/@lexical/react/LexicalComposerContext.mjs.js";import{useLexicalNodeSelection as n}from"../../../../node_modules/@lexical/react/useLexicalNodeSelection.mjs.js";import{mergeRegister as a}from"@lexical/utils";import{COMMAND_PRIORITY_HIGH as i,$getSelection as c,$isNodeSelection as f,CLICK_COMMAND as l,COMMAND_PRIORITY_LOW as s,KEY_DELETE_COMMAND as u,KEY_BACKSPACE_COMMAND as p,DecoratorNode as d}from"lexical";function m(e){var i=e.nodeKey,d=o()[0],m=n(i),b=m[0],y=m[1],v=m[2],x=t((function(e){e.preventDefault();var t=c();return b&&f(t)&&d.update((function(){t.getNodes().forEach((function(e){g(e)&&e.remove()}))})),!1}),[d,b]);return r((function(){return a(d.registerCommand(l,(function(e){var t=d.getElementByKey(i);return e.target===t&&(e.shiftKey||v(),y(!b),!0)}),s),d.registerCommand(u,x,s),d.registerCommand(p,x,s))}),[v,d,b,i,x,y]),r((function(){var e=d.getElementByKey(i);null!==e&&(b?(e.classList.add("!border-[var(--editor-color-primary,#4766cb)]"),e.classList.add("!after:text-[var(--editor-color-primary,#4766cb)]"),e.classList.add("!before:opacity-100")):(e.classList.remove("!border-[var(--editor-color-primary,#4766cb)]"),e.classList.remove("!after:text-[var(--editor-color-primary,#4766cb)]"),e.classList.remove("!before:opacity-100")))}),[d,b,i]),null}var b=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.getType=function(){return"page-break"},r.clone=function(e){return new r(e.__key)},r.importJSON=function(e){return v()},r.importDOM=function(){var e=this;return{figure:function(t){return t.getAttribute("type")!==e.getType()?null:{conversion:y,priority:i}}}},r.prototype.exportJSON=function(){return{type:this.getType(),version:1}},r.prototype.createDOM=function(){var e=document.createElement("figure");return e.setAttribute("type",this.getType()),e.style.pageBreakAfter="always",e.className="\n      relative block w-[calc(100%+56px)] overflow-visible \n      -ml-[28px] mt-7 mb-7\n      border-0 border-t border-b border-dashed border-[var(--editor-color-secondary,#eee)]\n      bg-[var(--editor-color-secondary,#eee)]\n      before:content-[''] \n      before:absolute before:top-1/2 before:-translate-y-1/2\n      before:left-10 before:opacity-50\n      before:bg-cover before:w-4 before:h-4\n      after:content-['PAGE_BREAK']\n      after:absolute after:top-1/2 after:left-1/2 \n      after:-translate-x-1/2 after:-translate-y-1/2\n      after:block after:py-0.5 after:px-1.5\n      after:border after:border-solid after:border-[#ccc]\n      after:bg-white after:text-xs after:text-black after:font-semibold\n    ",e},r.prototype.getTextContent=function(){return"\n"},r.prototype.isInline=function(){return!1},r.prototype.updateDOM=function(){return!1},r.prototype.decorate=function(){return React.createElement(m,{nodeKey:this.__key})},r}(d);function y(){return{node:v()}}function v(){return new b}function g(e){return e instanceof b}export{v as $createPageBreakNode,g as $isPageBreakNode,b as PageBreakNode};
//# sourceMappingURL=page-break-node.js.map
