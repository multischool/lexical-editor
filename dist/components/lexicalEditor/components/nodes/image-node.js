import{__extends as t}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import*as i from"react";import{Suspense as e}from"react";import{$applyNodeReplacement as n,createEditor as r,DecoratorNode as o}from"lexical";var h=i.lazy((function(){return import("../editor-ui/image-component.js")}));function a(t){var i=t;if(i.src.startsWith("file:///")||function(t){return null!=t.parentElement&&"LI"===t.parentElement.tagName&&null===t.previousSibling&&"checkbox"===t.getAttribute("aria-roledescription")}(i))return null;var e=i.alt,n=i.src,r=i.width;return{node:_({altText:e,height:i.height,src:n,width:r})}}var s=function(n){function o(t,i,e,o,h,a,s,_,c){var p=n.call(this,c)||this;return p.__src=t,p.__altText=i,p.__maxWidth=e,p.__width=o||"inherit",p.__height=h||"inherit",p.__showCaption=a||!1,p.__caption=s||r({nodes:[]}),p.__captionsEnabled=_||void 0===_,p}return t(o,n),o.getType=function(){return"image"},o.clone=function(t){return new o(t.__src,t.__altText,t.__maxWidth,t.__width,t.__height,t.__showCaption,t.__caption,t.__captionsEnabled,t.__key)},o.importJSON=function(t){var i=t.altText,e=t.height,n=t.width,r=t.maxWidth,o=t.caption,h=t.src,a=_({altText:i,height:e,maxWidth:r,showCaption:t.showCaption,src:h,width:n}),s=a.__caption,c=s.parseEditorState(o.editorState);return c.isEmpty()||s.setEditorState(c),a},o.prototype.exportDOM=function(){var t=document.createElement("img");return t.setAttribute("src",this.__src),t.setAttribute("alt",this.__altText),t.setAttribute("width",this.__width.toString()),t.setAttribute("height",this.__height.toString()),{element:t}},o.importDOM=function(){return{img:function(t){return{conversion:a,priority:0}}}},o.prototype.exportJSON=function(){return{altText:this.getAltText(),caption:this.__caption.toJSON(),height:"inherit"===this.__height?0:this.__height,maxWidth:this.__maxWidth,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:"inherit"===this.__width?0:this.__width}},o.prototype.setWidthAndHeight=function(t,i){var e=this.getWritable();e.__width=t,e.__height=i},o.prototype.setShowCaption=function(t){this.getWritable().__showCaption=t},o.prototype.createDOM=function(t){var i=document.createElement("span"),e=t.theme.image;return void 0!==e&&(i.className=e),i},o.prototype.updateDOM=function(){return!1},o.prototype.getSrc=function(){return this.__src},o.prototype.getAltText=function(){return this.__altText},o.prototype.decorate=function(){return i.createElement(e,{fallback:null},i.createElement(h,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,maxWidth:this.__maxWidth,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,captionsEnabled:this.__captionsEnabled,resizable:!0}))},o}(o);function _(t){var i=t.altText,e=t.height,r=t.maxWidth,o=void 0===r?500:r,h=t.captionsEnabled,a=t.src,_=t.width,c=t.showCaption,p=t.caption,u=t.key;return n(new s(a,i,o,_,e,c,p,h,u))}function c(t){return t instanceof s}export{_ as $createImageNode,c as $isImageNode,s as ImageNode};
//# sourceMappingURL=image-node.js.map
