import{__spreadArray as r}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import{$isParagraphNode as e,$isTextNode as n}from"lexical";import{CHECK_LIST as t,ELEMENT_TRANSFORMERS as i,MULTILINE_ELEMENT_TRANSFORMERS as o,TEXT_FORMAT_TRANSFORMERS as a,TEXT_MATCH_TRANSFORMERS as l,$convertToMarkdownString as m,$convertFromMarkdownString as f}from"@lexical/markdown";import{TableNode as s,TableRowNode as p,TableCellNode as u,$isTableNode as g,$isTableRowNode as v,$isTableCellNode as d,TableCellHeaderStates as h,$createTableNode as c,$createTableRowNode as j,$createTableCellNode as C}from"@lexical/table";import{EMOJI as S}from"./markdown-emoji-transformer.js";import{EQUATION as b}from"./markdown-equation-transofrmer.js";import{HR as k}from"./markdown-hr-transformer.js";import{IMAGE as x}from"./markdown-image-transformer.js";import{TWEET as w}from"./markdown-tweet-transformer.js";var O=/^(?:\|)(.+)(?:\|)\s?$/,P=/^(\| ?:?-*:? ?)+\|\s?$/,_=r(r(r(r([k,x,S,b,w,t],i,!0),o,!0),a,!0),l,!0),y={dependencies:[s,p,u],export:function(r){if(!g(r))return null;for(var e=[],n=0,t=r.getChildren();n<t.length;n++){var i=t[n],o=[];if(v(i)){for(var a=!1,l=0,f=i.getChildren();l<f.length;l++){var s=f[l];d(s)&&(o.push(m(_,s).replace(/\n/g,"\\n")),s.__headerState===h.ROW&&(a=!0))}e.push("| ".concat(o.join(" | ")," |")),a&&e.push("| ".concat(o.map((function(r){return"---"})).join(" | ")," |"))}}return e.join("\n")},regExp:O,replace:function(r,t,i){if(P.test(i[0])){var o=r.getPreviousSibling();if(!o||!g(o))return;var a=o.getChildren(),l=a[a.length-1];if(!l||!v(l))return;return l.getChildren().forEach((function(r){d(r)&&r.setHeaderStyles(h.ROW,h.ROW)})),void r.remove()}var m=R(i[0]);if(null!=m){for(var f=[m],s=r.getPreviousSibling(),p=m.length;s&&e(s)&&1===s.getChildrenSize();){var u=s.getFirstChild();if(!n(u))break;if(null==(x=R(u.getTextContent())))break;p=Math.max(p,x.length),f.unshift(x);var C=s.getPreviousSibling();s.remove(),s=C}for(var S=c(),b=0,k=f;b<k.length;b++){var x=k[b],w=j();S.append(w);for(var O=0;O<p;O++)w.append(O<x.length?x[O]:E(""))}var _=r.getPreviousSibling();g(_)&&function(r){var e=r.getFirstChild();return v(e)?e.getChildrenSize():0}(_)===p?(_.append.apply(_,S.getChildren()),r.remove()):r.replace(S),S.selectEnd()}},type:"element"};var E=function(r){r=r.replace(/\\n/g,"\n");var e=C(h.NO_STATUS);return f(r,_,e),e},R=function(r){var e=r.match(O);return e&&e[1]?e[1].split("|").map((function(r){return E(r)})):null};export{y as TABLE};
//# sourceMappingURL=markdown-table-transformer.js.map
