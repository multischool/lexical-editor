{"version":3,"file":"floating-link-editor-plugin.js","sources":["../../../../../../src/components/lexicalEditor/components/plugins/floating-link-editor-plugin.tsx"],"sourcesContent":[null],"names":["FloatingLinkEditor","_a","editor","isLink","setIsLink","anchorElem","isLinkEditMode","setIsLinkEditMode","editorRef","useRef","inputRef","_b","useState","linkUrl","setLinkUrl","_c","editedLinkUrl","setEditedLinkUrl","_d","lastSelection","setLastSelection","$updateLinkEditor","useCallback","selection","$getSelection","$isRangeSelection","node","getSelectedNode","linkParent","$findMatchingParent","$isLinkNode","getURL","editorElem","current","nativeSelection","window","getSelection","activeElement","document","rootElement","getRootElement","contains","anchorNode","isEditable","domRect","focusNode","parentElement","getBoundingClientRect","y","setFloatingElemPositionForLinkEditor","className","useEffect","scrollerElem","update","getEditorState","read","addEventListener","removeEventListener","mergeRegister","registerUpdateListener","editorState","registerCommand","SELECTION_CHANGE_COMMAND","COMMAND_PRIORITY_LOW","KEY_ESCAPE_COMMAND","COMMAND_PRIORITY_HIGH","focus","handleLinkSubmission","dispatchCommand","TOGGLE_LINK_COMMAND","sanitizeUrl","parent_1","getParent","$isAutoLinkNode","linkNode","$createLinkNode","rel","__rel","target","__target","title","__title","replace","React","createElement","ref","Input","value","onChange","event","onKeyDown","key","preventDefault","Button","size","variant","onClick","X","Check","href","Pencil","Trash","FloatingLinkEditorPlugin","useLexicalComposerContext","useFloatingLinkContext","activeEditor","setActiveEditor","$updateToolbar","focusLinkNode_1","focusAutoLinkNode_1","badNode","getNodes","filter","$isLineBreakNode","find","autoLinkNode","is","getIsUnlinked","_payload","newEditor","COMMAND_PRIORITY_CRITICAL","CLICK_COMMAND","payload","metaKey","ctrlKey","open","createPortal","useFloatingLinkEditorToolbar"],"mappings":"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"}