import{useState as t,useEffect as e,useCallback as o}from"react";import{TOGGLE_LINK_COMMAND as r,$isLinkNode as i}from"@lexical/link";import{KEY_MODIFIER_COMMAND as n,COMMAND_PRIORITY_NORMAL as a,$isRangeSelection as m}from"lexical";import{Toggle as l}from"../../../ui/toggle.js";import{useFloatingLinkContext as c}from"../../context/floating-link-context.js";import{useToolbarContext as s}from"../../context/toolbar-context.js";import{useUpdateToolbarHandler as u}from"../../editor-hooks/use-update-toolbar.js";import{getSelectedNode as d}from"../../utils/get-selected-node.js";import{sanitizeUrl as f}from"../../utils/url.js";import p from"../../../../../node_modules/lucide-react/dist/esm/icons/link.js";function v(){var v=s().activeEditor,g=c().setIsLinkEditMode,h=t(!1),j=h[0],k=h[1];u((function(t){if(m(t)){var e=d(t),o=e.getParent();i(o)||i(e)?k(!0):k(!1)}})),e((function(){return v.registerCommand(n,(function(t){var e=t,o=e.code,i=e.ctrlKey,n=e.metaKey;if("KeyK"===o&&(i||n)){e.preventDefault();var a=void 0;return j?(g(!1),a=null):(g(!0),a=f("https://")),v.dispatchCommand(r,a)}return!1}),a)}),[v,j,g]);var x=o((function(){j?(g(!1),v.dispatchCommand(r,null)):(g(!0),v.dispatchCommand(r,f("https://")))}),[v,j,g]);return React.createElement(l,{size:"sm",variant:"outline","aria-label":"Toggle link",onClick:x},React.createElement(p,{className:"h-4 w-4"}))}export{v as LinkToolbarPlugin};
//# sourceMappingURL=link-toolbar-plugin.js.map
