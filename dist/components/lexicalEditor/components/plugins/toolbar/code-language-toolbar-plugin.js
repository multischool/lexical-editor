import{useState as e,useCallback as t}from"react";import{CODE_LANGUAGE_FRIENDLY_NAME_MAP as r,$isCodeNode as n,getLanguageFriendlyName as o,CODE_LANGUAGE_MAP as a}from"@lexical/code";import{$isListNode as l}from"@lexical/list";import{$findMatchingParent as i}from"@lexical/utils";import{$getNodeByKey as c,$isRangeSelection as u,$isRootOrShadowRoot as m}from"lexical";import{Select as f,SelectTrigger as p,SelectContent as v,SelectItem as s}from"../../../ui/select.js";import{useToolbarContext as g}from"../../context/toolbar-context.js";import{useUpdateToolbarHandler as E}from"../../editor-hooks/use-update-toolbar.js";var d=function(){for(var e=[],t=0,n=Object.entries(r);t<n.length;t++){var o=n[t],a=o[0],l=o[1];e.push([a,l])}return e}();function x(){var r=g().activeEditor,x=e(""),h=x[0],y=x[1],R=e(null),j=R[0],b=R[1];E((function(e){if(u(e)){var t=e.anchor.getNode(),o="root"===t.getKey()?t:i(t,(function(e){var t=e.getParent();return null!==t&&m(t)}));null===o&&(o=t.getTopLevelElementOrThrow());var c=o.getKey();if(null!==r.getElementByKey(c)&&(b(c),!l(o)&&n(o))){var f=o.getLanguage();return void y(f?a[f]||f:"")}}}));var K=t((function(e){r.update((function(){if(null!==j){var t=c(j);n(t)&&t.setLanguage(e)}}))}),[r,j]);return React.createElement(f,null,React.createElement(p,{className:"h-8 w-min gap-1"},React.createElement("span",null,o(h))),React.createElement(v,null,d.map((function(e){var t=e[0],r=e[1];return React.createElement(s,{key:t,value:t,onPointerUp:function(){K(t)}},r)}))))}export{x as CodeLanguageToolbarPlugin};
//# sourceMappingURL=code-language-toolbar-plugin.js.map
