{"version":3,"file":"table-cell-resizer-plugin.js","sources":["../../../../../../src/components/lexicalEditor/components/plugins/table-cell-resizer-plugin.tsx"],"sourcesContent":[null],"names":["TableCellResizer","_a","editor","targetRef","useRef","resizerRef","tableRectRef","mouseStartPosRef","_b","useState","mouseCurrentPos","updateMouseCurrentPos","_c","activeCell","updateActiveCell","_d","isMouseDown","updateIsMouseDown","_e","draggingDirection","updateDraggingDirection","resetState","useCallback","current","useEffect","registerNodeTransform","TableNode","tableNode","getColWidths","numColumns","getColumnCount","setColWidths","Array","fill","onMouseMove","event","setTimeout","target","x","clientX","y","clientY","buttons","isMouseDownOnEvent","contains","cell_1","getDOMCellFromTarget","update","tableCellNode","$getNearestNodeFromDOMNode","elem","Error","$getTableNodeFromLexicalNodeOrThrow","tableElement","getElementByKey","getKey","getBoundingClientRect","onMouseDown","onMouseUp","removeRootListener","registerRootListener","rootElement","prevRootElement","removeEventListener","addEventListener","isHeightChanging","direction","updateRowHeight","heightChange","$isTableCellNode","tableRowIndex","$getTableRowIndexFromTableCellNode","getRowSpan","tableRows","getChildren","length","tableRow","$isTableRowNode","height","getHeight","undefined","rowCells","Math","min","apply","map","cell","getCellNodeHeight","Infinity","newHeight","max","setHeight","tag","activeEditor","domCellNode","clientHeight","updateColumnWidth","widthChange","columnIndex","tableMap","row","column","getCellColumnIndex","$computeTableMapSkipCellCheck","colWidths","width","newColWidths","__spreadArray","newWidth","mouseUpHandler","handler","preventDefault","stopPropagation","zoom","calculateZoomLevel","document","toggleResize","getResizers","top_1","left","styles","bottom","backgroundColor","cursor","concat","window","pageXOffset","top","pageYOffset","zoneWidth","right","tableRect","resizerStyles","React","createElement","ref","Fragment","className","style","TableCellResizerPlugin","useLexicalComposerContext","isEditable","useLexicalEditable","bodyRef","setBodyRef","body","useMemo","createPortal"],"mappings":"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"}