import{__extends as t,__assign as e}from"../../../../../node_modules/tslib/tslib.es6.mjs.js";import{$applyNodeReplacement as n,DecoratorNode as r}from"lexical";import a from"react";import i from"./MentionComponent.js";function o(t){var e=t.getAttribute("data-lexical-beautiful-mention-trigger"),n=t.getAttribute("data-lexical-beautiful-mention-value"),r=void 0,a=t.getAttribute("data-lexical-beautiful-mention-data");if(a)try{r=JSON.parse(a)}catch(t){console.warn("Failed to parse data attribute of beautiful mention node",t)}return null!=e&&null!==n?{node:s(e,n,r)}:null}var u=function(n){function r(t,e,r,a){var i=n.call(this,a)||this;return i.__trigger=t,i.__value=e,i.__data=r,i}return t(r,n),r.getType=function(){return"beautifulMention"},r.clone=function(t){return new r(t.__trigger,t.__value,t.__data,t.__key)},r.prototype.createDOM=function(){return document.createElement("span")},r.prototype.updateDOM=function(){return!1},r.prototype.exportDOM=function(){var t=document.createElement("span");return t.setAttribute("data-lexical-beautiful-mention","true"),t.setAttribute("data-lexical-beautiful-mention-trigger",this.__trigger),t.setAttribute("data-lexical-beautiful-mention-value",this.__value),this.__data&&t.setAttribute("data-lexical-beautiful-mention-data",JSON.stringify(this.__data)),t.textContent=this.getTextContent(),{element:t}},r.importDOM=function(){return{span:function(t){return t.hasAttribute("data-lexical-beautiful-mention")?{conversion:o,priority:1}:null}}},r.importJSON=function(t){return s(t.trigger,t.value,t.data)},r.prototype.exportJSON=function(){var t=this.__data;return e(e({trigger:this.__trigger,value:this.__value},t?{data:t}:{}),{type:"beautifulMention",version:1})},r.prototype.getTextContent=function(){var t=this.getLatest();return t.__trigger+t.__value},r.prototype.getTrigger=function(){return this.getLatest().__trigger},r.prototype.getValue=function(){return this.getLatest().__value},r.prototype.setValue=function(t){this.getWritable().__value=t},r.prototype.getData=function(){return this.getLatest().__data},r.prototype.setData=function(t){this.getWritable().__data=t},r.prototype.component=function(){return null},r.prototype.decorate=function(t,e){var n=this.getCssClassesFromTheme(e),r=n.className,o=n.classNameFocused,u=n.classNames;return a.createElement(i,{nodeKey:this.getKey(),trigger:this.getTrigger(),value:this.getValue(),data:this.getData(),className:r,classNameFocused:o,classNames:u,component:this.component()})},r.prototype.getCssClassesFromTheme=function(t){var e,n,r=this,a=null!==(e=t.theme.beautifulMentions)&&void 0!==e?e:{},i=Object.entries(a).find((function(t){var e=t[0];return new RegExp(e).test(r.__trigger)})),o=null!==(n=null==i?void 0:i[0])&&void 0!==n?n:"",u=null==i?void 0:i[1],s="string"==typeof u?u:void 0;return{className:s,classNameFocused:s&&"string"==typeof a[o+"Focused"]?a[o+"Focused"]:void 0,classNames:i&&"string"!=typeof u?u:void 0}},r}(r);function s(t,e,r){var a=new u(t,e,r);return n(a)}function l(t){return t instanceof u}export{s as $createBeautifulMentionNode,l as $isBeautifulMentionNode,u as BeautifulMentionNode};
//# sourceMappingURL=MentionNode.js.map
