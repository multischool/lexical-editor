import{typeof as e}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{__assign as t}from"../../../../../node_modules/tslib/tslib.es6.mjs.js";import{$getSelection as r,$isRangeSelection as o,$isTextNode as n,$getRoot as i,$isElementNode as s,$createRangeSelection as u,$setSelection as f,$getEditor as l,$nodesOfType as a,$isDecoratorNode as c}from"lexical";import{BeautifulMentionNode as d}from"./MentionNode.js";import{$isZeroWidthNode as g}from"./ZeroWidthNode.js";var p="\\.,\\*\\?\\$\\|#{}\\(\\)\\^\\[\\]\\\\/!%'\"~=<>_:;",m="\\(",v=function(e){return"(?:"+e.join("|")+")"},x=function(e,t){return(0===e.length?"":"(?!"+e.join("|")+")")+"[^\\s"+t+"]"},N=75;function b(e,t,r){return new RegExp(x(t,r)).test(e)}function h(e,i){var s=r();if(s&&o(s)){var u=s.anchor,f=s.focus,l=s.getNodes()[0];if(u.key===f.key&&u.offset===f.offset&&l){var a=n(l)&&l.isSimpleText(),c=u.type,d=u.offset,g=C(l),p=0===d,m=g.length===d,v=g.charAt(d-1),x=g.charAt(d),N=b(v,e,i),h=b(x,e,i),S=/\s/.test(v),A=/\s/.test(x),P=y(l),T=j(l),_=l.getParent(),w={node:l,type:c,offset:d,isTextNode:a,textContent:g,selection:s,prevNode:P,nextNode:T,parentNode:_,cursorAtStartOfNode:p,cursorAtEndOfNode:m,wordCharBeforeCursor:N,wordCharAfterCursor:h,spaceBeforeCursor:S,spaceAfterCursor:A};return t(t({},w),a?{isTextNode:!0,node:l}:{isTextNode:!1,node:l})}}}function j(e){for(var t=e.getNextSibling();null!==t&&g(t);)t=t.getNextSibling();return t}function y(e){for(var t=e.getPreviousSibling();null!==t&&g(t);)t=t.getPreviousSibling();return t}function C(e){return g(e)?"":e.getTextContent()}function S(t,r){return"string"==typeof t||"boolean"==typeof t?t:null!==r&&("object"===e(t)&&t[r])}function A(t,r){return"number"==typeof t||!1===t?t:void 0===t?5:null!==r&&("object"===e(t)?t[r]:5)}function P(){var e=function(e){var t=e.getLastDescendant();return s(t)||n(t)?t:c(t)?t.getParent():e}(i()),t=null==e?void 0:e.getKey(),r=s(e)?e.getChildrenSize():n(e)?C(e).length:0,o=s(e)?"element":"text";if(t){var l=u();l.anchor.set(t,r,o),l.focus.set(t,r,o),f(l)}}function T(e){return e=null!=e?e:l(),a(d)}export{T as $findBeautifulMentionNodes,h as $getSelectionInfo,P as $selectEnd,p as DEFAULT_PUNCTUATION,N as LENGTH_LIMIT,m as PRE_TRIGGER_CHARS,v as TRIGGERS,x as VALID_CHARS,S as getCreatableProp,A as getMenuItemLimitProp,j as getNextSibling,y as getPreviousSibling,C as getTextContent,b as isWordChar};
//# sourceMappingURL=mention-utils.js.map
