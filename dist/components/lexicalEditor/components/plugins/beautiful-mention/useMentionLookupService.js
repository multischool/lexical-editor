import{__spreadArray as n}from"../../../../../node_modules/tslib/tslib.es6.mjs.js";import{useState as e,useEffect as r,useMemo as t}from"react";import{useDebounce as u}from"./useDebounce.js";function i(i){var o=i.queryString,l=i.trigger,f=i.searchDelay,s=i.items,c=i.onSearch,a=i.justSelectedAnOption,d=u(o,f),m=e(!1),v=m[0],p=m[1],g=e([]),j=g[0],y=g[1],b=e(null),h=b[0],w=b[1];return r((function(){if(s){if(null===l)return y([]),void w(null);var e=Object.entries(s).find((function(n){var e=n[0];return new RegExp(e).test(l)}));if(e){var r=o?e[1].filter((function(n){return("string"==typeof n?n:n.value).toLowerCase().includes(o.toLowerCase())})):n([],e[1],!0);y(r),w(o)}}}),[s,l,o]),r((function(){if(c){if(null===l||null===d)return y([]),void w(null);p(!0),w(d),c(l,(null==a?void 0:a.current)?"":d).then((function(n){y(n)})).finally((function(){p(!1)})),(null==a?void 0:a.current)&&(a.current=!1)}}),[d,c,l,a]),t((function(){return{loading:v,results:j,query:h}}),[v,j,h])}export{i as useMentionLookupService};
//# sourceMappingURL=useMentionLookupService.js.map
