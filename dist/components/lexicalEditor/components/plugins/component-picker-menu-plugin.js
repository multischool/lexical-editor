import{__spreadArray as e}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import{useState as t,useMemo as n,useCallback as r}from"react";import o from"../../../../node_modules/next/dynamic.js";import{useLexicalComposerContext as l}from"../../../../node_modules/@lexical/react/LexicalComposerContext.mjs.js";import{useBasicTypeaheadTriggerMatch as a}from"../../../../node_modules/@lexical/react/LexicalTypeaheadMenuPlugin.mjs.js";import{useEditorModal as i}from"../editor-hooks/use-modal.js";var c=o((function(){return import("./default/lexical-typeahead-menu-plugin.js")}),{ssr:!1});function m(o){var m=o.baseOptions,u=void 0===m?[]:m,s=o.dynamicOptionsFn,d=l()[0],p=i(),f=p[0],g=p[1],x=t(null),h=x[0],y=x[1],v=a("/",{minLength:0}),R=n((function(){if(!h)return u;var t=new RegExp(h,"i");return e(e([],(null==s?void 0:s({queryString:h}))||[],!0),u.filter((function(e){return t.test(e.title)||e.keywords.some((function(e){return t.test(e)}))})),!0)}),[d,h,g]),j=r((function(e,t,n,r){d.update((function(){null==t||t.remove(),e.onSelect(r,d,g),n()}))}),[d]);return React.createElement(React.Fragment,null,f,React.createElement(c,{onQueryChange:y,onSelectOption:j,triggerFn:v,options:R,menuRenderFn:function(e,t){var n=t.selectedIndex,r=t.selectOptionAndCleanUp,o=t.setHighlightedIndex;return e.current&&R.length?createPortal(React.createElement("div",{className:"fixed w-[250px] rounded-md shadow-md"},React.createElement(Command,{onKeyDown:function(e){"ArrowUp"===e.key?(e.preventDefault(),o(null!==n?(n-1+R.length)%R.length:R.length-1)):"ArrowDown"===e.key&&(e.preventDefault(),o(null!==n?(n+1)%R.length:0))}},React.createElement(CommandList,null,React.createElement(CommandGroup,null,R.map((function(e,t){return React.createElement(CommandItem,{key:e.key,value:e.title,onSelect:function(){r(e)},className:"flex items-center gap-2 ".concat(n===t?"bg-accent":"!bg-transparent")},e.icon,e.title)})))))),e.current):null}}))}export{m as ComponentPickerMenuPlugin};
//# sourceMappingURL=component-picker-menu-plugin.js.map
