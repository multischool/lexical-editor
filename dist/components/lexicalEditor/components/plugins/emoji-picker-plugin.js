import{__extends as e,__spreadArray as n}from"../../../../node_modules/tslib/tslib.es6.mjs.js";import*as t from"react";import{useState as r,useEffect as o,useMemo as l,useCallback as i}from"react";import u from"../../../../node_modules/next/dynamic.js";import{useLexicalComposerContext as a}from"../../../../node_modules/@lexical/react/LexicalComposerContext.mjs.js";import{MenuOption as m,useBasicTypeaheadTriggerMatch as c}from"../../../../node_modules/@lexical/react/LexicalTypeaheadMenuPlugin.mjs.js";import{$getSelection as s,$isRangeSelection as d,$createTextNode as f}from"lexical";var p=u((function(){return import("./default/lexical-typeahead-menu-plugin.js")}),{ssr:!1}),g=function(n){function t(e,t,r){var o=n.call(this,e)||this;return o.title=e,o.emoji=t,o.keywords=r.keywords||[],o}return e(t,n),t}(m);function x(){var e=a()[0],u=r(null),m=u[0],x=u[1],h=r([]),j=h[0],w=h[1],y=r(!1);y[0];var v=y[1];o((function(){import("../utils/emoji-list.js").then((function(e){return w(e.default)}))}),[]);var k=l((function(){return null!=j?j.map((function(e){var t=e.emoji,r=e.aliases,o=e.tags;return new g(r[0],t,{keywords:n(n([],r,!0),o,!0)})})):[]}),[j]),C=c(":",{minLength:0}),E=l((function(){return k.filter((function(e){return null!=m?!(!new RegExp(m,"gi").exec(e.title)&&null==e.keywords)&&e.keywords.some((function(e){return new RegExp(m,"gi").exec(e)})):k})).slice(0,10)}),[k,m]),b=i((function(n,t,r){e.update((function(){var e=s();d(e)&&null!=n&&(t&&t.remove(),e.insertNodes([f(n.emoji)]),r())}))}),[e]);return t.createElement(p,{onQueryChange:x,onSelectOption:b,triggerFn:C,options:E,onOpen:function(){v(!0)},onClose:function(){v(!1)},menuRenderFn:function(e,n){var r=n.selectedIndex,o=n.selectOptionAndCleanUp,l=n.setHighlightedIndex;return e.current&&E.length?createPortal(t.createElement("div",{className:"fixed w-[200px] rounded-md shadow-md"},t.createElement(Command,{onKeyDown:function(e){"ArrowUp"===e.key?(e.preventDefault(),l(null!==r?(r-1+E.length)%E.length:E.length-1)):"ArrowDown"===e.key&&(e.preventDefault(),l(null!==r?(r+1)%E.length:0))}},t.createElement(CommandList,null,t.createElement(CommandGroup,null,E.map((function(e,n){return t.createElement(CommandItem,{key:e.key,value:e.title,onSelect:function(){o(e)},className:"flex items-center gap-2 ".concat(r===n?"bg-accent":"!bg-transparent")},e.emoji," ",e.title)})))))),e.current):null}})}export{x as EmojiPickerPlugin};
//# sourceMappingURL=emoji-picker-plugin.js.map
