function t(t,e,n,r=t=>t){return t*r(.5-e*(.5-n))}function e(t,e){return[t[0]+e[0],t[1]+e[1]]}function n(t,e){return[t[0]-e[0],t[1]-e[1]]}function r(t,e){return[t[0]*e,t[1]*e]}function i(t){return[t[1],-t[0]]}function u(t,e){return t[0]*e[0]+t[1]*e[1]}function l(t,e){return t[0]===e[0]&&t[1]===e[1]}function o(t,e){return function(t){return t[0]*t[0]+t[1]*t[1]}(n(t,e))}function s(t){return function(t,e){return[t[0]/e,t[1]/e]}(t,function(t){return Math.hypot(t[0],t[1])}(t))}function h(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function c(t,e,n){let r=Math.sin(n),i=Math.cos(n),u=t[0]-e[0],l=t[1]-e[1],o=u*r+l*i;return[u*i-l*r+e[0],o+e[1]]}function f(t,i,u){return e(t,r(n(i,t),u))}function p(t,n,i){return e(t,r(n,i))}var{min:a,PI:g}=Math,v=g+1e-4;function M(l,h={}){let{size:g=16,smoothing:M=.5,thinning:m=.5,simulatePressure:d=!0,easing:x=t=>t,start:y={},end:L={},last:P=!1}=h,{cap:k=!0,easing:S=t=>t*(2-t)}=y,{cap:z=!0,easing:A=t=>--t*t*t+1}=L;if(0===l.length||g<=0)return[];let w,I=l[l.length-1].runningLength,O=!1===y.taper?0:!0===y.taper?Math.max(g,I):y.taper,b=!1===L.taper?0:!0===L.taper?Math.max(g,I):L.taper,j=Math.pow(g*M,2),q=[],B=[],C=l.slice(0,10).reduce(((t,e)=>{let n=e.pressure;if(d){let r=a(1,e.distance/g),i=a(1,1-r);n=a(1,t+.275*r*(i-t))}return(t+n)/2}),l[0].pressure),D=t(g,m,l[l.length-1].pressure,x),E=l[0].vector,F=l[0].point,G=F,H=F,J=G,K=!1;for(let s=0;s<l.length;s++){let{pressure:h}=l[s],{point:p,vector:M,distance:y,runningLength:L}=l[s];if(s<l.length-1&&I-L<3)continue;if(m){if(d){let t=a(1,y/g),e=a(1,1-t);h=a(1,C+.275*t*(e-C))}D=t(g,m,h,x)}else D=g/2;void 0===w&&(w=D);let P=L<O?S(L/O):1,k=I-L<b?A((I-L)/b):1;D=Math.max(.01,D*Math.min(P,k));let z=(s<l.length-1?l[s+1]:l[s]).vector,N=s<l.length-1?u(M,z):1,Q=null!==N&&N<0;if(u(M,E)<0&&!K||Q){let t=r(i(E),D);for(let r=1/13,i=0;i<=1;i+=r)H=c(n(p,t),p,v*i),q.push(H),J=c(e(p,t),p,v*-i),B.push(J);F=H,G=J,Q&&(K=!0);continue}if(K=!1,s===l.length-1){let t=r(i(M),D);q.push(n(p,t)),B.push(e(p,t));continue}let R=r(i(f(z,M,N)),D);H=n(p,R),(s<=1||o(F,H)>j)&&(q.push(H),F=H),J=e(p,R),(s<=1||o(G,J)>j)&&(B.push(J),G=J),C=h,E=M}let N=l[0].point.slice(0,2),Q=l.length>1?l[l.length-1].point.slice(0,2):e(l[0].point,[1,1]),R=[],T=[];if(1===l.length){if(!O&&!b||P){let t=p(N,s(i(n(N,Q))),-(w||D)),e=[];for(let n=1/13,r=n;r<=1;r+=n)e.push(c(t,N,2*v*r));return e}}else{if(!(O||b&&1===l.length))if(k)for(let t=1/13,e=t;e<=1;e+=t){let t=c(B[0],N,v*e);R.push(t)}else{let t=n(q[0],B[0]),i=r(t,.5),u=r(t,.51);R.push(n(N,i),n(N,u),e(N,u),e(N,i))}let t=i(function(t){return[-t[0],-t[1]]}(l[l.length-1].vector));if(b||O&&1===l.length)T.push(Q);else if(z){let e=p(Q,t,D);for(let t=1/29,n=t;n<1;n+=t)T.push(c(e,Q,3*v*n))}else T.push(e(Q,r(t,D)),e(Q,r(t,.99*D)),n(Q,r(t,.99*D)),n(Q,r(t,D)))}return q.concat(T,B.reverse(),R)}function m(t,r={}){var i;let{streamline:u=.5,size:o=16,last:c=!1}=r;if(0===t.length)return[];let p=.15+.85*(1-u),a=Array.isArray(t[0])?t:t.map((({x:t,y:e,pressure:n=.5})=>[t,e,n]));if(2===a.length){let t=a[1];a=a.slice(0,-1);for(let e=1;e<5;e++)a.push(f(a[0],t,e/4))}1===a.length&&(a=[...a,[...e(a[0],[1,1]),...a[0].slice(2)]]);let g=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],v=!1,M=0,m=g[0],d=a.length-1;for(let t=1;t<a.length;t++){let e=c&&t===d?a[t].slice(0,2):f(m.point,a[t],p);if(l(m.point,e))continue;let r=h(e,m.point);if(M+=r,t<d&&!v){if(M<o)continue;v=!0}m={point:e,pressure:a[t][2]>=0?a[t][2]:.5,vector:s(n(m.point,e)),distance:r,runningLength:M},g.push(m)}return g[0].vector=(null==(i=g[1])?void 0:i.vector)||[0,0],g}function d(t,e={}){return M(m(t,e),e)}export{d as getStroke,M as getStrokeOutlinePoints,m as getStrokePoints};
//# sourceMappingURL=index.js.map
