{"version":3,"file":"index.js","sources":["../../../../../node_modules/perfect-freehand/dist/esm/index.js"],"sourcesContent":["function $(e,t,u,x=h=>h){return e*x(.5-t*(.5-u))}function se(e){return[-e[0],-e[1]]}function l(e,t){return[e[0]+t[0],e[1]+t[1]]}function a(e,t){return[e[0]-t[0],e[1]-t[1]]}function b(e,t){return[e[0]*t,e[1]*t]}function he(e,t){return[e[0]/t,e[1]/t]}function R(e){return[e[1],-e[0]]}function B(e,t){return e[0]*t[0]+e[1]*t[1]}function ue(e,t){return e[0]===t[0]&&e[1]===t[1]}function ge(e){return Math.hypot(e[0],e[1])}function de(e){return e[0]*e[0]+e[1]*e[1]}function A(e,t){return de(a(e,t))}function G(e){return he(e,ge(e))}function ie(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function L(e,t,u){let x=Math.sin(u),h=Math.cos(u),y=e[0]-t[0],n=e[1]-t[1],f=y*h-n*x,d=y*x+n*h;return[f+t[0],d+t[1]]}function K(e,t,u){return l(e,b(a(t,e),u))}function ee(e,t,u){return l(e,b(t,u))}var{min:C,PI:xe}=Math,pe=.275,V=xe+1e-4;function ce(e,t={}){let{size:u=16,smoothing:x=.5,thinning:h=.5,simulatePressure:y=!0,easing:n=r=>r,start:f={},end:d={},last:D=!1}=t,{cap:S=!0,easing:j=r=>r*(2-r)}=f,{cap:q=!0,easing:c=r=>--r*r*r+1}=d;if(e.length===0||u<=0)return[];let p=e[e.length-1].runningLength,g=f.taper===!1?0:f.taper===!0?Math.max(u,p):f.taper,T=d.taper===!1?0:d.taper===!0?Math.max(u,p):d.taper,te=Math.pow(u*x,2),_=[],M=[],H=e.slice(0,10).reduce((r,i)=>{let o=i.pressure;if(y){let s=C(1,i.distance/u),W=C(1,1-s);o=C(1,r+(W-r)*(s*pe))}return(r+o)/2},e[0].pressure),m=$(u,h,e[e.length-1].pressure,n),U,X=e[0].vector,z=e[0].point,F=z,O=z,E=F,J=!1;for(let r=0;r<e.length;r++){let{pressure:i}=e[r],{point:o,vector:s,distance:W,runningLength:I}=e[r];if(r<e.length-1&&p-I<3)continue;if(h){if(y){let v=C(1,W/u),Z=C(1,1-v);i=C(1,H+(Z-H)*(v*pe))}m=$(u,h,i,n)}else m=u/2;U===void 0&&(U=m);let le=I<g?j(I/g):1,fe=p-I<T?c((p-I)/T):1;m=Math.max(.01,m*Math.min(le,fe));let re=(r<e.length-1?e[r+1]:e[r]).vector,Y=r<e.length-1?B(s,re):1,be=B(s,X)<0&&!J,ne=Y!==null&&Y<0;if(be||ne){let v=b(R(X),m);for(let Z=1/13,w=0;w<=1;w+=Z)O=L(a(o,v),o,V*w),_.push(O),E=L(l(o,v),o,V*-w),M.push(E);z=O,F=E,ne&&(J=!0);continue}if(J=!1,r===e.length-1){let v=b(R(s),m);_.push(a(o,v)),M.push(l(o,v));continue}let oe=b(R(K(re,s,Y)),m);O=a(o,oe),(r<=1||A(z,O)>te)&&(_.push(O),z=O),E=l(o,oe),(r<=1||A(F,E)>te)&&(M.push(E),F=E),H=i,X=s}let P=e[0].point.slice(0,2),k=e.length>1?e[e.length-1].point.slice(0,2):l(e[0].point,[1,1]),Q=[],N=[];if(e.length===1){if(!(g||T)||D){let r=ee(P,G(R(a(P,k))),-(U||m)),i=[];for(let o=1/13,s=o;s<=1;s+=o)i.push(L(r,P,V*2*s));return i}}else{if(!(g||T&&e.length===1))if(S)for(let i=1/13,o=i;o<=1;o+=i){let s=L(M[0],P,V*o);Q.push(s)}else{let i=a(_[0],M[0]),o=b(i,.5),s=b(i,.51);Q.push(a(P,o),a(P,s),l(P,s),l(P,o))}let r=R(se(e[e.length-1].vector));if(T||g&&e.length===1)N.push(k);else if(q){let i=ee(k,r,m);for(let o=1/29,s=o;s<1;s+=o)N.push(L(i,k,V*3*s))}else N.push(l(k,b(r,m)),l(k,b(r,m*.99)),a(k,b(r,m*.99)),a(k,b(r,m)))}return _.concat(N,M.reverse(),Q)}function me(e,t={}){var q;let{streamline:u=.5,size:x=16,last:h=!1}=t;if(e.length===0)return[];let y=.15+(1-u)*.85,n=Array.isArray(e[0])?e:e.map(({x:c,y:p,pressure:g=.5})=>[c,p,g]);if(n.length===2){let c=n[1];n=n.slice(0,-1);for(let p=1;p<5;p++)n.push(K(n[0],c,p/4))}n.length===1&&(n=[...n,[...l(n[0],[1,1]),...n[0].slice(2)]]);let f=[{point:[n[0][0],n[0][1]],pressure:n[0][2]>=0?n[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],d=!1,D=0,S=f[0],j=n.length-1;for(let c=1;c<n.length;c++){let p=h&&c===j?n[c].slice(0,2):K(S.point,n[c],y);if(ue(S.point,p))continue;let g=ie(p,S.point);if(D+=g,c<j&&!d){if(D<x)continue;d=!0}S={point:p,pressure:n[c][2]>=0?n[c][2]:.5,vector:G(a(S.point,p)),distance:g,runningLength:D},f.push(S)}return f[0].vector=((q=f[1])==null?void 0:q.vector)||[0,0],f}function ae(e,t={}){return ce(me(e,t),t)}var _e=ae;export{_e as default,ae as getStroke,ce as getStrokeOutlinePoints,me as getStrokePoints};\n"],"names":["$","e","t","u","x","h","l","a","b","R","B","ue","A","de","G","he","Math","hypot","ge","ie","L","sin","cos","y","n","d","K","ee","min","C","PI","xe","V","ce","size","smoothing","thinning","simulatePressure","easing","r","start","f","end","last","D","cap","S","j","q","c","length","U","p","runningLength","g","taper","max","T","te","pow","_","M","H","slice","reduce","i","o","pressure","s","distance","W","m","X","vector","z","point","F","O","E","J","I","v","Z","le","fe","re","Y","ne","w","push","oe","P","k","Q","N","se","concat","reverse","me","streamline","Array","isArray","map","ae"],"mappings":"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"}