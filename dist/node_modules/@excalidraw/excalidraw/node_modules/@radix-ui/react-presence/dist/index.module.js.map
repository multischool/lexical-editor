{"version":3,"file":"index.module.js","sources":["../../../../../../../../node_modules/@excalidraw/excalidraw/node_modules/@radix-ui/react-presence/dist/index.module.js"],"sourcesContent":["import {Children as $iqq3r$Children, cloneElement as $iqq3r$cloneElement, useState as $iqq3r$useState, useRef as $iqq3r$useRef, useEffect as $iqq3r$useEffect, useCallback as $iqq3r$useCallback, useReducer as $iqq3r$useReducer} from \"react\";\nimport {flushSync as $iqq3r$flushSync} from \"react-dom\";\nimport {useComposedRefs as $iqq3r$useComposedRefs} from \"@radix-ui/react-compose-refs\";\nimport {useLayoutEffect as $iqq3r$useLayoutEffect} from \"@radix-ui/react-use-layout-effect\";\n\n\n\n\n\n\nfunction $fe963b355347cc68$export$3e6543de14f8614f(initialState, machine) {\n    return $iqq3r$useReducer((state, event)=>{\n        const nextState = machine[state][event];\n        return nextState !== null && nextState !== void 0 ? nextState : state;\n    }, initialState);\n}\n\n\nconst $921a889cee6df7e8$export$99c2b779aa4e8b8b = (props)=>{\n    const { present: present , children: children  } = props;\n    const presence = $921a889cee6df7e8$var$usePresence(present);\n    const child = typeof children === 'function' ? children({\n        present: presence.isPresent\n    }) : $iqq3r$Children.only(children);\n    const ref = $iqq3r$useComposedRefs(presence.ref, child.ref);\n    const forceMount = typeof children === 'function';\n    return forceMount || presence.isPresent ? /*#__PURE__*/ $iqq3r$cloneElement(child, {\n        ref: ref\n    }) : null;\n};\n$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName = 'Presence';\n/* -------------------------------------------------------------------------------------------------\n * usePresence\n * -----------------------------------------------------------------------------------------------*/ function $921a889cee6df7e8$var$usePresence(present) {\n    const [node1, setNode] = $iqq3r$useState();\n    const stylesRef = $iqq3r$useRef({});\n    const prevPresentRef = $iqq3r$useRef(present);\n    const prevAnimationNameRef = $iqq3r$useRef('none');\n    const initialState = present ? 'mounted' : 'unmounted';\n    const [state, send] = $fe963b355347cc68$export$3e6543de14f8614f(initialState, {\n        mounted: {\n            UNMOUNT: 'unmounted',\n            ANIMATION_OUT: 'unmountSuspended'\n        },\n        unmountSuspended: {\n            MOUNT: 'mounted',\n            ANIMATION_END: 'unmounted'\n        },\n        unmounted: {\n            MOUNT: 'mounted'\n        }\n    });\n    $iqq3r$useEffect(()=>{\n        const currentAnimationName = $921a889cee6df7e8$var$getAnimationName(stylesRef.current);\n        prevAnimationNameRef.current = state === 'mounted' ? currentAnimationName : 'none';\n    }, [\n        state\n    ]);\n    $iqq3r$useLayoutEffect(()=>{\n        const styles = stylesRef.current;\n        const wasPresent = prevPresentRef.current;\n        const hasPresentChanged = wasPresent !== present;\n        if (hasPresentChanged) {\n            const prevAnimationName = prevAnimationNameRef.current;\n            const currentAnimationName = $921a889cee6df7e8$var$getAnimationName(styles);\n            if (present) send('MOUNT');\n            else if (currentAnimationName === 'none' || (styles === null || styles === void 0 ? void 0 : styles.display) === 'none') // If there is no exit animation or the element is hidden, animations won't run\n            // so we unmount instantly\n            send('UNMOUNT');\n            else {\n                /**\n         * When `present` changes to `false`, we check changes to animation-name to\n         * determine whether an animation has started. We chose this approach (reading\n         * computed styles) because there is no `animationrun` event and `animationstart`\n         * fires after `animation-delay` has expired which would be too late.\n         */ const isAnimating = prevAnimationName !== currentAnimationName;\n                if (wasPresent && isAnimating) send('ANIMATION_OUT');\n                else send('UNMOUNT');\n            }\n            prevPresentRef.current = present;\n        }\n    }, [\n        present,\n        send\n    ]);\n    $iqq3r$useLayoutEffect(()=>{\n        if (node1) {\n            /**\n       * Triggering an ANIMATION_OUT during an ANIMATION_IN will fire an `animationcancel`\n       * event for ANIMATION_IN after we have entered `unmountSuspended` state. So, we\n       * make sure we only trigger ANIMATION_END for the currently active animation.\n       */ const handleAnimationEnd = (event)=>{\n                const currentAnimationName = $921a889cee6df7e8$var$getAnimationName(stylesRef.current);\n                const isCurrentAnimation = currentAnimationName.includes(event.animationName);\n                if (event.target === node1 && isCurrentAnimation) // With React 18 concurrency this update is applied\n                // a frame after the animation ends, creating a flash of visible content.\n                // By manually flushing we ensure they sync within a frame, removing the flash.\n                $iqq3r$flushSync(()=>send('ANIMATION_END')\n                );\n            };\n            const handleAnimationStart = (event)=>{\n                if (event.target === node1) // if animation occurred, store its name as the previous animation.\n                prevAnimationNameRef.current = $921a889cee6df7e8$var$getAnimationName(stylesRef.current);\n            };\n            node1.addEventListener('animationstart', handleAnimationStart);\n            node1.addEventListener('animationcancel', handleAnimationEnd);\n            node1.addEventListener('animationend', handleAnimationEnd);\n            return ()=>{\n                node1.removeEventListener('animationstart', handleAnimationStart);\n                node1.removeEventListener('animationcancel', handleAnimationEnd);\n                node1.removeEventListener('animationend', handleAnimationEnd);\n            };\n        } else // Transition to the unmounted state if the node is removed prematurely.\n        // We avoid doing so during cleanup as the node may change but still exist.\n        send('ANIMATION_END');\n    }, [\n        node1,\n        send\n    ]);\n    return {\n        isPresent: [\n            'mounted',\n            'unmountSuspended'\n        ].includes(state),\n        ref: $iqq3r$useCallback((node)=>{\n            if (node) stylesRef.current = getComputedStyle(node);\n            setNode(node);\n        }, [])\n    };\n}\n/* -----------------------------------------------------------------------------------------------*/ function $921a889cee6df7e8$var$getAnimationName(styles) {\n    return (styles === null || styles === void 0 ? void 0 : styles.animationName) || 'none';\n}\n\n\n\n\nexport {$921a889cee6df7e8$export$99c2b779aa4e8b8b as Presence};\n//# sourceMappingURL=index.module.js.map\n"],"names":["$921a889cee6df7e8$export$99c2b779aa4e8b8b","props","present","children","presence","node1","setNode","$iqq3r$useState","stylesRef","$iqq3r$useRef","prevPresentRef","prevAnimationNameRef","initialState","state","send","machine","$iqq3r$useReducer","event","nextState","$fe963b355347cc68$export$3e6543de14f8614f","mounted","UNMOUNT","ANIMATION_OUT","unmountSuspended","MOUNT","ANIMATION_END","unmounted","$iqq3r$useEffect","currentAnimationName","$921a889cee6df7e8$var$getAnimationName","current","$iqq3r$useLayoutEffect","styles","wasPresent","prevAnimationName","display","handleAnimationEnd","isCurrentAnimation","includes","animationName","target","$iqq3r$flushSync","handleAnimationStart","addEventListener","removeEventListener","isPresent","ref","$iqq3r$useCallback","node","getComputedStyle","$921a889cee6df7e8$var$usePresence","child","$iqq3r$Children","only","$iqq3r$useComposedRefs","$iqq3r$cloneElement","displayName"],"mappings":"wUAkBK,MAACA,EAA6CC,IAC/C,MAAQC,QAASA,EAAUC,SAAUA,GAAcF,EAC7CG,EAa2F,SAA2CF,GAC5I,MAAOG,EAAOC,GAAWC,IACnBC,EAAYC,EAAc,CAAA,GAC1BC,EAAiBD,EAAcP,GAC/BS,EAAuBF,EAAc,QACrCG,EAAeV,EAAU,UAAY,aACpCW,EAAOC,GA7BlB,SAAmDF,EAAcG,GAC7D,OAAOC,GAAkB,CAACH,EAAOI,KAC7B,MAAMC,EAAYH,EAAQF,GAAOI,GACjC,OAAOC,QAA6CA,EAAYL,CAAK,GACtED,EACP,CAwB0BO,CAA0CP,EAAc,CAC1EQ,QAAS,CACLC,QAAS,YACTC,cAAe,oBAEnBC,iBAAkB,CACdC,MAAO,UACPC,cAAe,aAEnBC,UAAW,CACPF,MAAO,aAsEf,OAnEAG,GAAiB,KACb,MAAMC,EAAuBC,EAAuCrB,EAAUsB,SAC9EnB,EAAqBmB,QAAoB,YAAVjB,EAAsBe,EAAuB,MAAM,GACnF,CACCf,IAEJkB,GAAuB,KACnB,MAAMC,EAASxB,EAAUsB,QACnBG,EAAavB,EAAeoB,QAElC,GAD0BG,IAAe/B,EAClB,CACnB,MAAMgC,EAAoBvB,EAAqBmB,QACzCF,EAAuBC,EAAuCG,GACpE,GAAI9B,EAASY,EAAK,cACb,GAA6B,SAAzBc,GAAwG,UAApEI,aAAuC,EAASA,EAAOG,SAEpGrB,EAAK,eACA,CAO8BA,EAA3BmB,GADYC,IAAsBN,EACF,gBAC1B,UACb,CACDlB,EAAeoB,QAAU5B,CAC5B,IACF,CACCA,EACAY,IAEJiB,GAAuB,KACnB,GAAI1B,EAAO,CAKT,MAAM+B,EAAsBnB,IACtB,MACMoB,EADuBR,EAAuCrB,EAAUsB,SAC9BQ,SAASrB,EAAMsB,eAC3DtB,EAAMuB,SAAWnC,GAASgC,GAG9BI,GAAiB,IAAI3B,EAAK,kBACzB,EAEC4B,EAAwBzB,IACtBA,EAAMuB,SAAWnC,IACrBM,EAAqBmB,QAAUD,EAAuCrB,EAAUsB,SAAQ,EAK5F,OAHAzB,EAAMsC,iBAAiB,iBAAkBD,GACzCrC,EAAMsC,iBAAiB,kBAAmBP,GAC1C/B,EAAMsC,iBAAiB,eAAgBP,GAChC,KACH/B,EAAMuC,oBAAoB,iBAAkBF,GAC5CrC,EAAMuC,oBAAoB,kBAAmBR,GAC7C/B,EAAMuC,oBAAoB,eAAgBR,EAAmB,CAEpE,CAEDtB,EAAK,gBAAgB,GACtB,CACCT,EACAS,IAEG,CACH+B,UAAW,CACP,UACA,oBACFP,SAASzB,GACXiC,IAAKC,GAAoBC,IACjBA,IAAMxC,EAAUsB,QAAUmB,iBAAiBD,IAC/C1C,EAAQ0C,EAAK,GACd,IAEX,CA7GqBE,CAAkChD,GAC7CiD,EAA4B,mBAAbhD,EAA0BA,EAAS,CACpDD,QAASE,EAASyC,YACjBO,EAAgBC,KAAKlD,GACpB2C,EAAMQ,EAAuBlD,EAAS0C,IAAKK,EAAML,KAEvD,MADuC,mBAAb3C,GACLC,EAASyC,UAA0BU,EAAoBJ,EAAO,CAC/EL,IAAKA,IACJ,IAAI,EAsGwF,SAASjB,EAAuCG,GACjJ,OAAQA,aAAuC,EAASA,EAAOO,gBAAkB,MACrF,CAtGAvC,EAA0CwD,YAAc"}