import{N as e}from"../../../mermaid/dist/mermaid-b5860b54.js";import"../../../dayjs/dayjs.min.js";import"../../../@braintree/sanitize-url/dist/index.js";import"../../../d3-transition/src/selection/index.js";import"../../../d3-zoom/src/transform.js";import"../../../dompurify/dist/purify.es.mjs.js";import{MERMAID_CONFIG as t}from"./constants.js";import{encodeEntities as r}from"./utils.js";import{parseMermaidFlowChartDiagram as i}from"./parser/flowchart.js";import{parseMermaidSequenceDiagram as s}from"./parser/sequence.js";import{parseMermaidClassDiagram as a}from"./parser/class.js";const o=async(o,m=t)=>{e.initialize({...t,...m});const n=await e.mermaidAPI.getDiagramFromText(r(o)),{svg:d}=await e.render("mermaid-to-excalidraw",o),c=document.createElement("div");let p;switch(c.setAttribute("style","opacity: 0; position: relative; z-index: -1;"),c.innerHTML=d,c.id="mermaid-diagram",document.body.appendChild(c),n.type){case"flowchart-v2":p=i(n,c);break;case"sequence":p=s(n,c);break;case"classDiagram":p=a(n,c);break;default:p=(e=>{const t=e.querySelector("svg");if(!t)throw new Error("SVG element not found");const r=t.getBoundingClientRect(),i=r.width,s=r.height;t.setAttribute("width",`${i}`),t.setAttribute("height",`${s}`);const a=unescape(encodeURIComponent(t.outerHTML));return{type:"graphImage",mimeType:"image/svg+xml",dataURL:`data:image/svg+xml;base64,${btoa(a)}`,width:i,height:s}})(c)}return c.remove(),p};export{o as parseMermaid};
//# sourceMappingURL=parseMermaid.js.map
