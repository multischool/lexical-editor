{"version":3,"file":"create-edge-labels.js","sources":["../../../../../node_modules/dagre-d3-es/src/dagre-js/create-edge-labels.js"],"sourcesContent":["import * as d3 from 'd3';\nimport * as _ from 'lodash-es';\nimport { addLabel } from './label/add-label.js';\nimport * as util from './util.js';\n\nexport { createEdgeLabels, setCreateEdgeLabels };\n\nlet createEdgeLabels = function (selection, g) {\n  var svgEdgeLabels = selection\n    .selectAll('g.edgeLabel')\n    .data(g.edges(), function (e) {\n      return util.edgeToId(e);\n    })\n    .classed('update', true);\n\n  svgEdgeLabels.exit().remove();\n  svgEdgeLabels.enter().append('g').classed('edgeLabel', true).style('opacity', 0);\n\n  svgEdgeLabels = selection.selectAll('g.edgeLabel');\n\n  svgEdgeLabels.each(function (e) {\n    var root = d3.select(this);\n    root.select('.label').remove();\n    var edge = g.edge(e);\n    var label = addLabel(root, g.edge(e), 0).classed('label', true);\n    var bbox = label.node().getBBox();\n\n    if (edge.labelId) {\n      label.attr('id', edge.labelId);\n    }\n    if (!_.has(edge, 'width')) {\n      edge.width = bbox.width;\n    }\n    if (!_.has(edge, 'height')) {\n      edge.height = bbox.height;\n    }\n  });\n\n  var exitSelection;\n\n  if (svgEdgeLabels.exit) {\n    exitSelection = svgEdgeLabels.exit();\n  } else {\n    exitSelection = svgEdgeLabels.selectAll(null); // empty selection\n  }\n\n  util.applyTransition(exitSelection, g).style('opacity', 0).remove();\n\n  return svgEdgeLabels;\n};\n\nfunction setCreateEdgeLabels(value) {\n  createEdgeLabels = value;\n}\n"],"names":["createEdgeLabels","selection","g","exitSelection","svgEdgeLabels","selectAll","data","edges","e","util.edgeToId","classed","exit","remove","enter","append","style","each","root","d3.select","this","select","edge","label","addLabel","bbox","node","getBBox","labelId","attr","_.has","width","height","util.applyTransition","setCreateEdgeLabels","value"],"mappings":"sSAOG,IAACA,EAAmB,SAAUC,EAAWC,GAC1C,IA8BIC,EA9BAC,EAAgBH,EACjBI,UAAU,eACVC,KAAKJ,EAAEK,SAAS,SAAUC,GACzB,OAAOC,EAAcD,EAC3B,IACKE,QAAQ,UAAU,GAmCrB,OAjCAN,EAAcO,OAAOC,SACrBR,EAAcS,QAAQC,OAAO,KAAKJ,QAAQ,aAAa,GAAMK,MAAM,UAAW,IAE9EX,EAAgBH,EAAUI,UAAU,gBAEtBW,MAAK,SAAUR,GAC3B,IAAIS,EAAOC,EAAUC,MACrBF,EAAKG,OAAO,UAAUR,SACtB,IAAIS,EAAOnB,EAAEmB,KAAKb,GACdc,EAAQC,EAASN,EAAMf,EAAEmB,KAAKb,GAAI,GAAGE,QAAQ,SAAS,GACtDc,EAAOF,EAAMG,OAAOC,UAEpBL,EAAKM,SACPL,EAAMM,KAAK,KAAMP,EAAKM,SAEnBE,EAAMR,EAAM,WACfA,EAAKS,MAAQN,EAAKM,OAEfD,EAAMR,EAAM,YACfA,EAAKU,OAASP,EAAKO,OAEzB,IAKI5B,EADEC,EAAcO,KACAP,EAAcO,OAEdP,EAAcC,UAAU,MAG1C2B,EAAqB7B,EAAeD,GAAGa,MAAM,UAAW,GAAGH,SAEpDR,CACT,EAEA,SAAS6B,EAAoBC,GAC3BlC,EAAmBkC,CACrB"}