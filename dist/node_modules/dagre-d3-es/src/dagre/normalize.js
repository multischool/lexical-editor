import{addDummyNode as e}from"./util.js";import d from"../../../lodash-es/forEach.js";function h(h){h.graph().dummyChains=[],d(h.edges(),(function(d){!function(d,h){var t,i,o,g=h.v,n=d.node(g).rank,a=h.w,r=d.node(a).rank,s=h.name,m=d.edge(h),u=m.labelRank;if(r===n+1)return;for(d.removeEdge(h),o=0,++n;n<r;++o,++n)m.points=[],t=e(d,"edge",i={width:0,height:0,edgeLabel:m,edgeObj:h,rank:n},"_d"),n===u&&(i.width=m.width,i.height=m.height,i.dummy="edge-label",i.labelpos=m.labelpos),d.setEdge(g,t,{weight:m.weight},s),0===o&&d.graph().dummyChains.push(t),g=t;d.setEdge(g,a,{weight:m.weight},s)}(h,d)}))}function t(e){d(e.graph().dummyChains,(function(d){var h,t=e.node(d),i=t.edgeLabel;for(e.setEdge(t.edgeObj,i);t.dummy;)h=e.successors(d)[0],e.removeNode(d),i.points.push({x:t.x,y:t.y}),"edge-label"===t.dummy&&(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height),d=h,t=e.node(d)}))}export{h as run,t as undo};
//# sourceMappingURL=normalize.js.map
