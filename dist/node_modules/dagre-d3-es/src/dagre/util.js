import{Graph as n}from"../graphlib/graph.js";import r from"../../../lodash-es/min.js";import e from"../../../lodash-es/max.js";import o from"../../../lodash-es/now.js";import t from"../../../lodash-es/forEach.js";import i from"../../../lodash-es/map.js";import s from"../../../lodash-es/range.js";import a from"../../../lodash-es/isUndefined.js";import d from"../../../lodash-es/has.js";import u from"../../../lodash-es/uniqueId.js";function h(n,r,e,o){var t;do{t=u(o)}while(n.hasNode(t));return e.dummy=r,n.setNode(t,e),t}function f(r){var e=(new n).setGraph(r.graph());return t(r.nodes(),(function(n){e.setNode(n,r.node(n))})),t(r.edges(),(function(n){var o=e.edge(n.v,n.w)||{weight:0,minlen:1},t=r.edge(n);e.setEdge(n.v,n.w,{weight:o.weight+t.weight,minlen:Math.max(o.minlen,t.minlen)})})),e}function m(r){var e=new n({multigraph:r.isMultigraph()}).setGraph(r.graph());return t(r.nodes(),(function(n){r.children(n).length||e.setNode(n,r.node(n))})),t(r.edges(),(function(n){e.setEdge(n,r.edge(n))})),e}function c(n,r){var e,o,t=n.x,i=n.y,s=r.x-t,a=r.y-i,d=n.width/2,u=n.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*d>Math.abs(s)*u?(a<0&&(u=-u),e=u*s/a,o=u):(s<0&&(d=-d),e=d,o=d*a/s),{x:t+e,y:i+o}}function l(n){var r=i(s(w(n)+1),(function(){return[]}));return t(n.nodes(),(function(e){var o=n.node(e),t=o.rank;a(t)||(r[t][o.order]=e)})),r}function g(n){var e=r(i(n.nodes(),(function(r){return n.node(r).rank})));t(n.nodes(),(function(r){var o=n.node(r);d(o,"rank")&&(o.rank-=e)}))}function p(n){var e=r(i(n.nodes(),(function(r){return n.node(r).rank}))),o=[];t(n.nodes(),(function(r){var t=n.node(r).rank-e;o[t]||(o[t]=[]),o[t].push(r)}));var s=0,d=n.graph().nodeRankFactor;t(o,(function(r,e){a(r)&&e%d!=0?--s:s&&t(r,(function(r){n.node(r).rank+=s}))}))}function v(n,r,e,o){var t={width:0,height:0};return arguments.length>=4&&(t.rank=e,t.order=o),h(n,"border",t,r)}function w(n){return e(i(n.nodes(),(function(r){var e=n.node(r).rank;if(!a(e))return e})))}function j(n,r){var e={lhs:[],rhs:[]};return t(n,(function(n){r(n)?e.lhs.push(n):e.rhs.push(n)})),e}function k(n,r){var e=o();try{return r()}finally{console.log(n+" time: "+(o()-e)+"ms")}}function x(n,r){return r()}export{v as addBorderNode,h as addDummyNode,m as asNonCompoundGraph,l as buildLayerMatrix,c as intersectRect,w as maxRank,g as normalizeRanks,x as notime,j as partition,p as removeEmptyRanks,f as simplify,k as time};
//# sourceMappingURL=util.js.map
