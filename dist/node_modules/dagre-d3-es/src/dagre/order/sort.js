import{partition as r}from"../util.js";import t from"../../../../lodash-es/sortBy.js";import e from"../../../../lodash-es/forEach.js";import o from"../../../../lodash-es/flatten.js";import s from"../../../../lodash-es/last.js";import n from"../../../../lodash-es/has.js";function i(s,i){var h,f=r(s,(function(r){return n(r,"barycenter")})),c=f.lhs,u=t(f.rhs,(function(r){return-r.i})),m=[],l=0,p=0,y=0;c.sort((h=!!i,function(r,t){return r.barycenter<t.barycenter?-1:r.barycenter>t.barycenter?1:h?t.i-r.i:r.i-t.i})),y=a(m,u,y),e(c,(function(r){y+=r.vs.length,m.push(r.vs),l+=r.barycenter*r.weight,p+=r.weight,y=a(m,u,y)}));var b={vs:o(m)};return p&&(b.barycenter=l/p,b.weight=p),b}function a(r,t,e){for(var o;t.length&&(o=s(t)).i<=e;)t.pop(),r.push(o.vs),e++;return e}export{i as sort};
//# sourceMappingURL=sort.js.map
