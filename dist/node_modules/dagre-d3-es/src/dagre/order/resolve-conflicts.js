import e from"../../../../lodash-es/forEach.js";import r from"../../../../lodash-es/isUndefined.js";import n from"../../../../lodash-es/filter.js";import t from"../../../../lodash-es/map.js";import i from"../../../../lodash-es/pick.js";function o(o,c){var s={};return e(o,(function(e,n){var t=s[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:n};r(e.barycenter)||(t.barycenter=e.barycenter,t.weight=e.weight)})),e(c.edges(),(function(e){var n=s[e.v],t=s[e.w];r(n)||r(t)||(t.indegree++,n.out.push(s[e.w]))})),function(o){var c=[];function s(e){return function(n){n.merged||(r(n.barycenter)||r(e.barycenter)||n.barycenter>=e.barycenter)&&function(e,r){var n=0,t=0;e.weight&&(n+=e.barycenter*e.weight,t+=e.weight);r.weight&&(n+=r.barycenter*r.weight,t+=r.weight);e.vs=r.vs.concat(e.vs),e.barycenter=n/t,e.weight=t,e.i=Math.min(r.i,e.i),r.merged=!0}(e,n)}}function a(e){return function(r){r.in.push(e),0==--r.indegree&&o.push(r)}}for(;o.length;){var u=o.pop();c.push(u),e(u.in.reverse(),s(u)),e(u.out,a(u))}return t(n(c,(function(e){return!e.merged})),(function(e){return i(e,["vs","i","barycenter","weight"])}))}(n(s,(function(e){return!e.indegree})))}export{o as resolveConflicts};
//# sourceMappingURL=resolve-conflicts.js.map
