import{Graph as e}from"../graphlib/graph.js";import{List as o}from"./data/list.js";import n from"../../../lodash-es/flatten.js";import r from"../../../lodash-es/map.js";import t from"../../../lodash-es/forEach.js";import u from"../../../lodash-es/range.js";import a from"../../../lodash-es/constant.js";var d=a(1);function i(a,i){if(a.nodeCount()<=1)return[];var v=function(n,r){var a=new e,d=0,i=0;t(n.nodes(),(function(e){a.setNode(e,{v:e,in:0,out:0})})),t(n.edges(),(function(e){var o=a.edge(e.v,e.w)||0,n=r(e),t=o+n;a.setEdge(e.v,e.w,t),i=Math.max(i,a.node(e.v).out+=n),d=Math.max(d,a.node(e.w).in+=n)}));var s=u(i+d+3).map((function(){return new o})),v=d+1;return t(a.nodes(),(function(e){f(s,v,a.node(e))})),{graph:a,buckets:s,zeroIdx:v}}(a,i||d),m=function(e,o,n){var r,t=[],u=o[o.length-1],a=o[0];for(;e.nodeCount();){for(;r=a.dequeue();)s(e,o,n,r);for(;r=u.dequeue();)s(e,o,n,r);if(e.nodeCount())for(var d=o.length-2;d>0;--d)if(r=o[d].dequeue()){t=t.concat(s(e,o,n,r,!0));break}}return t}(v.graph,v.buckets,v.zeroIdx);return n(r(m,(function(e){return a.outEdges(e.v,e.w)})))}function s(e,o,n,r,u){var a=u?[]:void 0;return t(e.inEdges(r.v),(function(r){var t=e.edge(r),d=e.node(r.v);u&&a.push({v:r.v,w:r.w}),d.out-=t,f(o,n,d)})),t(e.outEdges(r.v),(function(r){var t=e.edge(r),u=r.w,a=e.node(u);a.in-=t,f(o,n,a)})),e.removeNode(r.v),a}function f(e,o,n){n.out?n.in?e[n.out-n.in+o].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}export{i as greedyFAS};
//# sourceMappingURL=greedy-fas.js.map
