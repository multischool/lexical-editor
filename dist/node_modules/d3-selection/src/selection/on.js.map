{"version":3,"file":"on.js","sources":["../../../../../node_modules/d3-selection/src/selection/on.js"],"sourcesContent":["function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n"],"names":["onRemove","typename","on","this","__on","o","j","i","m","length","type","name","removeEventListener","listener","options","onAdd","value","event","call","__data__","contextListener","addEventListener","push","selection_on","t","typenames","trim","split","map","indexOf","slice","parseTypenames","n","arguments","each","node"],"mappings":"AAcA,SAASA,EAASC,GAChB,OAAO,WACL,IAAIC,EAAKC,KAAKC,KACd,GAAKF,EAAL,CACA,IAAK,IAAkCG,EAA9BC,EAAI,EAAGC,GAAK,EAAGC,EAAIN,EAAGO,OAAWH,EAAIE,IAAKF,EAC7CD,EAAIH,EAAGI,GAAML,EAASS,MAAQL,EAAEK,OAAST,EAASS,MAASL,EAAEM,OAASV,EAASU,KAGjFT,IAAKK,GAAKF,EAFVF,KAAKS,oBAAoBP,EAAEK,KAAML,EAAEQ,SAAUR,EAAES,WAK7CP,EAAGL,EAAGO,OAASF,SACTJ,KAAKC,IATD,CAUpB,CACA,CAEA,SAASW,EAAMd,EAAUe,EAAOF,GAC9B,OAAO,WACL,IAAoBT,EAAhBH,EAAKC,KAAKC,KAASS,EAhC3B,SAAyBA,GACvB,OAAO,SAASI,GACdJ,EAASK,KAAKf,KAAMc,EAAOd,KAAKgB,SACpC,CACA,CA4BsCC,CAAgBJ,GAClD,GAAId,EAAI,IAAK,IAAII,EAAI,EAAGE,EAAIN,EAAGO,OAAQH,EAAIE,IAAKF,EAC9C,IAAKD,EAAIH,EAAGI,IAAII,OAAST,EAASS,MAAQL,EAAEM,OAASV,EAASU,KAI5D,OAHAR,KAAKS,oBAAoBP,EAAEK,KAAML,EAAEQ,SAAUR,EAAES,SAC/CX,KAAKkB,iBAAiBhB,EAAEK,KAAML,EAAEQ,SAAWA,EAAUR,EAAES,QAAUA,QACjET,EAAEW,MAAQA,GAIdb,KAAKkB,iBAAiBpB,EAASS,KAAMG,EAAUC,GAC/CT,EAAI,CAACK,KAAMT,EAASS,KAAMC,KAAMV,EAASU,KAAMK,MAAOA,EAAOH,SAAUA,EAAUC,QAASA,GACrFZ,EACAA,EAAGoB,KAAKjB,GADJF,KAAKC,KAAO,CAACC,EAE1B,CACA,CAEe,SAAAkB,EAAStB,EAAUe,EAAOF,GACvC,IAA+CP,EAAyBiB,EAApEC,EA3CN,SAAwBA,GACtB,OAAOA,EAAUC,OAAOC,MAAM,SAASC,KAAI,SAASJ,GAClD,IAAIb,EAAO,GAAIJ,EAAIiB,EAAEK,QAAQ,KAE7B,OADItB,GAAK,IAAGI,EAAOa,EAAEM,MAAMvB,EAAI,GAAIiB,EAAIA,EAAEM,MAAM,EAAGvB,IAC3C,CAACG,KAAMc,EAAGb,KAAMA,EAC3B,GACA,CAqCkBoB,CAAe9B,EAAW,IAAQ+B,EAAIP,EAAUhB,OAEhE,KAAIwB,UAAUxB,OAAS,GAAvB,CAaA,IADAP,EAAKc,EAAQD,EAAQf,EAChBO,EAAI,EAAGA,EAAIyB,IAAKzB,EAAGJ,KAAK+B,KAAKhC,EAAGuB,EAAUlB,GAAIS,EAAOF,IAC1D,OAAOX,IAJN,CATC,IAAID,EAAKC,KAAKgC,OAAO/B,KACrB,GAAIF,EAAI,IAAK,IAA0BG,EAAtBC,EAAI,EAAGE,EAAIN,EAAGO,OAAWH,EAAIE,IAAKF,EACjD,IAAKC,EAAI,EAAGF,EAAIH,EAAGI,GAAIC,EAAIyB,IAAKzB,EAC9B,IAAKiB,EAAIC,EAAUlB,IAAIG,OAASL,EAAEK,MAAQc,EAAEb,OAASN,EAAEM,KACrD,OAAON,EAAEW,KAUnB"}