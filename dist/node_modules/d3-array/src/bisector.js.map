{"version":3,"file":"bisector.js","sources":["../../../../node_modules/d3-array/src/bisector.js"],"sourcesContent":["import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We can’t do this\n  // for a comparator (except for specific, known comparators) because we can’t\n  // tell if the comparator is symmetric, and an asymmetric comparator can’t be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n"],"names":["bisector","f","compare1","compare2","delta","left","a","x","lo","hi","length","mid","ascending","d","descending","zero","center","i","right"],"mappings":"6DAGe,SAASA,EAASC,GAC/B,IAAIC,EAAUC,EAAUC,EAiBxB,SAASC,EAAKC,EAAGC,EAAGC,EAAK,EAAGC,EAAKH,EAAEI,QACjC,GAAIF,EAAKC,EAAI,CACX,GAAuB,IAAnBP,EAASK,EAAGA,GAAU,OAAOE,EACjC,EAAG,CACD,MAAME,EAAOH,EAAKC,IAAQ,EACtBN,EAASG,EAAEK,GAAMJ,GAAK,EAAGC,EAAKG,EAAM,EACnCF,EAAKE,CAClB,OAAeH,EAAKC,EACf,CACD,OAAOD,CACR,CAmBD,OAvCiB,IAAbP,EAAES,QACJR,EAAWU,EACXT,EAAW,CAACU,EAAGN,IAAMK,EAAUX,EAAEY,GAAIN,GACrCH,EAAQ,CAACS,EAAGN,IAAMN,EAAEY,GAAKN,IAEzBL,EAAWD,IAAMW,GAAaX,IAAMa,EAAab,EAAIc,EACrDZ,EAAWF,EACXG,EAAQH,GAgCH,CAACI,OAAMW,OALd,SAAgBV,EAAGC,EAAGC,EAAK,EAAGC,EAAKH,EAAEI,QACnC,MAAMO,EAAIZ,EAAKC,EAAGC,EAAGC,EAAIC,EAAK,GAC9B,OAAOQ,EAAIT,GAAMJ,EAAME,EAAEW,EAAI,GAAIV,IAAMH,EAAME,EAAEW,GAAIV,GAAKU,EAAI,EAAIA,CACjE,EAEqBC,MAjBtB,SAAeZ,EAAGC,EAAGC,EAAK,EAAGC,EAAKH,EAAEI,QAClC,GAAIF,EAAKC,EAAI,CACX,GAAuB,IAAnBP,EAASK,EAAGA,GAAU,OAAOE,EACjC,EAAG,CACD,MAAME,EAAOH,EAAKC,IAAQ,EACtBN,EAASG,EAAEK,GAAMJ,IAAM,EAAGC,EAAKG,EAAM,EACpCF,EAAKE,CAClB,OAAeH,EAAKC,EACf,CACD,OAAOD,CACR,EAQH,CAEA,SAASO,IACP,OAAO,CACT"}