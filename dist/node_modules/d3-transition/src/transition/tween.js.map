{"version":3,"file":"tween.js","sources":["../../../../../node_modules/d3-transition/src/transition/tween.js"],"sourcesContent":["import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n"],"names":["tweenRemove","id","name","tween0","tween1","schedule","set","this","tween","i","n","length","slice","splice","tweenFunction","value","Error","t","push","transition_tween","_id","arguments","get","node","each","tweenValue","transition","apply"],"mappings":"6CAEA,SAASA,EAAYC,EAAIC,GACvB,IAAIC,EAAQC,EACZ,OAAO,WACL,IAAIC,EAAWC,EAAIC,KAAMN,GACrBO,EAAQH,EAASG,MAKrB,GAAIA,IAAUL,EAEZ,IAAK,IAAIM,EAAI,EAAGC,GADhBN,EAASD,EAASK,GACSG,OAAQF,EAAIC,IAAKD,EAC1C,GAAIL,EAAOK,GAAGP,OAASA,EAAM,EAC3BE,EAASA,EAAOQ,SACTC,OAAOJ,EAAG,GACjB,KACD,CAILJ,EAASG,MAAQJ,CACrB,CACA,CAEA,SAASU,EAAcb,EAAIC,EAAMa,GAC/B,IAAIZ,EAAQC,EACZ,GAAqB,mBAAVW,EAAsB,MAAM,IAAIC,MAC3C,OAAO,WACL,IAAIX,EAAWC,EAAIC,KAAMN,GACrBO,EAAQH,EAASG,MAKrB,GAAIA,IAAUL,EAAQ,CACpBC,GAAUD,EAASK,GAAOI,QAC1B,IAAK,IAAIK,EAAI,CAACf,KAAMA,EAAMa,MAAOA,GAAQN,EAAI,EAAGC,EAAIN,EAAOO,OAAQF,EAAIC,IAAKD,EAC1E,GAAIL,EAAOK,GAAGP,OAASA,EAAM,CAC3BE,EAAOK,GAAKQ,EACZ,KACD,CAECR,IAAMC,GAAGN,EAAOc,KAAKD,EAC1B,CAEDZ,EAASG,MAAQJ,CACrB,CACA,CAEe,SAAAe,EAASjB,EAAMa,GAC5B,IAAId,EAAKM,KAAKa,IAId,GAFAlB,GAAQ,GAEJmB,UAAUV,OAAS,EAAG,CAExB,IADA,IACkCM,EAD9BT,EAAQc,EAAIf,KAAKgB,OAAQtB,GAAIO,MACxBC,EAAI,EAAGC,EAAIF,EAAMG,OAAWF,EAAIC,IAAKD,EAC5C,IAAKQ,EAAIT,EAAMC,IAAIP,OAASA,EAC1B,OAAOe,EAAEF,MAGb,OAAO,IACR,CAED,OAAOR,KAAKiB,MAAe,MAATT,EAAgBf,EAAcc,GAAeb,EAAIC,EAAMa,GAC3E,CAEO,SAASU,EAAWC,EAAYxB,EAAMa,GAC3C,IAAId,EAAKyB,EAAWN,IAOpB,OALAM,EAAWF,MAAK,WACd,IAAInB,EAAWC,EAAIC,KAAMN,IACxBI,EAASU,QAAUV,EAASU,MAAQ,CAAE,IAAGb,GAAQa,EAAMY,MAAMpB,KAAMc,UACxE,IAES,SAASE,GACd,OAAOD,EAAIC,EAAMtB,GAAIc,MAAMb,EAC/B,CACA"}