{"version":3,"file":"end.js","sources":["../../../../../node_modules/d3-transition/src/transition/end.js"],"sourcesContent":["import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and weâ€™re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n"],"names":["transition_end","on0","on1","that","this","id","_id","size","Promise","resolve","reject","cancel","value","end","each","schedule","set","on","copy","_","push","interrupt"],"mappings":"oCAEe,SAAAA,IACb,IAAIC,EAAKC,EAAKC,EAAOC,KAAMC,EAAKF,EAAKG,IAAKC,EAAOJ,EAAKI,OACtD,OAAO,IAAIC,SAAQ,SAASC,EAASC,GACnC,IAAIC,EAAS,CAACC,MAAOF,GACjBG,EAAM,CAACD,MAAO,WAA4B,KAATL,GAAYE,GAAU,GAE3DN,EAAKW,MAAK,WACR,IAAIC,EAAWC,EAAIZ,KAAMC,GACrBY,EAAKF,EAASE,GAKdA,IAAOhB,KACTC,GAAOD,EAAMgB,GAAIC,QACbC,EAAER,OAAOS,KAAKT,GAClBT,EAAIiB,EAAEE,UAAUD,KAAKT,GACrBT,EAAIiB,EAAEN,IAAIO,KAAKP,IAGjBE,EAASE,GAAKf,CACpB,IAGiB,IAATK,GAAYE,GACpB,GACA"}