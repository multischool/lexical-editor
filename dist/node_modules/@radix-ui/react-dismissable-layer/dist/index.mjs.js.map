{"version":3,"file":"index.mjs.js","sources":["../../../../../node_modules/@radix-ui/react-dismissable-layer/dist/index.mjs"],"sourcesContent":["\"use client\";\n\n// packages/react/dismissable-layer/src/dismissable-layer.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive, dispatchDiscreteCustomEvent } from \"@radix-ui/react-primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { jsx } from \"react/jsx-runtime\";\nvar DISMISSABLE_LAYER_NAME = \"DismissableLayer\";\nvar CONTEXT_UPDATE = \"dismissableLayer.update\";\nvar POINTER_DOWN_OUTSIDE = \"dismissableLayer.pointerDownOutside\";\nvar FOCUS_OUTSIDE = \"dismissableLayer.focusOutside\";\nvar originalBodyPointerEvents;\nvar DismissableLayerContext = React.createContext({\n  layers: /* @__PURE__ */ new Set(),\n  layersWithOutsidePointerEventsDisabled: /* @__PURE__ */ new Set(),\n  branches: /* @__PURE__ */ new Set()\n});\nvar DismissableLayer = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      disableOutsidePointerEvents = false,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      onFocusOutside,\n      onInteractOutside,\n      onDismiss,\n      ...layerProps\n    } = props;\n    const context = React.useContext(DismissableLayerContext);\n    const [node, setNode] = React.useState(null);\n    const ownerDocument = node?.ownerDocument ?? globalThis?.document;\n    const [, force] = React.useState({});\n    const composedRefs = useComposedRefs(forwardedRef, (node2) => setNode(node2));\n    const layers = Array.from(context.layers);\n    const [highestLayerWithOutsidePointerEventsDisabled] = [...context.layersWithOutsidePointerEventsDisabled].slice(-1);\n    const highestLayerWithOutsidePointerEventsDisabledIndex = layers.indexOf(highestLayerWithOutsidePointerEventsDisabled);\n    const index = node ? layers.indexOf(node) : -1;\n    const isBodyPointerEventsDisabled = context.layersWithOutsidePointerEventsDisabled.size > 0;\n    const isPointerEventsEnabled = index >= highestLayerWithOutsidePointerEventsDisabledIndex;\n    const pointerDownOutside = usePointerDownOutside((event) => {\n      const target = event.target;\n      const isPointerDownOnBranch = [...context.branches].some((branch) => branch.contains(target));\n      if (!isPointerEventsEnabled || isPointerDownOnBranch) return;\n      onPointerDownOutside?.(event);\n      onInteractOutside?.(event);\n      if (!event.defaultPrevented) onDismiss?.();\n    }, ownerDocument);\n    const focusOutside = useFocusOutside((event) => {\n      const target = event.target;\n      const isFocusInBranch = [...context.branches].some((branch) => branch.contains(target));\n      if (isFocusInBranch) return;\n      onFocusOutside?.(event);\n      onInteractOutside?.(event);\n      if (!event.defaultPrevented) onDismiss?.();\n    }, ownerDocument);\n    useEscapeKeydown((event) => {\n      const isHighestLayer = index === context.layers.size - 1;\n      if (!isHighestLayer) return;\n      onEscapeKeyDown?.(event);\n      if (!event.defaultPrevented && onDismiss) {\n        event.preventDefault();\n        onDismiss();\n      }\n    }, ownerDocument);\n    React.useEffect(() => {\n      if (!node) return;\n      if (disableOutsidePointerEvents) {\n        if (context.layersWithOutsidePointerEventsDisabled.size === 0) {\n          originalBodyPointerEvents = ownerDocument.body.style.pointerEvents;\n          ownerDocument.body.style.pointerEvents = \"none\";\n        }\n        context.layersWithOutsidePointerEventsDisabled.add(node);\n      }\n      context.layers.add(node);\n      dispatchUpdate();\n      return () => {\n        if (disableOutsidePointerEvents && context.layersWithOutsidePointerEventsDisabled.size === 1) {\n          ownerDocument.body.style.pointerEvents = originalBodyPointerEvents;\n        }\n      };\n    }, [node, ownerDocument, disableOutsidePointerEvents, context]);\n    React.useEffect(() => {\n      return () => {\n        if (!node) return;\n        context.layers.delete(node);\n        context.layersWithOutsidePointerEventsDisabled.delete(node);\n        dispatchUpdate();\n      };\n    }, [node, context]);\n    React.useEffect(() => {\n      const handleUpdate = () => force({});\n      document.addEventListener(CONTEXT_UPDATE, handleUpdate);\n      return () => document.removeEventListener(CONTEXT_UPDATE, handleUpdate);\n    }, []);\n    return /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        ...layerProps,\n        ref: composedRefs,\n        style: {\n          pointerEvents: isBodyPointerEventsDisabled ? isPointerEventsEnabled ? \"auto\" : \"none\" : void 0,\n          ...props.style\n        },\n        onFocusCapture: composeEventHandlers(props.onFocusCapture, focusOutside.onFocusCapture),\n        onBlurCapture: composeEventHandlers(props.onBlurCapture, focusOutside.onBlurCapture),\n        onPointerDownCapture: composeEventHandlers(\n          props.onPointerDownCapture,\n          pointerDownOutside.onPointerDownCapture\n        )\n      }\n    );\n  }\n);\nDismissableLayer.displayName = DISMISSABLE_LAYER_NAME;\nvar BRANCH_NAME = \"DismissableLayerBranch\";\nvar DismissableLayerBranch = React.forwardRef((props, forwardedRef) => {\n  const context = React.useContext(DismissableLayerContext);\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      context.branches.add(node);\n      return () => {\n        context.branches.delete(node);\n      };\n    }\n  }, [context.branches]);\n  return /* @__PURE__ */ jsx(Primitive.div, { ...props, ref: composedRefs });\n});\nDismissableLayerBranch.displayName = BRANCH_NAME;\nfunction usePointerDownOutside(onPointerDownOutside, ownerDocument = globalThis?.document) {\n  const handlePointerDownOutside = useCallbackRef(onPointerDownOutside);\n  const isPointerInsideReactTreeRef = React.useRef(false);\n  const handleClickRef = React.useRef(() => {\n  });\n  React.useEffect(() => {\n    const handlePointerDown = (event) => {\n      if (event.target && !isPointerInsideReactTreeRef.current) {\n        let handleAndDispatchPointerDownOutsideEvent2 = function() {\n          handleAndDispatchCustomEvent(\n            POINTER_DOWN_OUTSIDE,\n            handlePointerDownOutside,\n            eventDetail,\n            { discrete: true }\n          );\n        };\n        var handleAndDispatchPointerDownOutsideEvent = handleAndDispatchPointerDownOutsideEvent2;\n        const eventDetail = { originalEvent: event };\n        if (event.pointerType === \"touch\") {\n          ownerDocument.removeEventListener(\"click\", handleClickRef.current);\n          handleClickRef.current = handleAndDispatchPointerDownOutsideEvent2;\n          ownerDocument.addEventListener(\"click\", handleClickRef.current, { once: true });\n        } else {\n          handleAndDispatchPointerDownOutsideEvent2();\n        }\n      } else {\n        ownerDocument.removeEventListener(\"click\", handleClickRef.current);\n      }\n      isPointerInsideReactTreeRef.current = false;\n    };\n    const timerId = window.setTimeout(() => {\n      ownerDocument.addEventListener(\"pointerdown\", handlePointerDown);\n    }, 0);\n    return () => {\n      window.clearTimeout(timerId);\n      ownerDocument.removeEventListener(\"pointerdown\", handlePointerDown);\n      ownerDocument.removeEventListener(\"click\", handleClickRef.current);\n    };\n  }, [ownerDocument, handlePointerDownOutside]);\n  return {\n    // ensures we check React component tree (not just DOM tree)\n    onPointerDownCapture: () => isPointerInsideReactTreeRef.current = true\n  };\n}\nfunction useFocusOutside(onFocusOutside, ownerDocument = globalThis?.document) {\n  const handleFocusOutside = useCallbackRef(onFocusOutside);\n  const isFocusInsideReactTreeRef = React.useRef(false);\n  React.useEffect(() => {\n    const handleFocus = (event) => {\n      if (event.target && !isFocusInsideReactTreeRef.current) {\n        const eventDetail = { originalEvent: event };\n        handleAndDispatchCustomEvent(FOCUS_OUTSIDE, handleFocusOutside, eventDetail, {\n          discrete: false\n        });\n      }\n    };\n    ownerDocument.addEventListener(\"focusin\", handleFocus);\n    return () => ownerDocument.removeEventListener(\"focusin\", handleFocus);\n  }, [ownerDocument, handleFocusOutside]);\n  return {\n    onFocusCapture: () => isFocusInsideReactTreeRef.current = true,\n    onBlurCapture: () => isFocusInsideReactTreeRef.current = false\n  };\n}\nfunction dispatchUpdate() {\n  const event = new CustomEvent(CONTEXT_UPDATE);\n  document.dispatchEvent(event);\n}\nfunction handleAndDispatchCustomEvent(name, handler, detail, { discrete }) {\n  const target = detail.originalEvent.target;\n  const event = new CustomEvent(name, { bubbles: false, cancelable: true, detail });\n  if (handler) target.addEventListener(name, handler, { once: true });\n  if (discrete) {\n    dispatchDiscreteCustomEvent(target, event);\n  } else {\n    target.dispatchEvent(event);\n  }\n}\nvar Root = DismissableLayer;\nvar Branch = DismissableLayerBranch;\nexport {\n  Branch,\n  DismissableLayer,\n  DismissableLayerBranch,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["originalBodyPointerEvents","CONTEXT_UPDATE","POINTER_DOWN_OUTSIDE","FOCUS_OUTSIDE","DismissableLayerContext","React","createContext","layers","Set","layersWithOutsidePointerEventsDisabled","branches","DismissableLayer","forwardRef","props","forwardedRef","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","layerProps","context","useContext","node","setNode","useState","ownerDocument","globalThis","document","force","composedRefs","useComposedRefs","node2","Array","from","highestLayerWithOutsidePointerEventsDisabled","slice","highestLayerWithOutsidePointerEventsDisabledIndex","indexOf","index","isBodyPointerEventsDisabled","size","isPointerEventsEnabled","pointerDownOutside","handlePointerDownOutside","useCallbackRef","isPointerInsideReactTreeRef","useRef","handleClickRef","useEffect","handlePointerDown","event","target","current","handleAndDispatchPointerDownOutsideEvent2","handleAndDispatchCustomEvent","eventDetail","discrete","originalEvent","pointerType","removeEventListener","addEventListener","once","timerId","window","setTimeout","clearTimeout","onPointerDownCapture","usePointerDownOutside","isPointerDownOnBranch","some","branch","contains","defaultPrevented","focusOutside","handleFocusOutside","isFocusInsideReactTreeRef","handleFocus","onFocusCapture","onBlurCapture","useFocusOutside","useEscapeKeydown","preventDefault","body","style","pointerEvents","add","dispatchUpdate","delete","handleUpdate","jsx","exports","Primitive","div","ref","composeEventHandlers","displayName","DismissableLayerBranch","CustomEvent","dispatchEvent","name","handler","detail","bubbles","cancelable","dispatchDiscreteCustomEvent"],"mappings":"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"}