import*as e from"react";import{composeEventHandlers as n}from"../../primitive/dist/index.mjs.js";import{createCollection as t}from"@radix-ui/react-collection";import{useComposedRefs as r,composeRefs as o}from"../../react-compose-refs/dist/index.mjs.js";import{createContextScope as s}from"../../react-context/dist/index.mjs.js";import{useDirection as c}from"../../react-direction/dist/index.mjs.js";import{DismissableLayer as i}from"../../react-dismissable-layer/dist/index.mjs.js";import{useFocusGuards as a}from"../../react-focus-guards/dist/index.mjs.js";import{FocusScope as u}from"../../react-focus-scope/dist/index.mjs.js";import{useId as d}from"../../react-id/dist/index.mjs.js";import{createPopperScope as l,Anchor as p,Content as f,Arrow as m,Root as x}from"../../react-popper/dist/index.mjs.js";import{Portal as h}from"../../react-portal/dist/index.mjs.js";import{Presence as v}from"../../react-presence/dist/index.mjs.js";import{Primitive as g,dispatchDiscreteCustomEvent as j}from"../../react-primitive/dist/index.mjs.js";import{createRovingFocusGroupScope as _,Root as w,Item as M}from"../../react-roving-focus/dist/index.mjs.js";import{Slot as y}from"../../react-slot/dist/index.mjs.js";import{useCallbackRef as C}from"../../react-use-callback-ref/dist/index.mjs.js";import{hideOthers as b}from"../../../aria-hidden/dist/es2015/index.js";import R from"../../../react-remove-scroll/dist/es2015/Combination.js";import"../../../react/jsx-runtime.js";import{j as k}from"../../../../_virtual/jsx-runtime.js";var P=["Enter"," "],D=["ArrowUp","PageDown","End"],E=["ArrowDown","PageUp","Home",...D],O={ltr:[...P,"ArrowRight"],rtl:[...P,"ArrowLeft"]},I={ltr:["ArrowLeft"],rtl:["ArrowRight"]},T="Menu",[S,F,L]=t(T),[K,A]=s(T,[L,l,_]),N=l(),G=_(),[V,U]=K(T),[B,X]=K(T),Y=n=>{const{__scopeMenu:t,open:r=!1,children:o,dir:s,onOpenChange:i,modal:a=!0}=n,u=N(t),[d,l]=e.useState(null),p=e.useRef(!1),f=C(i),m=c(s);return e.useEffect((()=>{const e=()=>{p.current=!0,document.addEventListener("pointerdown",n,{capture:!0,once:!0}),document.addEventListener("pointermove",n,{capture:!0,once:!0})},n=()=>p.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",n,{capture:!0}),document.removeEventListener("pointermove",n,{capture:!0})}}),[]),k.exports.jsx(x,{...u,children:k.exports.jsx(V,{scope:t,open:r,onOpenChange:f,content:d,onContentChange:l,children:k.exports.jsx(B,{scope:t,onClose:e.useCallback((()=>f(!1)),[f]),isUsingKeyboardRef:p,dir:m,modal:a,children:o})})})};Y.displayName=T;var z=e.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e,o=N(t);return k.exports.jsx(p,{...o,...r,ref:n})}));z.displayName="MenuAnchor";var H="MenuPortal",[W,Z]=K(H,{forceMount:void 0}),q=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:o}=e,s=U(H,n);return k.exports.jsx(W,{scope:n,forceMount:t,children:k.exports.jsx(v,{present:t||s.open,children:k.exports.jsx(h,{asChild:!0,container:o,children:r})})})};q.displayName=H;var J="MenuContent",[Q,$]=K(J),ee=e.forwardRef(((e,n)=>{const t=Z(J,e.__scopeMenu),{forceMount:r=t.forceMount,...o}=e,s=U(J,e.__scopeMenu),c=X(J,e.__scopeMenu);return k.exports.jsx(S.Provider,{scope:e.__scopeMenu,children:k.exports.jsx(v,{present:r||s.open,children:k.exports.jsx(S.Slot,{scope:e.__scopeMenu,children:c.modal?k.exports.jsx(ne,{...o,ref:n}):k.exports.jsx(te,{...o,ref:n})})})})})),ne=e.forwardRef(((t,o)=>{const s=U(J,t.__scopeMenu),c=e.useRef(null),i=r(o,c);return e.useEffect((()=>{const e=c.current;if(e)return b(e)}),[]),k.exports.jsx(re,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:n(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})})),te=e.forwardRef(((e,n)=>{const t=U(J,e.__scopeMenu);return k.exports.jsx(re,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})})),re=e.forwardRef(((t,o)=>{const{__scopeMenu:s,loop:c=!1,trapFocus:d,onOpenAutoFocus:l,onCloseAutoFocus:p,disableOutsidePointerEvents:m,onEntryFocus:x,onEscapeKeyDown:h,onPointerDownOutside:v,onFocusOutside:g,onInteractOutside:j,onDismiss:_,disableOutsideScroll:M,...C}=t,b=U(J,s),P=X(J,s),O=N(s),I=G(s),T=F(s),[S,L]=e.useState(null),K=e.useRef(null),A=r(o,K,b.onContentChange),V=e.useRef(0),B=e.useRef(""),Y=e.useRef(0),z=e.useRef(null),H=e.useRef("right"),W=e.useRef(0),Z=M?R:e.Fragment,q=M?{as:y,allowPinchZoom:!0}:void 0,$=e=>{const n=B.current+e,t=T().filter((e=>!e.disabled)),r=document.activeElement,o=t.find((e=>e.ref.current===r))?.textValue,s=function(e,n,t){const r=n.length>1&&Array.from(n).every((e=>e===n[0])),o=r?n[0]:n,s=t?e.indexOf(t):-1;let c=(i=e,a=Math.max(s,0),i.map(((e,n)=>i[(a+n)%i.length])));var i,a;1===o.length&&(c=c.filter((e=>e!==t)));const u=c.find((e=>e.toLowerCase().startsWith(o.toLowerCase())));return u!==t?u:void 0}(t.map((e=>e.textValue)),n,o),c=t.find((e=>e.textValue===s))?.ref.current;!function e(n){B.current=n,window.clearTimeout(V.current),""!==n&&(V.current=window.setTimeout((()=>e("")),1e3))}(n),c&&setTimeout((()=>c.focus()))};e.useEffect((()=>()=>window.clearTimeout(V.current)),[]),a();const ee=e.useCallback((e=>H.current===z.current?.side&&function(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return function(e,n){const{x:t,y:r}=e;let o=!1;for(let e=0,s=n.length-1;e<n.length;s=e++){const c=n[e].x,i=n[e].y,a=n[s].x,u=n[s].y;i>r!=u>r&&t<(a-c)*(r-i)/(u-i)+c&&(o=!o)}return o}(t,n)}(e,z.current?.area)),[]);return k.exports.jsx(Q,{scope:s,searchRef:B,onItemEnter:e.useCallback((e=>{ee(e)&&e.preventDefault()}),[ee]),onItemLeave:e.useCallback((e=>{ee(e)||(K.current?.focus(),L(null))}),[ee]),onTriggerLeave:e.useCallback((e=>{ee(e)&&e.preventDefault()}),[ee]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:e.useCallback((e=>{z.current=e}),[]),children:k.exports.jsx(Z,{...q,children:k.exports.jsx(u,{asChild:!0,trapped:d,onMountAutoFocus:n(l,(e=>{e.preventDefault(),K.current?.focus({preventScroll:!0})})),onUnmountAutoFocus:p,children:k.exports.jsx(i,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:h,onPointerDownOutside:v,onFocusOutside:g,onInteractOutside:j,onDismiss:_,children:k.exports.jsx(w,{asChild:!0,...I,dir:P.dir,orientation:"vertical",loop:c,currentTabStopId:S,onCurrentTabStopIdChange:L,onEntryFocus:n(x,(e=>{P.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:k.exports.jsx(f,{role:"menu","aria-orientation":"vertical","data-state":Oe(b.open),"data-radix-menu-content":"",dir:P.dir,...O,...C,ref:A,style:{outline:"none",...C.style},onKeyDown:n(C.onKeyDown,(e=>{const n=e.target.closest("[data-radix-menu-content]")===e.currentTarget,t=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;n&&("Tab"===e.key&&e.preventDefault(),!t&&r&&$(e.key));const o=K.current;if(e.target!==o)return;if(!E.includes(e.key))return;e.preventDefault();const s=T().filter((e=>!e.disabled)).map((e=>e.ref.current));D.includes(e.key)&&s.reverse(),function(e){const n=document.activeElement;for(const t of e){if(t===n)return;if(t.focus(),document.activeElement!==n)return}}(s)})),onBlur:n(t.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(V.current),B.current="")})),onPointerMove:n(t.onPointerMove,Se((e=>{const n=e.target,t=W.current!==e.clientX;if(e.currentTarget.contains(n)&&t){const n=e.clientX>W.current?"right":"left";H.current=n,W.current=e.clientX}})))})})})})})})}));ee.displayName=J;var oe=e.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e;return k.exports.jsx(g.div,{role:"group",...r,ref:n})}));oe.displayName="MenuGroup";var se=e.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e;return k.exports.jsx(g.div,{...r,ref:n})}));se.displayName="MenuLabel";var ce="MenuItem",ie="menu.itemSelect",ae=e.forwardRef(((t,o)=>{const{disabled:s=!1,onSelect:c,...i}=t,a=e.useRef(null),u=X(ce,t.__scopeMenu),d=$(ce,t.__scopeMenu),l=r(o,a),p=e.useRef(!1);return k.exports.jsx(ue,{...i,ref:l,disabled:s,onClick:n(t.onClick,(()=>{const e=a.current;if(!s&&e){const n=new CustomEvent(ie,{bubbles:!0,cancelable:!0});e.addEventListener(ie,(e=>c?.(e)),{once:!0}),j(e,n),n.defaultPrevented?p.current=!1:u.onClose()}})),onPointerDown:e=>{t.onPointerDown?.(e),p.current=!0},onPointerUp:n(t.onPointerUp,(e=>{p.current||e.currentTarget?.click()})),onKeyDown:n(t.onKeyDown,(e=>{const n=""!==d.searchRef.current;s||n&&" "===e.key||P.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))})}));ae.displayName=ce;var ue=e.forwardRef(((t,o)=>{const{__scopeMenu:s,disabled:c=!1,textValue:i,...a}=t,u=$(ce,s),d=G(s),l=e.useRef(null),p=r(o,l),[f,m]=e.useState(!1),[x,h]=e.useState("");return e.useEffect((()=>{const e=l.current;e&&h((e.textContent??"").trim())}),[a.children]),k.exports.jsx(S.ItemSlot,{scope:s,disabled:c,textValue:i??x,children:k.exports.jsx(M,{asChild:!0,...d,focusable:!c,children:k.exports.jsx(g.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":c||void 0,"data-disabled":c?"":void 0,...a,ref:p,onPointerMove:n(t.onPointerMove,Se((e=>{if(c)u.onItemLeave(e);else if(u.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}}))),onPointerLeave:n(t.onPointerLeave,Se((e=>u.onItemLeave(e)))),onFocus:n(t.onFocus,(()=>m(!0))),onBlur:n(t.onBlur,(()=>m(!1)))})})})})),de=e.forwardRef(((e,t)=>{const{checked:r=!1,onCheckedChange:o,...s}=e;return k.exports.jsx(ge,{scope:e.__scopeMenu,checked:r,children:k.exports.jsx(ae,{role:"menuitemcheckbox","aria-checked":Ie(r)?"mixed":r,...s,ref:t,"data-state":Te(r),onSelect:n(s.onSelect,(()=>o?.(!!Ie(r)||!r)),{checkForDefaultPrevented:!1})})})}));de.displayName="MenuCheckboxItem";var le="MenuRadioGroup",[pe,fe]=K(le,{value:void 0,onValueChange:()=>{}}),me=e.forwardRef(((e,n)=>{const{value:t,onValueChange:r,...o}=e,s=C(r);return k.exports.jsx(pe,{scope:e.__scopeMenu,value:t,onValueChange:s,children:k.exports.jsx(oe,{...o,ref:n})})}));me.displayName=le;var xe="MenuRadioItem",he=e.forwardRef(((e,t)=>{const{value:r,...o}=e,s=fe(xe,e.__scopeMenu),c=r===s.value;return k.exports.jsx(ge,{scope:e.__scopeMenu,checked:c,children:k.exports.jsx(ae,{role:"menuitemradio","aria-checked":c,...o,ref:t,"data-state":Te(c),onSelect:n(o.onSelect,(()=>s.onValueChange?.(r)),{checkForDefaultPrevented:!1})})})}));he.displayName=xe;var ve="MenuItemIndicator",[ge,je]=K(ve,{checked:!1}),_e=e.forwardRef(((e,n)=>{const{__scopeMenu:t,forceMount:r,...o}=e,s=je(ve,t);return k.exports.jsx(v,{present:r||Ie(s.checked)||!0===s.checked,children:k.exports.jsx(g.span,{...o,ref:n,"data-state":Te(s.checked)})})}));_e.displayName=ve;var we=e.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e;return k.exports.jsx(g.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})}));we.displayName="MenuSeparator";var Me=e.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e,o=N(t);return k.exports.jsx(m,{...o,...r,ref:n})}));Me.displayName="MenuArrow";var ye="MenuSub",[Ce,be]=K(ye),Re=n=>{const{__scopeMenu:t,children:r,open:o=!1,onOpenChange:s}=n,c=U(ye,t),i=N(t),[a,u]=e.useState(null),[l,p]=e.useState(null),f=C(s);return e.useEffect((()=>(!1===c.open&&f(!1),()=>f(!1))),[c.open,f]),k.exports.jsx(x,{...i,children:k.exports.jsx(V,{scope:t,open:o,onOpenChange:f,content:l,onContentChange:p,children:k.exports.jsx(Ce,{scope:t,contentId:d(),triggerId:d(),trigger:a,onTriggerChange:u,children:r})})})};Re.displayName=ye;var ke="MenuSubTrigger",Pe=e.forwardRef(((t,r)=>{const s=U(ke,t.__scopeMenu),c=X(ke,t.__scopeMenu),i=be(ke,t.__scopeMenu),a=$(ke,t.__scopeMenu),u=e.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:l}=a,p={__scopeMenu:t.__scopeMenu},f=e.useCallback((()=>{u.current&&window.clearTimeout(u.current),u.current=null}),[]);return e.useEffect((()=>f),[f]),e.useEffect((()=>{const e=d.current;return()=>{window.clearTimeout(e),l(null)}}),[d,l]),k.exports.jsx(z,{asChild:!0,...p,children:k.exports.jsx(ue,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":Oe(s.open),...t,ref:o(r,i.onTriggerChange),onClick:e=>{t.onClick?.(e),t.disabled||e.defaultPrevented||(e.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:n(t.onPointerMove,Se((e=>{a.onItemEnter(e),e.defaultPrevented||t.disabled||s.open||u.current||(a.onPointerGraceIntentChange(null),u.current=window.setTimeout((()=>{s.onOpenChange(!0),f()}),100))}))),onPointerLeave:n(t.onPointerLeave,Se((e=>{f();const n=s.content?.getBoundingClientRect();if(n){const t=s.content?.dataset.side,r="right"===t,o=r?-5:5,c=n[r?"left":"right"],i=n[r?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:n.top},{x:i,y:n.top},{x:i,y:n.bottom},{x:c,y:n.bottom}],side:t}),window.clearTimeout(d.current),d.current=window.setTimeout((()=>a.onPointerGraceIntentChange(null)),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}}))),onKeyDown:n(t.onKeyDown,(e=>{const n=""!==a.searchRef.current;t.disabled||n&&" "===e.key||O[c.dir].includes(e.key)&&(s.onOpenChange(!0),s.content?.focus(),e.preventDefault())}))})})}));Pe.displayName=ke;var De="MenuSubContent",Ee=e.forwardRef(((t,o)=>{const s=Z(J,t.__scopeMenu),{forceMount:c=s.forceMount,...i}=t,a=U(J,t.__scopeMenu),u=X(J,t.__scopeMenu),d=be(De,t.__scopeMenu),l=e.useRef(null),p=r(o,l);return k.exports.jsx(S.Provider,{scope:t.__scopeMenu,children:k.exports.jsx(v,{present:c||a.open,children:k.exports.jsx(S.Slot,{scope:t.__scopeMenu,children:k.exports.jsx(re,{id:d.contentId,"aria-labelledby":d.triggerId,...i,ref:p,align:"start",side:"rtl"===u.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{u.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:n(t.onFocusOutside,(e=>{e.target!==d.trigger&&a.onOpenChange(!1)})),onEscapeKeyDown:n(t.onEscapeKeyDown,(e=>{u.onClose(),e.preventDefault()})),onKeyDown:n(t.onKeyDown,(e=>{const n=e.currentTarget.contains(e.target),t=I[u.dir].includes(e.key);n&&t&&(a.onOpenChange(!1),d.trigger?.focus(),e.preventDefault())}))})})})})}));function Oe(e){return e?"open":"closed"}function Ie(e){return"indeterminate"===e}function Te(e){return Ie(e)?"indeterminate":e?"checked":"unchecked"}function Se(e){return n=>"mouse"===n.pointerType?e(n):void 0}Ee.displayName=De;var Fe=Y,Le=z,Ke=q,Ae=ee,Ne=oe,Ge=se,Ve=ae,Ue=de,Be=me,Xe=he,Ye=_e,ze=we,He=Me,We=Re,Ze=Pe,qe=Ee;export{Le as Anchor,He as Arrow,Ue as CheckboxItem,Ae as Content,Ne as Group,Ve as Item,Ye as ItemIndicator,Ge as Label,Y as Menu,z as MenuAnchor,Me as MenuArrow,de as MenuCheckboxItem,ee as MenuContent,oe as MenuGroup,ae as MenuItem,_e as MenuItemIndicator,se as MenuLabel,q as MenuPortal,me as MenuRadioGroup,he as MenuRadioItem,we as MenuSeparator,Re as MenuSub,Ee as MenuSubContent,Pe as MenuSubTrigger,Ke as Portal,Be as RadioGroup,Xe as RadioItem,Fe as Root,ze as Separator,We as Sub,qe as SubContent,Ze as SubTrigger,A as createMenuScope};
//# sourceMappingURL=index.mjs.js.map
