import*as e from"react";import{composeEventHandlers as o}from"../../primitive/dist/index.mjs.js";import{useComposedRefs as r}from"../../react-compose-refs/dist/index.mjs.js";import{createContextScope as t}from"../../react-context/dist/index.mjs.js";import{DismissableLayer as s}from"../../react-dismissable-layer/dist/index.mjs.js";import{useFocusGuards as n}from"../../react-focus-guards/dist/index.mjs.js";import{FocusScope as i}from"../../react-focus-scope/dist/index.mjs.js";import{useId as a}from"../../react-id/dist/index.mjs.js";import{createPopperScope as p,Anchor as c,Content as d,Arrow as u,Root as l}from"../../react-popper/dist/index.mjs.js";import{Portal as f}from"../../react-portal/dist/index.mjs.js";import{Presence as m}from"../../react-presence/dist/index.mjs.js";import{Primitive as x}from"../../react-primitive/dist/index.mjs.js";import{Slot as v}from"../../react-slot/dist/index.mjs.js";import{useControllableState as j}from"../../react-use-controllable-state/dist/index.mjs.js";import{hideOthers as h}from"../../../aria-hidden/dist/es2015/index.js";import g from"../../../react-remove-scroll/dist/es2015/Combination.js";import"../../../react/jsx-runtime.js";import{j as P}from"../../../../_virtual/jsx-runtime.js";var C="Popover",[O,_]=t(C,[p]),w=p(),[R,b]=O(C),A=o=>{const{__scopePopover:r,children:t,open:s,defaultOpen:n,onOpenChange:i,modal:p=!1}=o,c=w(r),d=e.useRef(null),[u,f]=e.useState(!1),[m=!1,x]=j({prop:s,defaultProp:n,onChange:i});return P.exports.jsx(l,{...c,children:P.exports.jsx(R,{scope:r,contentId:a(),triggerRef:d,open:m,onOpenChange:x,onOpenToggle:e.useCallback((()=>x((e=>!e))),[x]),hasCustomAnchor:u,onCustomAnchorAdd:e.useCallback((()=>f(!0)),[]),onCustomAnchorRemove:e.useCallback((()=>f(!1)),[]),modal:p,children:t})})};A.displayName=C;var y="PopoverAnchor",F=e.forwardRef(((o,r)=>{const{__scopePopover:t,...s}=o,n=b(y,t),i=w(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:p}=n;return e.useEffect((()=>(a(),()=>p())),[a,p]),P.exports.jsx(c,{...i,...s,ref:r})}));F.displayName=y;var D="PopoverTrigger",E=e.forwardRef(((e,t)=>{const{__scopePopover:s,...n}=e,i=b(D,s),a=w(s),p=r(t,i.triggerRef),d=P.exports.jsx(x.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":G(i.open),...n,ref:p,onClick:o(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?d:P.exports.jsx(c,{asChild:!0,...a,children:d})}));E.displayName=D;var k="PopoverPortal",[I,N]=O(k,{forceMount:void 0}),M=e=>{const{__scopePopover:o,forceMount:r,children:t,container:s}=e,n=b(k,o);return P.exports.jsx(I,{scope:o,forceMount:r,children:P.exports.jsx(m,{present:r||n.open,children:P.exports.jsx(f,{asChild:!0,container:s,children:t})})})};M.displayName=k;var K="PopoverContent",T=e.forwardRef(((e,o)=>{const r=N(K,e.__scopePopover),{forceMount:t=r.forceMount,...s}=e,n=b(K,e.__scopePopover);return P.exports.jsx(m,{present:t||n.open,children:n.modal?P.exports.jsx(S,{...s,ref:o}):P.exports.jsx(U,{...s,ref:o})})}));T.displayName=K;var S=e.forwardRef(((t,s)=>{const n=b(K,t.__scopePopover),i=e.useRef(null),a=r(s,i),p=e.useRef(!1);return e.useEffect((()=>{const e=i.current;if(e)return h(e)}),[]),P.exports.jsx(g,{as:v,allowPinchZoom:!0,children:P.exports.jsx(Z,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:o(t.onCloseAutoFocus,(e=>{e.preventDefault(),p.current||n.triggerRef.current?.focus()})),onPointerDownOutside:o(t.onPointerDownOutside,(e=>{const o=e.detail.originalEvent,r=0===o.button&&!0===o.ctrlKey,t=2===o.button||r;p.current=t}),{checkForDefaultPrevented:!1}),onFocusOutside:o(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),U=e.forwardRef(((o,r)=>{const t=b(K,o.__scopePopover),s=e.useRef(!1),n=e.useRef(!1);return P.exports.jsx(Z,{...o,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{o.onCloseAutoFocus?.(e),e.defaultPrevented||(s.current||t.triggerRef.current?.focus(),e.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:e=>{o.onInteractOutside?.(e),e.defaultPrevented||(s.current=!0,"pointerdown"===e.detail.originalEvent.type&&(n.current=!0));const r=e.target,i=t.triggerRef.current?.contains(r);i&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&n.current&&e.preventDefault()}})})),Z=e.forwardRef(((e,o)=>{const{__scopePopover:r,trapFocus:t,onOpenAutoFocus:a,onCloseAutoFocus:p,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:m,...x}=e,v=b(K,r),j=w(r);return n(),P.exports.jsx(i,{asChild:!0,loop:!0,trapped:t,onMountAutoFocus:a,onUnmountAutoFocus:p,children:P.exports.jsx(s,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:m,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:f,onDismiss:()=>v.onOpenChange(!1),children:P.exports.jsx(d,{"data-state":G(v.open),role:"dialog",id:v.contentId,...j,...x,ref:o,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),q="PopoverClose",z=e.forwardRef(((e,r)=>{const{__scopePopover:t,...s}=e,n=b(q,t);return P.exports.jsx(x.button,{type:"button",...s,ref:r,onClick:o(e.onClick,(()=>n.onOpenChange(!1)))})}));z.displayName=q;var B=e.forwardRef(((e,o)=>{const{__scopePopover:r,...t}=e,s=w(r);return P.exports.jsx(u,{...s,...t,ref:o})}));function G(e){return e?"open":"closed"}B.displayName="PopoverArrow";var H=A,J=E,L=M,Q=T,V=B;export{V as Arrow,Q as Content,A as Popover,F as PopoverAnchor,B as PopoverArrow,z as PopoverClose,T as PopoverContent,M as PopoverPortal,E as PopoverTrigger,L as Portal,H as Root,J as Trigger,_ as createPopoverScope};
//# sourceMappingURL=index.mjs.js.map
