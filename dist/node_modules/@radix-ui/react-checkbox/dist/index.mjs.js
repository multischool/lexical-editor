import*as e from"react";import{useComposedRefs as t}from"../../react-compose-refs/dist/index.mjs.js";import{createContextScope as r}from"../../react-context/dist/index.mjs.js";import{composeEventHandlers as s}from"../../primitive/dist/index.mjs.js";import{useControllableState as o}from"../../react-use-controllable-state/dist/index.mjs.js";import{usePrevious as n}from"../../react-use-previous/dist/index.mjs.js";import{useSize as i}from"../../react-use-size/dist/index.mjs.js";import{Presence as a}from"../../react-presence/dist/index.mjs.js";import{Primitive as c}from"../../react-primitive/dist/index.mjs.js";import"../../../react/jsx-runtime.js";import{j as d}from"../../../../_virtual/jsx-runtime.js";var p="Checkbox",[u,m]=r(p),[l,f]=u(p),x=e.forwardRef(((r,n)=>{const{__scopeCheckbox:i,name:a,checked:p,defaultChecked:u,required:m,disabled:f,value:x="on",onCheckedChange:b,form:j,...y}=r,[C,E]=e.useState(null),w=t(n,(e=>E(e))),g=e.useRef(!1),R=!C||(j||!!C.closest("form")),[_=!1,D]=o({prop:p,defaultProp:u,onChange:b}),P=e.useRef(_);return e.useEffect((()=>{const e=C?.form;if(e){const t=()=>D(P.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[C,D]),d.exports.jsxs(l,{scope:i,state:_,disabled:f,children:[d.exports.jsx(c.button,{type:"button",role:"checkbox","aria-checked":k(_)?"mixed":_,"aria-required":m,"data-state":v(_),"data-disabled":f?"":void 0,disabled:f,value:x,...y,ref:w,onKeyDown:s(r.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:s(r.onClick,(e=>{D((e=>!!k(e)||!e)),R&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())}))}),R&&d.exports.jsx(h,{control:C,bubbles:!g.current,name:a,value:x,checked:_,required:m,disabled:f,form:j,style:{transform:"translateX(-100%)"},defaultChecked:!k(u)&&u})]})}));x.displayName=p;var b="CheckboxIndicator",j=e.forwardRef(((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...o}=e,n=f(b,r);return d.exports.jsx(a,{present:s||k(n.state)||!0===n.state,children:d.exports.jsx(c.span,{"data-state":v(n.state),"data-disabled":n.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})}));j.displayName=b;var h=t=>{const{control:r,checked:s,bubbles:o=!0,defaultChecked:a,...c}=t,p=e.useRef(null),u=n(s),m=i(r);e.useEffect((()=>{const e=p.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==s&&r){const t=new Event("click",{bubbles:o});e.indeterminate=k(s),r.call(e,!k(s)&&s),e.dispatchEvent(t)}}),[u,s,o]);const l=e.useRef(!k(s)&&s);return d.exports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??l.current,...c,tabIndex:-1,ref:p,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(e){return"indeterminate"===e}function v(e){return k(e)?"indeterminate":e?"checked":"unchecked"}var y=x,C=j;export{x as Checkbox,j as CheckboxIndicator,C as Indicator,y as Root,m as createCheckboxScope};
//# sourceMappingURL=index.mjs.js.map
