import*as e from"react";import{useFloating as t,offset as r,shift as o,limitShift as i,flip as a,size as n,arrow as s,hide as d}from"../../../@floating-ui/react-dom/dist/floating-ui.react-dom.mjs.js";import{Root as p}from"../../react-arrow/dist/index.mjs.js";import{useComposedRefs as l}from"../../react-compose-refs/dist/index.mjs.js";import{createContextScope as m}from"../../react-context/dist/index.mjs.js";import{Primitive as c}from"../../react-primitive/dist/index.mjs.js";import{useCallbackRef as f}from"../../react-use-callback-ref/dist/index.mjs.js";import{useLayoutEffect as x}from"../../react-use-layout-effect/dist/index.mjs.js";import{useSize as h}from"../../react-use-size/dist/index.mjs.js";import"../../../react/jsx-runtime.js";import{autoUpdate as g}from"../../../@floating-ui/dom/dist/floating-ui.dom.mjs.js";import{j as u}from"../../../../_virtual/jsx-runtime.js";var y="Popper",[w,j]=m(y),[v,b]=w(y),P=t=>{const{__scopePopper:r,children:o}=t,[i,a]=e.useState(null);return u.exports.jsx(v,{scope:r,anchor:i,onAnchorChange:a,children:o})};P.displayName=y;var A="PopperAnchor",S=e.forwardRef(((t,r)=>{const{__scopePopper:o,virtualRef:i,...a}=t,n=b(A,o),s=e.useRef(null),d=l(r,s);return e.useEffect((()=>{n.onAnchorChange(i?.current||s.current)})),i?null:u.exports.jsx(c.div,{...a,ref:d})}));S.displayName=A;var $="PopperContent",[_,O]=w($),C=e.forwardRef(((p,m)=>{const{__scopePopper:y,side:w="bottom",sideOffset:j=0,align:v="center",alignOffset:P=0,arrowPadding:A=0,avoidCollisions:S=!0,collisionBoundary:O=[],collisionPadding:C=0,sticky:H="partial",hideWhenDetached:R=!1,updatePositionStrategy:W="optimized",onPlaced:N,...X}=p,k=b($,y),[D,B]=e.useState(null),F=l(m,(e=>B(e))),[I,L]=e.useState(null),M=h(I),q=M?.width??0,G=M?.height??0,J=w+("center"!==v?"-"+v:""),K="number"==typeof C?C:{top:0,right:0,bottom:0,left:0,...C},Q=Array.isArray(O)?O:[O],T=Q.length>0,U={padding:K,boundary:Q.filter(Y),altBoundary:T},{refs:V,floatingStyles:Z,placement:ee,isPositioned:te,middlewareData:re}=t({strategy:"fixed",placement:J,whileElementsMounted:(...e)=>g(...e,{animationFrame:"always"===W}),elements:{reference:k.anchor},middleware:[r({mainAxis:j+G,alignmentAxis:P}),S&&o({mainAxis:!0,crossAxis:!1,limiter:"partial"===H?i():void 0,...U}),S&&a({...U}),n({...U,apply:({elements:e,rects:t,availableWidth:r,availableHeight:o})=>{const{width:i,height:a}=t.reference,n=e.floating.style;n.setProperty("--radix-popper-available-width",`${r}px`),n.setProperty("--radix-popper-available-height",`${o}px`),n.setProperty("--radix-popper-anchor-width",`${i}px`),n.setProperty("--radix-popper-anchor-height",`${a}px`)}}),I&&s({element:I,padding:A}),z({arrowWidth:q,arrowHeight:G}),R&&d({strategy:"referenceHidden",...U})]}),[oe,ie]=E(ee),ae=f(N);x((()=>{te&&ae?.()}),[te,ae]);const ne=re.arrow?.x,se=re.arrow?.y,de=0!==re.arrow?.centerOffset,[pe,le]=e.useState();return x((()=>{D&&le(window.getComputedStyle(D).zIndex)}),[D]),u.exports.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:te?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[re.transformOrigin?.x,re.transformOrigin?.y].join(" "),...re.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:p.dir,children:u.exports.jsx(_,{scope:y,placedSide:oe,onArrowChange:L,arrowX:ne,arrowY:se,shouldHideArrow:de,children:u.exports.jsx(c.div,{"data-side":oe,"data-align":ie,...X,ref:F,style:{...X.style,animation:te?void 0:"none"}})})})}));C.displayName=$;var H="PopperArrow",R={top:"bottom",right:"left",bottom:"top",left:"right"},W=e.forwardRef((function(e,t){const{__scopePopper:r,...o}=e,i=O(H,r),a=R[i.placedSide];return u.exports.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.exports.jsx(p,{...o,ref:t,style:{...o.style,display:"block"}})})}));function Y(e){return null!==e}W.displayName=H;var z=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:o,middlewareData:i}=t,a=0!==i.arrow?.centerOffset,n=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[d,p]=E(r),l={start:"0%",center:"50%",end:"100%"}[p],m=(i.arrow?.x??0)+n/2,c=(i.arrow?.y??0)+s/2;let f="",x="";return"bottom"===d?(f=a?l:`${m}px`,x=-s+"px"):"top"===d?(f=a?l:`${m}px`,x=`${o.floating.height+s}px`):"right"===d?(f=-s+"px",x=a?l:`${c}px`):"left"===d&&(f=`${o.floating.width+s}px`,x=a?l:`${c}px`),{data:{x:f,y:x}}}});function E(e){const[t,r="center"]=e.split("-");return[t,r]}var N=P,X=S,k=C,D=W;export{X as Anchor,D as Arrow,k as Content,P as Popper,S as PopperAnchor,W as PopperArrow,C as PopperContent,N as Root,j as createPopperScope};
//# sourceMappingURL=index.mjs.js.map
