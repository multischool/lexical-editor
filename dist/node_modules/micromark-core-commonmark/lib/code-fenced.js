import{factorySpace as e}from"../../micromark-factory-space/index.js";import{markdownSpace as n,markdownLineEnding as t}from"../../micromark-util-character/index.js";const c={tokenize:function(e,n,t){const c=this;return function(n){if(null===n)return t(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),r};function r(e){return c.parser.lazy[c.now().line]?t(e):n(e)}},partial:!0},r={name:"codeFenced",tokenize:function(r,i,u){const o=this,d={tokenize:function(c,r,i){let u=0;return d;function d(e){return c.enter("lineEnding"),c.consume(e),c.exit("lineEnding"),f}function f(t){return c.enter("codeFencedFence"),n(t)?e(c,F,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):F(t)}function F(e){return e===l?(c.enter("codeFencedFenceSequence"),a(e)):i(e)}function a(t){return t===l?(u++,c.consume(t),a):u>=s?(c.exit("codeFencedFenceSequence"),n(t)?e(c,x,"whitespace")(t):x(t)):i(t)}function x(e){return null===e||t(e)?(c.exit("codeFencedFence"),r(e)):i(e)}},partial:!0};let l,f=0,s=0;return function(e){return function(e){const n=o.events[o.events.length-1];return f=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,l=e,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),F(e)}(e)};function F(t){return t===l?(s++,r.consume(t),F):s<3?u(t):(r.exit("codeFencedFenceSequence"),n(t)?e(r,a,"whitespace")(t):a(t))}function a(e){return null===e||t(e)?(r.exit("codeFencedFence"),o.interrupt?i(e):r.check(c,g,E)(e)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),x(e))}function x(c){return null===c||t(c)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),a(c)):n(c)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),e(r,m,"whitespace")(c)):96===c&&c===l?u(c):(r.consume(c),x)}function m(e){return null===e||t(e)?a(e):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),p(e))}function p(e){return null===e||t(e)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),a(e)):96===e&&e===l?u(e):(r.consume(e),p)}function g(e){return r.attempt(d,E,h)(e)}function h(e){return r.enter("lineEnding"),r.consume(e),r.exit("lineEnding"),k}function k(t){return f>0&&n(t)?e(r,S,"linePrefix",f+1)(t):S(t)}function S(e){return null===e||t(e)?r.check(c,g,E)(e):(r.enter("codeFlowValue"),w(e))}function w(e){return null===e||t(e)?(r.exit("codeFlowValue"),S(e)):(r.consume(e),w)}function E(e){return r.exit("codeFenced"),i(e)}},concrete:!0};export{r as codeFenced};
//# sourceMappingURL=code-fenced.js.map
