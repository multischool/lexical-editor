import{factorySpace as t}from"../../micromark-factory-space/index.js";import{asciiDigit as e,markdownSpace as n}from"../../micromark-util-character/index.js";import{blankLine as i}from"./blank-line.js";import{thematicBreak as r}from"./thematic-break.js";const a={name:"list",tokenize:function(t,a,c){const s=this,l=s.events[s.events.length-1];let u=l&&"linePrefix"===l[1].type?l[2].sliceSerialize(l[1],!0).length:0,m=0;return function(n){const i=s.containerState.type||(42===n||43===n||45===n?"listUnordered":"listOrdered");if("listUnordered"===i?!s.containerState.marker||n===s.containerState.marker:e(n)){if(s.containerState.type||(s.containerState.type=i,t.enter(i,{_container:!0})),"listUnordered"===i)return t.enter("listItemPrefix"),42===n||45===n?t.check(r,c,d)(n):d(n);if(!s.interrupt||49===n)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(n)}return c(n)};function f(n){return e(n)&&++m<10?(t.consume(n),f):(!s.interrupt||m<2)&&(s.containerState.marker?n===s.containerState.marker:41===n||46===n)?(t.exit("listItemValue"),d(n)):c(n)}function d(e){return t.enter("listItemMarker"),t.consume(e),t.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||e,t.check(i,s.interrupt?c:k,t.attempt(o,S,p))}function k(t){return s.containerState.initialBlankLine=!0,u++,S(t)}function p(e){return n(e)?(t.enter("listItemPrefixWhitespace"),t.consume(e),t.exit("listItemPrefixWhitespace"),S):c(e)}function S(e){return s.containerState.size=u+s.sliceSerialize(t.exit("listItemPrefix"),!0).length,a(e)}},continuation:{tokenize:function(e,r,o){const s=this;return s.containerState._closeFlow=void 0,e.check(i,(function(n){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,t(e,r,"listItemIndent",s.containerState.size+1)(n)}),(function(t){if(s.containerState.furtherBlankLines||!n(t))return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,l(t);return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(c,r,l)(t)}));function l(n){return s.containerState._closeFlow=!0,s.interrupt=void 0,t(e,e.attempt(a,r,o),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(n)}}},exit:function(t){t.exit(this.containerState.type)}},o={tokenize:function(e,i,r){const a=this;return t(e,(function(t){const e=a.events[a.events.length-1];return!n(t)&&e&&"listItemPrefixWhitespace"===e[1].type?i(t):r(t)}),"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},c={tokenize:function(e,n,i){const r=this;return t(e,(function(t){const e=r.events[r.events.length-1];return e&&"listItemIndent"===e[1].type&&e[2].sliceSerialize(e[1],!0).length===r.containerState.size?n(t):i(t)}),"listItemIndent",r.containerState.size+1)},partial:!0};export{a as list};
//# sourceMappingURL=list.js.map
