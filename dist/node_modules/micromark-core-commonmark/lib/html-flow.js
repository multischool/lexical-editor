import{asciiAlpha as n,markdownLineEndingOrSpace as t,asciiAlphanumeric as e,markdownSpace as r,markdownLineEnding as u}from"../../micromark-util-character/index.js";import{htmlRawNames as o,htmlBlockNames as c}from"../../micromark-util-html-tag-name/index.js";import{blankLine as i}from"./blank-line.js";const m={name:"htmlFlow",tokenize:function(i,m,f){const a=this;let h,p,d,w,g;return function(n){return function(n){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(n),C}(n)};function C(t){return 33===t?(i.consume(t),x):47===t?(i.consume(t),p=!0,D):63===t?(i.consume(t),h=3,a.interrupt?m:O):n(t)?(i.consume(t),d=String.fromCharCode(t),E):f(t)}function x(t){return 45===t?(i.consume(t),h=2,F):91===t?(i.consume(t),h=5,w=0,k):n(t)?(i.consume(t),h=4,a.interrupt?m:O):f(t)}function F(n){return 45===n?(i.consume(n),a.interrupt?m:O):f(n)}function k(n){const t="CDATA[";return n===t.charCodeAt(w++)?(i.consume(n),6===w?a.interrupt?m:B:k):f(n)}function D(t){return n(t)?(i.consume(t),d=String.fromCharCode(t),E):f(t)}function E(n){if(null===n||47===n||62===n||t(n)){const t=47===n,e=d.toLowerCase();return t||p||!o.includes(e)?c.includes(d.toLowerCase())?(h=6,t?(i.consume(n),z):a.interrupt?m(n):B(n)):(h=7,a.interrupt&&!a.parser.lazy[a.now().line]?f(n):p?y(n):S(n)):(h=1,a.interrupt?m(n):B(n))}return 45===n||e(n)?(i.consume(n),d+=String.fromCharCode(n),E):f(n)}function z(n){return 62===n?(i.consume(n),a.interrupt?m:B):f(n)}function y(n){return r(n)?(i.consume(n),y):P(n)}function S(t){return 47===t?(i.consume(t),P):58===t||95===t||n(t)?(i.consume(t),j):r(t)?(i.consume(t),S):P(t)}function j(n){return 45===n||46===n||58===n||95===n||e(n)?(i.consume(n),j):A(n)}function A(n){return 61===n?(i.consume(n),L):r(n)?(i.consume(n),A):S(n)}function L(n){return null===n||60===n||61===n||62===n||96===n?f(n):34===n||39===n?(i.consume(n),g=n,T):r(n)?(i.consume(n),L):b(n)}function T(n){return n===g?(i.consume(n),g=null,v):null===n||u(n)?f(n):(i.consume(n),T)}function b(n){return null===n||34===n||39===n||47===n||60===n||61===n||62===n||96===n||t(n)?A(n):(i.consume(n),b)}function v(n){return 47===n||62===n||r(n)?S(n):f(n)}function P(n){return 62===n?(i.consume(n),q):f(n)}function q(n){return null===n||u(n)?B(n):r(n)?(i.consume(n),q):f(n)}function B(n){return 45===n&&2===h?(i.consume(n),J):60===n&&1===h?(i.consume(n),K):62===n&&4===h?(i.consume(n),Q):63===n&&3===h?(i.consume(n),O):93===n&&5===h?(i.consume(n),N):!u(n)||6!==h&&7!==h?null===n||u(n)?(i.exit("htmlFlowData"),G(n)):(i.consume(n),B):(i.exit("htmlFlowData"),i.check(s,R,G)(n))}function G(n){return i.check(l,H,R)(n)}function H(n){return i.enter("lineEnding"),i.consume(n),i.exit("lineEnding"),I}function I(n){return null===n||u(n)?G(n):(i.enter("htmlFlowData"),B(n))}function J(n){return 45===n?(i.consume(n),O):B(n)}function K(n){return 47===n?(i.consume(n),d="",M):B(n)}function M(t){if(62===t){const n=d.toLowerCase();return o.includes(n)?(i.consume(t),Q):B(t)}return n(t)&&d.length<8?(i.consume(t),d+=String.fromCharCode(t),M):B(t)}function N(n){return 93===n?(i.consume(n),O):B(n)}function O(n){return 62===n?(i.consume(n),Q):45===n&&2===h?(i.consume(n),O):B(n)}function Q(n){return null===n||u(n)?(i.exit("htmlFlowData"),R(n)):(i.consume(n),Q)}function R(n){return i.exit("htmlFlow"),m(n)}},resolveTo:function(n){let t=n.length;for(;t--&&("enter"!==n[t][0]||"htmlFlow"!==n[t][1].type););t>1&&"linePrefix"===n[t-2][1].type&&(n[t][1].start=n[t-2][1].start,n[t+1][1].start=n[t-2][1].start,n.splice(t-2,2));return n},concrete:!0},s={tokenize:function(n,t,e){return function(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(i,t,e)}},partial:!0},l={tokenize:function(n,t,e){const r=this;return function(t){if(u(t))return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),o;return e(t)};function o(n){return r.parser.lazy[r.now().line]?e(n):t(n)}},partial:!0};export{m as htmlFlow};
//# sourceMappingURL=html-flow.js.map
