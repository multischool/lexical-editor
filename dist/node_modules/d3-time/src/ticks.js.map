{"version":3,"file":"ticks.js","sources":["../../../../node_modules/d3-time/src/ticks.js"],"sourcesContent":["import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport {millisecond} from \"./millisecond.js\";\nimport {second} from \"./second.js\";\nimport {timeMinute, utcMinute} from \"./minute.js\";\nimport {timeHour, utcHour} from \"./hour.js\";\nimport {timeDay, unixDay} from \"./day.js\";\nimport {timeSunday, utcSunday} from \"./week.js\";\nimport {timeMonth, utcMonth} from \"./month.js\";\nimport {timeYear, utcYear} from \"./year.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n"],"names":["ticker","year","month","week","day","hour","minute","tickIntervals","second","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","tickInterval","start","stop","count","target","Math","abs","i","bisector","step","right","length","every","tickStep","millisecond","max","t","reverse","interval","range","ticks","utcYear","utcMonth","utcSunday","unixDay","utcHour","utcMinute","timeTicks","timeTickInterval","timeYear","timeMonth","timeSunday","timeDay","timeHour","timeMinute"],"mappings":"6oBAWA,SAASA,EAAOC,EAAMC,EAAOC,EAAMC,EAAKC,EAAMC,GAE5C,MAAMC,EAAgB,CACpB,CAACC,EAAS,EAAQC,GAClB,CAACD,EAAS,EAAI,EAAIC,GAClB,CAACD,EAAQ,GAAI,GAAKC,GAClB,CAACD,EAAQ,GAAI,GAAKC,GAClB,CAACH,EAAS,EAAQI,GAClB,CAACJ,EAAS,EAAI,EAAII,GAClB,CAACJ,EAAQ,GAAI,GAAKI,GAClB,CAACJ,EAAQ,GAAI,GAAKI,GAClB,CAAGL,EAAO,EAAQM,GAClB,CAAGN,EAAO,EAAI,EAAIM,GAClB,CAAGN,EAAO,EAAI,EAAIM,GAClB,CAAGN,EAAM,GAAI,GAAKM,GAClB,CAAIP,EAAM,EAAQQ,GAClB,CAAIR,EAAM,EAAI,EAAIQ,GAClB,CAAGT,EAAO,EAAQU,GAClB,CAAEX,EAAQ,EAAQY,GAClB,CAAEZ,EAAQ,EAAI,EAAIY,GAClB,CAAGb,EAAO,EAAQc,IAWpB,SAASC,EAAaC,EAAOC,EAAMC,GACjC,MAAMC,EAASC,KAAKC,IAAIJ,EAAOD,GAASE,EAClCI,EAAIC,GAAS,IAAKC,KAAUA,IAAMC,MAAMnB,EAAea,GAC7D,GAAIG,IAAMhB,EAAcoB,OAAQ,OAAO1B,EAAK2B,MAAMC,EAASZ,EAAQF,EAAcG,EAAOH,EAAcI,IACtG,GAAU,IAANI,EAAS,OAAOO,EAAYF,MAAMP,KAAKU,IAAIF,EAASZ,EAAOC,EAAMC,GAAQ,IAC7E,MAAOa,EAAGP,GAAQlB,EAAca,EAASb,EAAcgB,EAAI,GAAG,GAAKhB,EAAcgB,GAAG,GAAKH,EAASG,EAAI,EAAIA,GAC1G,OAAOS,EAAEJ,MAAMH,EAChB,CAED,MAAO,CAjBP,SAAeR,EAAOC,EAAMC,GAC1B,MAAMc,EAAUf,EAAOD,EACnBgB,KAAUhB,EAAOC,GAAQ,CAACA,EAAMD,IACpC,MAAMiB,EAAWf,GAAgC,mBAAhBA,EAAMgB,MAAuBhB,EAAQH,EAAaC,EAAOC,EAAMC,GAC1FiB,EAAQF,EAAWA,EAASC,MAAMlB,GAAQC,EAAO,GAAK,GAC5D,OAAOe,EAAUG,EAAMH,UAAYG,CACpC,EAWcpB,EACjB,CAEoChB,EAAOqC,EAASC,EAAUC,EAAWC,EAASC,EAASC,GACtF,MAAEC,EAAWC,GAAoB5C,EAAO6C,EAAUC,EAAWC,EAAYC,EAASC,EAAUC"}