{"version":3,"file":"pie.js","sources":["../../../../node_modules/d3-shape/src/pie.js"],"sourcesContent":["import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport {tau} from \"./math.js\";\n\nexport default function() {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = (data = array(data)).length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    }\n\n    // Optionally sort the arcs by previously-computed values or by data.\n    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });\n    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });\n\n    // Compute the arcs! They are stored in the original data's order.\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function(_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function(_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}\n"],"names":["pie","value","identity","sortValues","descending","sort","startAngle","constant","endAngle","tau","padAngle","data","i","j","k","a1","v","n","array","length","sum","index","Array","arcs","a0","apply","this","arguments","da","Math","min","max","p","abs","pa","_"],"mappings":"mJAMe,SAAAA,IACb,IAAIC,EAAQC,EACRC,EAAaC,EACbC,EAAO,KACPC,EAAaC,EAAS,GACtBC,EAAWD,EAASE,GACpBC,EAAWH,EAAS,GAExB,SAASP,EAAIW,GACX,IAAIC,EAEAC,EACAC,EAMAC,EAGAC,EAXAC,GAAKN,EAAOO,EAAMP,IAAOQ,OAGzBC,EAAM,EACNC,EAAQ,IAAIC,MAAML,GAClBM,EAAO,IAAID,MAAML,GACjBO,GAAMlB,EAAWmB,MAAMC,KAAMC,WAC7BC,EAAKC,KAAKC,IAAIrB,EAAKoB,KAAKE,KAAKtB,EAAKD,EAASiB,MAAMC,KAAMC,WAAaH,IAEpEQ,EAAIH,KAAKC,IAAID,KAAKI,IAAIL,GAAMX,EAAGP,EAASe,MAAMC,KAAMC,YACpDO,EAAKF,GAAKJ,EAAK,GAAK,EAAI,GAG5B,IAAKhB,EAAI,EAAGA,EAAIK,IAAKL,GACdI,EAAIO,EAAKF,EAAMT,GAAKA,IAAMX,EAAMU,EAAKC,GAAIA,EAAGD,IAAS,IACxDS,GAAOJ,GASX,IAJkB,MAAdb,EAAoBkB,EAAMhB,MAAK,SAASO,EAAGC,GAAK,OAAOV,EAAWoB,EAAKX,GAAIW,EAAKV,GAAI,IACvE,MAARR,GAAcgB,EAAMhB,MAAK,SAASO,EAAGC,GAAK,OAAOR,EAAKM,EAAKC,GAAID,EAAKE,GAAI,IAG5ED,EAAI,EAAGE,EAAIM,GAAOQ,EAAKX,EAAIiB,GAAMd,EAAM,EAAGR,EAAIK,IAAKL,EAAGY,EAAKT,EAC9DF,EAAIQ,EAAMT,GAAiBG,EAAKS,IAAlBR,EAAIO,EAAKV,IAAmB,EAAIG,EAAIF,EAAI,GAAKoB,EAAIX,EAAKV,GAAK,CACvEF,KAAMA,EAAKE,GACXQ,MAAOT,EACPX,MAAOe,EACPV,WAAYkB,EACZhB,SAAUO,EACVL,SAAUsB,GAId,OAAOT,CACR,CA0BD,OAxBAvB,EAAIC,MAAQ,SAASkC,GACnB,OAAOR,UAAUR,QAAUlB,EAAqB,mBAANkC,EAAmBA,EAAI5B,GAAU4B,GAAInC,GAAOC,CAC1F,EAEED,EAAIG,WAAa,SAASgC,GACxB,OAAOR,UAAUR,QAAUhB,EAAagC,EAAG9B,EAAO,KAAML,GAAOG,CACnE,EAEEH,EAAIK,KAAO,SAAS8B,GAClB,OAAOR,UAAUR,QAAUd,EAAO8B,EAAGhC,EAAa,KAAMH,GAAOK,CACnE,EAEEL,EAAIM,WAAa,SAAS6B,GACxB,OAAOR,UAAUR,QAAUb,EAA0B,mBAAN6B,EAAmBA,EAAI5B,GAAU4B,GAAInC,GAAOM,CAC/F,EAEEN,EAAIQ,SAAW,SAAS2B,GACtB,OAAOR,UAAUR,QAAUX,EAAwB,mBAAN2B,EAAmBA,EAAI5B,GAAU4B,GAAInC,GAAOQ,CAC7F,EAEER,EAAIU,SAAW,SAASyB,GACtB,OAAOR,UAAUR,QAAUT,EAAwB,mBAANyB,EAAmBA,EAAI5B,GAAU4B,GAAInC,GAAOU,CAC7F,EAESV,CACT"}