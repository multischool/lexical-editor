import{offset as t,autoPlacement as e,shift as n,flip as i,size as o,hide as r,arrow as s,inline as l,limitShift as c,computePosition as f}from"../../core/dist/floating-ui.core.mjs.js";import{createCoords as u,rectToClientRect as h,round as a,floor as d,max as g,min as p}from"../../utils/dist/floating-ui.utils.mjs.js";import{getOverflowAncestors as m,isElement as x,getWindow as y,getFrameElement as w,getComputedStyle as v,getDocumentElement as b,isHTMLElement as R,isWebKit as L,isTopLayer as T,getNodeName as F,isOverflowElement as E,getNodeScroll as W,getParentNode as C,isLastTraversableNode as O,isTableElement as j,isContainingBlock as H,getContainingBlock as z}from"../../utils/dist/floating-ui.utils.dom.mjs.js";export{getOverflowAncestors}from"../../utils/dist/floating-ui.utils.dom.mjs.js";function A(t){const e=v(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=R(t),r=o?t.offsetWidth:n,s=o?t.offsetHeight:i,l=a(n)!==r||a(i)!==s;return l&&(n=r,i=s),{width:n,height:i,$:l}}function B(t){return x(t)?t:t.contextElement}function D(t){const e=B(t);if(!R(e))return u(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:r}=A(e);let s=(r?a(n.width):n.width)/i,l=(r?a(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}const P=u(0);function V(t){const e=y(t);return L()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:P}function S(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1);const o=t.getBoundingClientRect(),r=B(t);let s=u(1);e&&(i?x(i)&&(s=D(i)):s=D(t));const l=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==y(t))&&e}(r,n,i)?V(r):u(0);let c=(o.left+l.x)/s.x,f=(o.top+l.y)/s.y,a=o.width/s.x,d=o.height/s.y;if(r){const t=y(r),e=i&&x(i)?y(i):i;let n=t,o=w(n);for(;o&&i&&e!==n;){const t=D(o),e=o.getBoundingClientRect(),i=v(o),r=e.left+(o.clientLeft+parseFloat(i.paddingLeft))*t.x,s=e.top+(o.clientTop+parseFloat(i.paddingTop))*t.y;c*=t.x,f*=t.y,a*=t.x,d*=t.y,c+=r,f+=s,n=y(o),o=w(n)}}return h({width:a,height:d,x:c,y:f})}function I(t,e){const n=W(t).scrollLeft;return e?e.left+n:S(b(t)).left+n}function q(t,e,n){void 0===n&&(n=!1);const i=t.getBoundingClientRect();return{x:i.left+e.scrollLeft-(n?0:I(t,i)),y:i.top+e.scrollTop}}function M(t,e,n){let i;if("viewport"===e)i=function(t,e){const n=y(t),i=b(t),o=n.visualViewport;let r=i.clientWidth,s=i.clientHeight,l=0,c=0;if(o){r=o.width,s=o.height;const t=L();(!t||t&&"fixed"===e)&&(l=o.offsetLeft,c=o.offsetTop)}return{width:r,height:s,x:l,y:c}}(t,n);else if("document"===e)i=function(t){const e=b(t),n=W(t),i=t.ownerDocument.body,o=g(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=g(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+I(t);const l=-n.scrollTop;return"rtl"===v(i).direction&&(s+=g(e.clientWidth,i.clientWidth)-o),{width:o,height:r,x:s,y:l}}(b(t));else if(x(e))i=function(t,e){const n=S(t,!0,"fixed"===e),i=n.top+t.clientTop,o=n.left+t.clientLeft,r=R(t)?D(t):u(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:o*r.x,y:i*r.y}}(e,n);else{const n=V(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return h(i)}function N(t,e){const n=C(t);return!(n===e||!x(n)||O(n))&&("fixed"===v(n).position||N(n,e))}function $(t,e,n){const i=R(e),o=b(e),r="fixed"===n,s=S(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=u(0);if(i||!i&&!r)if(("body"!==F(e)||E(o))&&(l=W(e)),i){const t=S(e,!0,r,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else o&&(c.x=I(o));const f=!o||i||r?u(0):q(o,l);return{x:s.left+l.scrollLeft-c.x-f.x,y:s.top+l.scrollTop-c.y-f.y,width:s.width,height:s.height}}function _(t){return"static"===v(t).position}function k(t,e){if(!R(t)||"fixed"===v(t).position)return null;if(e)return e(t);let n=t.offsetParent;return b(t)===n&&(n=n.ownerDocument.body),n}function G(t,e){const n=y(t);if(T(t))return n;if(!R(t)){let e=C(t);for(;e&&!O(e);){if(x(e)&&!_(e))return e;e=C(e)}return n}let i=k(t,e);for(;i&&j(i)&&_(i);)i=k(i,e);return i&&O(i)&&_(i)&&!H(i)?n:i||z(t)||n}const J={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:i,strategy:o}=t;const r="fixed"===o,s=b(i),l=!!e&&T(e.floating);if(i===s||l&&r)return n;let c={scrollLeft:0,scrollTop:0},f=u(1);const h=u(0),a=R(i);if((a||!a&&!r)&&(("body"!==F(i)||E(s))&&(c=W(i)),R(i))){const t=S(i);f=D(i),h.x=t.x+i.clientLeft,h.y=t.y+i.clientTop}const d=!s||a||r?u(0):q(s,c,!0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-c.scrollLeft*f.x+h.x+d.x,y:n.y*f.y-c.scrollTop*f.y+h.y+d.y}},getDocumentElement:b,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const r=[..."clippingAncestors"===n?T(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let i=m(t,[],!1).filter((t=>x(t)&&"body"!==F(t))),o=null;const r="fixed"===v(t).position;let s=r?C(t):t;for(;x(s)&&!O(s);){const e=v(s),n=H(s);n||"fixed"!==e.position||(o=null),(r?!n&&!o:!n&&"static"===e.position&&o&&["absolute","fixed"].includes(o.position)||E(s)&&!n&&N(t,s))?i=i.filter((t=>t!==s)):o=e,s=C(s)}return e.set(t,i),i}(e,this._c):[].concat(n),i],s=r[0],l=r.reduce(((t,n)=>{const i=M(e,n,o);return t.top=g(i.top,t.top),t.right=p(i.right,t.right),t.bottom=p(i.bottom,t.bottom),t.left=g(i.left,t.left),t}),M(e,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:G,getElementRects:async function(t){const e=this.getOffsetParent||G,n=this.getDimensions,i=await n(t.floating);return{reference:$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=A(t);return{width:e,height:n}},getScale:D,isElement:x,isRTL:function(t){return"rtl"===v(t).direction}};function K(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Q(t,e,n,i){void 0===i&&(i={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=i,f=B(t),u=o||r?[...f?m(f):[],...m(e)]:[];u.forEach((t=>{o&&t.addEventListener("scroll",n,{passive:!0}),r&&t.addEventListener("resize",n)}));const h=f&&l?function(t,e){let n,i=null;const o=b(t);function r(){var t;clearTimeout(n),null==(t=i)||t.disconnect(),i=null}return function s(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),r();const f=t.getBoundingClientRect(),{left:u,top:h,width:a,height:m}=f;if(l||e(),!a||!m)return;const x={rootMargin:-d(h)+"px "+-d(o.clientWidth-(u+a))+"px "+-d(o.clientHeight-(h+m))+"px "+-d(u)+"px",threshold:g(0,p(1,c))||1};let y=!0;function w(e){const i=e[0].intersectionRatio;if(i!==c){if(!y)return s();i?s(!1,i):n=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==i||K(f,t.getBoundingClientRect())||s(),y=!1}try{i=new IntersectionObserver(w,{...x,root:o.ownerDocument})}catch(t){i=new IntersectionObserver(w,x)}i.observe(t)}(!0),r}(f,n):null;let a,x=-1,y=null;s&&(y=new ResizeObserver((t=>{let[i]=t;i&&i.target===f&&y&&(y.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame((()=>{var t;null==(t=y)||t.observe(e)}))),n()})),f&&!c&&y.observe(f),y.observe(e));let w=c?S(t):null;return c&&function e(){const i=S(t);w&&!K(w,i)&&n();w=i,a=requestAnimationFrame(e)}(),n(),()=>{var t;u.forEach((t=>{o&&t.removeEventListener("scroll",n),r&&t.removeEventListener("resize",n)})),null==h||h(),null==(t=y)||t.disconnect(),y=null,c&&cancelAnimationFrame(a)}}const U=t,X=n,Y=i,Z=o,tt=r,et=s,nt=c,it=(t,e,n)=>{const i=new Map,o={platform:J,...n},r={...o.platform,_c:i};return f(t,e,{...o,platform:r})};export{et as arrow,Q as autoUpdate,it as computePosition,Y as flip,tt as hide,nt as limitShift,U as offset,J as platform,X as shift,Z as size};
//# sourceMappingURL=floating-ui.dom.mjs.js.map
