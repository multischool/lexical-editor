import{useLexicalComposerContext as e}from"./LexicalComposerContext.mjs.js";import{forwardRef as t,useState as i,useLayoutEffect as r,useEffect as a,useCallback as n,useMemo as o}from"react";import"../../react/jsx-runtime.js";import{$canShowPlaceholderCurry as l}from"../text/LexicalText.mjs.js";import{mergeRegister as s}from"@lexical/utils";import{j as d}from"../../../_virtual/jsx-runtime.js";const c="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r:a;const u=t((function({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:a,ariaDescribedBy:l,ariaErrorMessage:s,ariaExpanded:u,ariaInvalid:m,ariaLabel:p,ariaLabelledBy:x,ariaMultiline:b,ariaOwns:f,ariaRequired:E,autoCapitalize:v,className:j,id:w,role:C="textbox",spellCheck:y=!0,style:g,tabIndex:L,"data-testid":h,...D},I){const[R,k]=i(e.isEditable()),q=n((t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null)}),[e]),z=o((()=>function(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}(I,q)),[q,I]);return c((()=>(k(e.isEditable()),e.registerEditableListener((e=>{k(e)})))),[e]),d.exports.jsx("div",{"aria-activedescendant":R?t:void 0,"aria-autocomplete":R?r:"none","aria-controls":R?a:void 0,"aria-describedby":l,...null!=s?{"aria-errormessage":s}:{},"aria-expanded":R&&"combobox"===C?!!u:void 0,...null!=m?{"aria-invalid":m}:{},"aria-label":p,"aria-labelledby":x,"aria-multiline":b,"aria-owns":R?f:void 0,"aria-readonly":!R||void 0,"aria-required":E,autoCapitalize:v,className:j,contentEditable:R,"data-testid":h,id:w,ref:z,role:R?C:void 0,spellCheck:y,style:g,tabIndex:L,...D})}));function m(e){return e.getEditorState().read(l(e.isComposing()))}const p=t((function(t,i){const{placeholder:r,...a}=t,[n]=e();return d.exports.jsxs(d.exports.Fragment,{children:[d.exports.jsx(u,{editor:n,...a,ref:i}),null!=r&&d.exports.jsx(x,{editor:n,content:r})]})}));function x({content:e,editor:t}){const a=function(e){const[t,r]=i((()=>m(e)));return c((()=>{function t(){const t=m(e);r(t)}return t(),s(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(t),[n,o]=i(t.isEditable());if(r((()=>(o(t.isEditable()),t.registerEditableListener((e=>{o(e)})))),[t]),!a)return null;let l=null;return"function"==typeof e?l=e(n):null!==e&&(l=e),null===l?null:d.exports.jsx("div",{"aria-hidden":!0,children:l})}export{p as ContentEditable,u as ContentEditableElement};
//# sourceMappingURL=LexicalContentEditable.prod.mjs.js.map
