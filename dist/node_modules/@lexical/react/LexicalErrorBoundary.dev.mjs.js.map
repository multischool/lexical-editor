{"version":3,"file":"LexicalErrorBoundary.dev.mjs.js","sources":["../../../../node_modules/@lexical/react/LexicalErrorBoundary.dev.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport * as React from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\n\nvar changedArray = function changedArray(a, b) {\n  if (a === void 0) {\n    a = [];\n  }\n\n  if (b === void 0) {\n    b = [];\n  }\n\n  return a.length !== b.length || a.some(function (item, index) {\n    return !Object.is(item, b[index]);\n  });\n};\n\nvar initialState = {\n  error: null\n};\n\nvar ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n    _this.state = initialState;\n\n    _this.resetErrorBoundary = function () {\n      var _this$props;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      _this.props.onReset == null ? void 0 : (_this$props = _this.props).onReset.apply(_this$props, args);\n\n      _this.reset();\n    };\n\n    return _this;\n  }\n\n  ErrorBoundary.getDerivedStateFromError = function getDerivedStateFromError(error) {\n    return {\n      error: error\n    };\n  };\n\n  var _proto = ErrorBoundary.prototype;\n\n  _proto.reset = function reset() {\n    this.setState(initialState);\n  };\n\n  _proto.componentDidCatch = function componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n\n    (_this$props$onError = (_this$props2 = this.props).onError) == null ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var error = this.state.error;\n    var resetKeys = this.props.resetKeys; // There's an edge case where if the thing that triggered the error\n    // happens to *also* be in the resetKeys array, we'd end up resetting\n    // the error boundary immediately. This would likely trigger a second\n    // error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call\n    // of cDU after the error is set\n\n    if (error !== null && prevState.error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onResetKe, _this$props3;\n\n      (_this$props$onResetKe = (_this$props3 = this.props).onResetKeysChange) == null ? void 0 : _this$props$onResetKe.call(_this$props3, prevProps.resetKeys, resetKeys);\n      this.reset();\n    }\n  };\n\n  _proto.render = function render() {\n    var error = this.state.error;\n    var _this$props4 = this.props,\n        fallbackRender = _this$props4.fallbackRender,\n        FallbackComponent = _this$props4.FallbackComponent,\n        fallback = _this$props4.fallback;\n\n    if (error !== null) {\n      var _props = {\n        error: error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n\n      if ( /*#__PURE__*/React.isValidElement(fallback)) {\n        return fallback;\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(_props);\n      } else if (FallbackComponent) {\n        return /*#__PURE__*/React.createElement(FallbackComponent, _props);\n      } else {\n        throw new Error('react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop');\n      }\n    }\n\n    return this.props.children;\n  };\n\n  return ErrorBoundary;\n}(React.Component);\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nfunction LexicalErrorBoundary({\n  children,\n  onError\n}) {\n  return /*#__PURE__*/jsx(ErrorBoundary, {\n    fallback: /*#__PURE__*/jsx(\"div\", {\n      style: {\n        border: '1px solid #f00',\n        color: '#f00',\n        padding: '8px'\n      },\n      children: \"An error was thrown.\"\n    }),\n    onError: onError,\n    children: children\n  });\n}\n\nexport { LexicalErrorBoundary };\n"],"names":["_setPrototypeOf","o","p","Object","setPrototypeOf","bind","__proto__","initialState","error","ErrorBoundary","_React$Component","subClass","superClass","_this","_len","arguments","length","_args","Array","_key","call","apply","this","concat","state","resetErrorBoundary","_this$props","_len2","args","_key2","props","onReset","reset","prototype","create","constructor","getDerivedStateFromError","_proto","setState","componentDidCatch","info","_this$props$onError","_this$props2","onError","componentDidUpdate","prevProps","prevState","_this$props$onResetKe","_this$props3","a","b","resetKeys","some","item","index","is","onResetKeysChange","render","_this$props4","fallbackRender","FallbackComponent","fallback","_props","React","isValidElement","createElement","Error","children","Component","LexicalErrorBoundary","jsx","exports","style","border","color","padding"],"mappings":"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"}