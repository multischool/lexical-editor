import{$isLinkNode as e}from"@lexical/link";import{useLexicalComposerContext as t}from"./LexicalComposerContext.mjs.js";import{$findMatchingParent as n,isHTMLAnchorElement as r}from"@lexical/utils";import{isDOMNode as l,getNearestEditorFromDOMNode as o,$getNearestNodeFromDOMNode as i,$isElementNode as u,$getSelection as s,$isRangeSelection as a}from"lexical";import{useEffect as c}from"react";function f({newTab:f=!0,disabled:m=!1}){const[p]=t();return c((()=>{const t=t=>{const c=t.target;if(!l(c))return;const d=o(c);if(null===d)return;let v=null,g=null;if(d.update((()=>{const t=i(c);if(null!==t){const l=n(t,u);if(!m)if(e(l))v=l.sanitizeUrl(l.getURL()),g=l.getTarget();else{const e=function(e,t){let n=e;for(;null!=n;){if(t(n))return n;n=n.parentNode}return null}(c,r);null!==e&&(v=e.href,g=e.target)}}})),null===v||""===v)return;const x=p.getEditorState().read(s);if(a(x)&&!x.isCollapsed())return void t.preventDefault();const L="auxclick"===t.type&&1===t.button;window.open(v,f||L||t.metaKey||t.ctrlKey||"_blank"===g?"_blank":"_self"),t.preventDefault()},c=e=>{1===e.button&&t(e)};return p.registerRootListener(((e,n)=>{null!==n&&(n.removeEventListener("click",t),n.removeEventListener("mouseup",c)),null!==e&&(e.addEventListener("click",t),e.addEventListener("mouseup",c))}))}),[p,f,m]),null}export{f as ClickableLinkPlugin};
//# sourceMappingURL=LexicalClickableLinkPlugin.dev.mjs.js.map
