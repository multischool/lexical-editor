{"version":3,"file":"LexicalCheckListPlugin.prod.mjs.js","sources":["../../../../node_modules/@lexical/react/LexicalCheckListPlugin.prod.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{INSERT_CHECK_LIST_COMMAND as e,insertList as t,$isListItemNode as n,$isListNode as r}from\"@lexical/list\";import{useLexicalComposerContext as i}from\"@lexical/react/LexicalComposerContext\";import{mergeRegister as l,$findMatchingParent as o,isHTMLElement as c,calculateZoomLevel as s}from\"@lexical/utils\";import{COMMAND_PRIORITY_LOW as u,KEY_ARROW_DOWN_COMMAND as a,KEY_ARROW_UP_COMMAND as g,KEY_ESCAPE_COMMAND as f,KEY_SPACE_COMMAND as m,$getNearestNodeFromDOMNode as d,KEY_ARROW_LEFT_COMMAND as p,$getSelection as C,$isRangeSelection as h,$isElementNode as v,getNearestEditorFromDOMNode as L}from\"lexical\";import{useEffect as E}from\"react\";function x(){const[c]=i();return E((()=>l(c.registerCommand(e,(()=>(t(c,\"check\"),!0)),u),c.registerCommand(a,(e=>b(e,c,!1)),u),c.registerCommand(g,(e=>b(e,c,!0)),u),c.registerCommand(f,(e=>{if(null!=_()){const e=c.getRootElement();return null!=e&&e.focus(),!0}return!1}),u),c.registerCommand(m,(e=>{const t=_();return!(null==t||!c.isEditable())&&(c.update((()=>{const r=d(t);n(r)&&(e.preventDefault(),r.toggleChecked())})),!0)}),u),c.registerCommand(p,(e=>c.getEditorState().read((()=>{const t=C();if(h(t)&&t.isCollapsed()){const{anchor:i}=t,l=\"element\"===i.type;if(l||0===i.offset){const t=i.getNode(),s=o(t,(e=>v(e)&&!e.isInline()));if(n(s)){const n=s.getParent();if(r(n)&&\"check\"===n.getListType()&&(l||s.getFirstDescendant()===t)){const t=c.getElementByKey(s.__key);if(null!=t&&document.activeElement!==t)return t.focus(),e.preventDefault(),!0}}}}return!1}))),u),c.registerRootListener(((e,t)=>{null!==e&&(e.addEventListener(\"click\",y),e.addEventListener(\"pointerdown\",N)),null!==t&&(t.removeEventListener(\"click\",y),t.removeEventListener(\"pointerdown\",N))}))))),null}function k(e,t){const n=e.target;if(!c(n))return;const r=n.firstChild;if(c(r)&&(\"UL\"===r.tagName||\"OL\"===r.tagName))return;const i=n.parentNode;if(!i||\"check\"!==i.__lexicalListType)return;const l=n.getBoundingClientRect(),o=e.pageX/s(n);(\"rtl\"===n.dir?o<l.right&&o>l.right-20:o>l.left&&o<l.left+20)&&t()}function y(e){k(e,(()=>{if(c(e.target)){const t=e.target,r=L(t);null!=r&&r.isEditable()&&r.update((()=>{const e=d(t);n(e)&&(t.focus(),e.toggleChecked())}))}}))}function N(e){k(e,(()=>{e.preventDefault()}))}function _(){const e=document.activeElement;return c(e)&&\"LI\"===e.tagName&&null!=e.parentNode&&\"check\"===e.parentNode.__lexicalListType?e:null}function b(e,t,i){const l=_();return null!=l&&t.update((()=>{const o=d(l);if(!n(o))return;const c=function(e,t){let i=t?e.getPreviousSibling():e.getNextSibling(),l=e;for(;null==i&&n(l);)l=l.getParentOrThrow().getParent(),null!=l&&(i=t?l.getPreviousSibling():l.getNextSibling());for(;n(i);){const e=t?i.getLastChild():i.getFirstChild();if(!r(e))return i;i=t?e.getLastChild():e.getFirstChild()}return null}(o,i);if(null!=c){c.selectStart();const n=t.getElementByKey(c.__key);null!=n&&(e.preventDefault(),setTimeout((()=>{n.focus()}),0))}})),!1}export{x as CheckListPlugin};\n"],"names":["x","c","i","E","l","registerCommand","e","t","u","a","b","g","f","_","getRootElement","focus","m","isEditable","update","r","d","n","preventDefault","toggleChecked","p","getEditorState","read","C","h","isCollapsed","anchor","type","offset","getNode","s","o","v","isInline","getParent","getListType","getFirstDescendant","getElementByKey","__key","document","activeElement","registerRootListener","addEventListener","y","N","removeEventListener","k","target","firstChild","tagName","parentNode","__lexicalListType","getBoundingClientRect","pageX","dir","right","left","L","getPreviousSibling","getNextSibling","getParentOrThrow","getLastChild","getFirstChild","selectStart","setTimeout"],"mappings":"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"}