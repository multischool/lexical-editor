import{useLexicalComposerContext as t}from"./LexicalComposerContext.mjs.js";import{useLexicalEditable as r}from"./useLexicalEditable.mjs.js";import{$canShowPlaceholderCurry as e}from"../text/LexicalText.mjs.js";import{mergeRegister as o}from"@lexical/utils";import{useState as n,useEffect as i,useMemo as s,Suspense as c,useLayoutEffect as l}from"react";import{flushSync as m,createPortal as a}from"react-dom";import"../../react/jsx-runtime.js";import{registerDragonSupport as u}from"../dragon/LexicalDragon.mjs.js";import{registerRichText as p}from"@lexical/rich-text";import{j as x}from"../../../_virtual/jsx-runtime.js";const d="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l:i;function f(t){return t.getEditorState().read(e(t.isComposing()))}function j({contentEditable:r,placeholder:e=null,ErrorBoundary:l}){const[f]=t(),j=function(t,r){const[e,o]=n((()=>t.getDecorators()));return d((()=>t.registerDecoratorListener((t=>{m((()=>{o(t)}))}))),[t]),i((()=>{o(t.getDecorators())}),[t]),s((()=>{const o=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const s=n[i],l=x.exports.jsx(r,{onError:r=>t._onError(r),children:x.exports.jsx(c,{fallback:null,children:e[s]})}),m=t.getElementByKey(s);null!==m&&o.push(a(l,m,s))}return o}),[r,e,t])}(f,l);return d((()=>o(p(E),u(E))),[E=f]),x.exports.jsxs(x.exports.Fragment,{children:[r,x.exports.jsx(g,{content:e}),j]});var E}function g({content:e}){const[i]=t(),s=function(t){const[r,e]=n((()=>f(t)));return d((()=>{function r(){const r=f(t);e(r)}return r(),o(t.registerUpdateListener((()=>{r()})),t.registerEditableListener((()=>{r()})))}),[t]),r}(i),c=r();return s?"function"==typeof e?e(c):e:null}export{j as RichTextPlugin};
//# sourceMappingURL=LexicalRichTextPlugin.prod.mjs.js.map
