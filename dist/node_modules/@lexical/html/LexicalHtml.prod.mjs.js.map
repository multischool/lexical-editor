{"version":3,"file":"LexicalHtml.prod.mjs.js","sources":["../../../../node_modules/@lexical/html/LexicalHtml.prod.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$sliceSelectedTextNodeContent as e}from\"@lexical/selection\";import{isHTMLElement as n,isBlockDomNode as t}from\"@lexical/utils\";import{$getRoot as o,$isElementNode as l,$cloneWithProperties as r,$isTextNode as i,isDocumentFragment as s,$isRootOrShadowRoot as c,$isBlockElementNode as u,$createLineBreakNode as f,ArtificialNode__DO_NOT_USE as a,isInlineDomNode as d,$createParagraphNode as p}from\"lexical\";function h(e,n){const t=n.body?n.body.childNodes:[];let o=[];const l=[];for(let n=0;n<t.length;n++){const r=t[n];if(!x.has(r.nodeName)){const n=y(r,e,l,!1);null!==n&&(o=o.concat(n))}}return function(e){for(const n of e)n.getNextSibling()instanceof a&&n.insertAfter(f());for(const n of e){const e=n.getChildren();for(const t of e)n.insertBefore(t);n.remove()}}(l),o}function m(e,n){if(\"undefined\"==typeof document||\"undefined\"==typeof window&&void 0===global.window)throw new Error(\"To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.\");const t=document.createElement(\"div\"),l=o().getChildren();for(let o=0;o<l.length;o++){g(e,l[o],t,n)}return t.innerHTML}function g(t,o,c,u=null){let f=null===u||o.isSelected(u);const a=l(o)&&o.excludeFromCopy(\"html\");let d=o;if(null!==u){let n=r(o);n=i(n)&&null!==u?e(u,n):n,d=n}const p=l(d)?d.getChildren():[],h=t._nodes.get(d.getType());let m;m=h&&void 0!==h.exportDOM?h.exportDOM(t,d):d.exportDOM(t);const{element:x,after:y}=m;if(!x)return!1;const w=document.createDocumentFragment();for(let e=0;e<p.length;e++){const n=p[e],r=g(t,n,w,u);!f&&l(o)&&r&&o.extractWithChild(n,u,\"html\")&&(f=!0)}if(f&&!a){if((n(x)||s(x))&&x.append(w),c.append(x),y){const e=y.call(d,x);e&&(s(x)?x.replaceChildren(e):x.replaceWith(e))}}else c.append(w);return f}const x=new Set([\"STYLE\",\"SCRIPT\"]);function y(e,n,o,r,i=new Map,s){let h=[];if(x.has(e.nodeName))return h;let m=null;const g=function(e,n){const{nodeName:t}=e,o=n._htmlConversions.get(t.toLowerCase());let l=null;if(void 0!==o)for(const n of o){const t=n(e);null!==t&&(null===l||(l.priority||0)<=(t.priority||0))&&(l=t)}return null!==l?l.conversion:null}(e,n),b=g?g(e):null;let C=null;if(null!==b){C=b.after;const n=b.node;if(m=Array.isArray(n)?n[n.length-1]:n,null!==m){for(const[,e]of i)if(m=e(m,s),!m)break;m&&h.push(...Array.isArray(n)?n:[m])}null!=b.forChild&&i.set(e.nodeName,b.forChild)}const S=e.childNodes;let v=[];const N=(null==m||!c(m))&&(null!=m&&u(m)||r);for(let e=0;e<S.length;e++)v.push(...y(S[e],n,o,N,new Map(i),m));return null!=C&&(v=C(v)),t(e)&&(v=w(e,v,N?()=>{const e=new a;return o.push(e),e}:p)),null==m?v.length>0?h=h.concat(v):t(e)&&function(e){if(null==e.nextSibling||null==e.previousSibling)return!1;return d(e.nextSibling)&&d(e.previousSibling)}(e)&&(h=h.concat(f())):l(m)&&m.append(...v),h}function w(e,n,t){const o=e.style.textAlign,l=[];let r=[];for(let e=0;e<n.length;e++){const i=n[e];if(u(i))o&&!i.getFormat()&&i.setFormat(o),l.push(i);else if(r.push(i),e===n.length-1||e<n.length-1&&u(n[e+1])){const e=t();e.setFormat(o),e.append(...r),l.push(e),r=[]}}return l}export{m as $generateHtmlFromNodes,h as $generateNodesFromDOM};\n"],"names":["h","e","n","t","body","childNodes","o","l","length","r","x","has","nodeName","y","concat","getNextSibling","a","insertAfter","f","getChildren","insertBefore","remove","m","document","window","global","Error","createElement","g","innerHTML","c","u","isSelected","excludeFromCopy","d","i","p","_nodes","get","getType","exportDOM","element","after","w","createDocumentFragment","extractWithChild","s","append","call","replaceChildren","replaceWith","Set","Map","_htmlConversions","toLowerCase","priority","conversion","b","C","node","Array","isArray","push","forChild","set","S","v","N","style","textAlign","getFormat","setFormat","nextSibling","previousSibling"],"mappings":"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"}