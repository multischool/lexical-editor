{"version":3,"file":"band.js","sources":["../../../../node_modules/d3-scale/src/band.js"],"sourcesContent":["import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n"],"names":["band","step","bandwidth","scale","ordinal","unknown","undefined","domain","ordinalRange","range","r0","r1","round","paddingInner","paddingOuter","align","rescale","n","length","reverse","start","stop","Math","max","floor","values","sequence","map","i","_","arguments","rangeRound","padding","min","copy","initRange","apply"],"mappings":"6GAIe,SAASA,IACtB,IAKIC,EACAC,EANAC,EAAQC,IAAUC,aAAQC,GAC1BC,EAASJ,EAAMI,OACfC,EAAeL,EAAMM,MACrBC,EAAK,EACLC,EAAK,EAGLC,GAAQ,EACRC,EAAe,EACfC,EAAe,EACfC,EAAQ,GAIZ,SAASC,IACP,IAAIC,EAAIV,IAASW,OACbC,EAAUR,EAAKD,EACfU,EAAQD,EAAUR,EAAKD,EACvBW,EAAOF,EAAUT,EAAKC,EAC1BV,GAAQoB,EAAOD,GAASE,KAAKC,IAAI,EAAGN,EAAIJ,EAA8B,EAAfC,GACnDF,IAAOX,EAAOqB,KAAKE,MAAMvB,IAC7BmB,IAAUC,EAAOD,EAAQnB,GAAQgB,EAAIJ,IAAiBE,EACtDb,EAAYD,GAAQ,EAAIY,GACpBD,IAAOQ,EAAQE,KAAKV,MAAMQ,GAAQlB,EAAYoB,KAAKV,MAAMV,IAC7D,IAAIuB,EAASC,EAAST,GAAGU,KAAI,SAASC,GAAK,OAAOR,EAAQnB,EAAO2B,CAAI,IACrE,OAAOpB,EAAaW,EAAUM,EAAON,UAAYM,EAClD,CAkDD,cAhEOtB,EAAME,QAgBbF,EAAMI,OAAS,SAASsB,GACtB,OAAOC,UAAUZ,QAAUX,EAAOsB,GAAIb,KAAaT,GACvD,EAEEJ,EAAMM,MAAQ,SAASoB,GACrB,OAAOC,UAAUZ,SAAWR,EAAIC,GAAMkB,EAAGnB,GAAMA,EAAIC,GAAMA,EAAIK,KAAa,CAACN,EAAIC,EACnF,EAEER,EAAM4B,WAAa,SAASF,GAC1B,OAAQnB,EAAIC,GAAMkB,EAAGnB,GAAMA,EAAIC,GAAMA,EAAIC,GAAQ,EAAMI,GAC3D,EAEEb,EAAMD,UAAY,WAChB,OAAOA,CACX,EAEEC,EAAMF,KAAO,WACX,OAAOA,CACX,EAEEE,EAAMS,MAAQ,SAASiB,GACrB,OAAOC,UAAUZ,QAAUN,IAAUiB,EAAGb,KAAaJ,CACzD,EAEET,EAAM6B,QAAU,SAASH,GACvB,OAAOC,UAAUZ,QAAUL,EAAeS,KAAKW,IAAI,EAAGnB,GAAgBe,GAAIb,KAAaH,CAC3F,EAEEV,EAAMU,aAAe,SAASgB,GAC5B,OAAOC,UAAUZ,QAAUL,EAAeS,KAAKW,IAAI,EAAGJ,GAAIb,KAAaH,CAC3E,EAEEV,EAAMW,aAAe,SAASe,GAC5B,OAAOC,UAAUZ,QAAUJ,GAAgBe,EAAGb,KAAaF,CAC/D,EAEEX,EAAMY,MAAQ,SAASc,GACrB,OAAOC,UAAUZ,QAAUH,EAAQO,KAAKC,IAAI,EAAGD,KAAKW,IAAI,EAAGJ,IAAKb,KAAaD,CACjF,EAEEZ,EAAM+B,KAAO,WACX,OAAOlC,EAAKO,IAAU,CAACG,EAAIC,IACtBC,MAAMA,GACNC,aAAaA,GACbC,aAAaA,GACbC,MAAMA,EACf,EAESoB,EAAUC,MAAMpB,IAAWc,UACpC"}