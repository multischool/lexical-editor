{"version":3,"file":"linear.js","sources":["../../../../node_modules/d3-scale/src/linear.js"],"sourcesContent":["import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n"],"names":["linearish","scale","domain","ticks","count","d","length","tickFormat","specifier","nice","prestep","step","i0","i1","start","stop","maxIter","tickIncrement","Math","floor","ceil","linear","continuous","copy","initRange","apply","arguments"],"mappings":"8KAKO,SAASA,EAAUC,GACxB,IAAIC,EAASD,EAAMC,OAkDnB,OAhDAD,EAAME,MAAQ,SAASC,GACrB,IAAIC,EAAIH,IACR,OAAOC,EAAME,EAAE,GAAIA,EAAEA,EAAEC,OAAS,GAAa,MAATF,EAAgB,GAAKA,EAC7D,EAEEH,EAAMM,WAAa,SAASH,EAAOI,GACjC,IAAIH,EAAIH,IACR,OAAOK,EAAWF,EAAE,GAAIA,EAAEA,EAAEC,OAAS,GAAa,MAATF,EAAgB,GAAKA,EAAOI,EACzE,EAEEP,EAAMQ,KAAO,SAASL,GACP,MAATA,IAAeA,EAAQ,IAE3B,IAKIM,EACAC,EANAN,EAAIH,IACJU,EAAK,EACLC,EAAKR,EAAEC,OAAS,EAChBQ,EAAQT,EAAEO,GACVG,EAAOV,EAAEQ,GAGTG,EAAU,GAOd,IALID,EAAOD,IACTH,EAAOG,EAAOA,EAAQC,EAAMA,EAAOJ,EACnCA,EAAOC,EAAIA,EAAKC,EAAIA,EAAKF,GAGpBK,KAAY,GAAG,CAEpB,IADAL,EAAOM,EAAcH,EAAOC,EAAMX,MACrBM,EAGX,OAFAL,EAAEO,GAAME,EACRT,EAAEQ,GAAME,EACDb,EAAOG,GACT,GAAIM,EAAO,EAChBG,EAAQI,KAAKC,MAAML,EAAQH,GAAQA,EACnCI,EAAOG,KAAKE,KAAKL,EAAOJ,GAAQA,MAC3B,MAAIA,EAAO,GAIhB,MAHAG,EAAQI,KAAKE,KAAKN,EAAQH,GAAQA,EAClCI,EAAOG,KAAKC,MAAMJ,EAAOJ,GAAQA,CAGlC,CACDD,EAAUC,CACX,CAED,OAAOV,CACX,EAESA,CACT,CAEe,SAASoB,IACtB,IAAIpB,EAAQqB,IAQZ,OANArB,EAAMsB,KAAO,WACX,OAAOA,EAAKtB,EAAOoB,IACvB,EAEEG,EAAUC,MAAMxB,EAAOyB,WAEhB1B,EAAUC,EACnB"}