{"version":3,"file":"table-hover-actions-plugin.jsx","sourceRoot":"","sources":["table-hover-actions-plugin.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client'\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { useEffect, useMemo, useRef, useState, JSX } from 'react'\nimport * as React from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport {\n  $getTableColumnIndexFromTableCellNode,\n  $getTableRowIndexFromTableCellNode,\n  $insertTableColumn__EXPERIMENTAL,\n  $insertTableRow__EXPERIMENTAL,\n  $isTableCellNode,\n  $isTableNode,\n  TableCellNode,\n  TableNode,\n  TableRowNode,\n} from '@lexical/table'\nimport { $findMatchingParent, mergeRegister } from '@lexical/utils'\nimport { $getNearestNodeFromDOMNode, NodeKey } from 'lexical'\nimport { PlusIcon } from 'lucide-react'\nimport { createPortal } from 'react-dom'\n\nimport { useDebounce } from '../editor-hooks/use-debounce'\n\nconst BUTTON_WIDTH_PX = 20\n\nfunction TableHoverActionsContainer({\n  anchorElem,\n}: {\n  anchorElem: HTMLElement\n}): JSX.Element | null {\n  const [editor] = useLexicalComposerContext()\n  const isEditable = useLexicalEditable()\n  const [isShownRow, setShownRow] = useState<boolean>(false)\n  const [isShownColumn, setShownColumn] = useState<boolean>(false)\n  const [shouldListenMouseMove, setShouldListenMouseMove] =\n    useState<boolean>(false)\n  const [position, setPosition] = useState({})\n  const tableSetRef = useRef<Set<NodeKey>>(new Set())\n  const tableCellDOMNodeRef = useRef<HTMLElement | null>(null)\n\n  const debouncedOnMouseMove = useDebounce(\n    (event: MouseEvent) => {\n      const { isOutside, tableDOMNode } = getMouseInfo(event)\n\n      if (isOutside) {\n        setShownRow(false)\n        setShownColumn(false)\n        return\n      }\n\n      if (!tableDOMNode) {\n        return\n      }\n\n      tableCellDOMNodeRef.current = tableDOMNode\n\n      let hoveredRowNode: TableCellNode | null = null\n      let hoveredColumnNode: TableCellNode | null = null\n      let tableDOMElement: HTMLElement | null = null\n\n      editor.update(() => {\n        const maybeTableCell = $getNearestNodeFromDOMNode(tableDOMNode)\n\n        if ($isTableCellNode(maybeTableCell)) {\n          const table = $findMatchingParent(maybeTableCell, (node) =>\n            $isTableNode(node)\n          )\n          if (!$isTableNode(table)) {\n            return\n          }\n\n          tableDOMElement = editor.getElementByKey(table?.getKey())\n\n          if (tableDOMElement) {\n            const rowCount = table.getChildrenSize()\n            const colCount = (\n              (table as TableNode).getChildAtIndex(0) as TableRowNode\n            )?.getChildrenSize()\n\n            const rowIndex = $getTableRowIndexFromTableCellNode(maybeTableCell)\n            const colIndex =\n              $getTableColumnIndexFromTableCellNode(maybeTableCell)\n\n            if (rowIndex === rowCount - 1) {\n              hoveredRowNode = maybeTableCell\n            } else if (colIndex === colCount - 1) {\n              hoveredColumnNode = maybeTableCell\n            }\n          }\n        }\n      })\n\n      if (tableDOMElement) {\n        const {\n          width: tableElemWidth,\n          y: tableElemY,\n          right: tableElemRight,\n          left: tableElemLeft,\n          bottom: tableElemBottom,\n          height: tableElemHeight,\n        } = (tableDOMElement as HTMLTableElement).getBoundingClientRect()\n\n        const { y: editorElemY, left: editorElemLeft } =\n          anchorElem.getBoundingClientRect()\n\n        if (hoveredRowNode) {\n          setShownColumn(false)\n          setShownRow(true)\n          setPosition({\n            height: BUTTON_WIDTH_PX,\n            left: tableElemLeft - editorElemLeft,\n            top: tableElemBottom - editorElemY + 5,\n            width: tableElemWidth,\n          })\n        } else if (hoveredColumnNode) {\n          setShownColumn(true)\n          setShownRow(false)\n          setPosition({\n            height: tableElemHeight,\n            left: tableElemRight - editorElemLeft + 5,\n            top: tableElemY - editorElemY,\n            width: BUTTON_WIDTH_PX,\n          })\n        }\n      }\n    },\n    50,\n    250\n  )\n\n  // Hide the buttons on any table dimensions change to prevent last row cells\n  // overlap behind the 'Add Row' button when text entry changes cell height\n  const tableResizeObserver = useMemo(() => {\n    return new ResizeObserver(() => {\n      setShownRow(false)\n      setShownColumn(false)\n    })\n  }, [])\n\n  useEffect(() => {\n    if (!shouldListenMouseMove) {\n      return\n    }\n\n    document.addEventListener('mousemove', debouncedOnMouseMove)\n\n    return () => {\n      setShownRow(false)\n      setShownColumn(false)\n      debouncedOnMouseMove.cancel()\n      document.removeEventListener('mousemove', debouncedOnMouseMove)\n    }\n  }, [shouldListenMouseMove, debouncedOnMouseMove])\n\n  useEffect(() => {\n    return mergeRegister(\n      editor.registerMutationListener(\n        TableNode,\n        (mutations) => {\n          editor.getEditorState().read(() => {\n            for (const [key, type] of Array.from(mutations)) {\n              const tableDOMElement = editor.getElementByKey(key)\n              switch (type) {\n                case 'created':\n                  tableSetRef.current.add(key)\n                  setShouldListenMouseMove(tableSetRef.current.size > 0)\n                  if (tableDOMElement) {\n                    tableResizeObserver.observe(tableDOMElement)\n                  }\n                  break\n\n                case 'destroyed':\n                  tableSetRef.current.delete(key)\n                  setShouldListenMouseMove(tableSetRef.current.size > 0)\n                  // Reset resize observers\n                  tableResizeObserver.disconnect()\n                  tableSetRef.current.forEach((tableKey: NodeKey) => {\n                    const tableElement = editor.getElementByKey(tableKey)\n                    if (tableElement) {\n                      tableResizeObserver.observe(tableElement)\n                    }\n                  })\n                  break\n\n                default:\n                  break\n              }\n            }\n          })\n        },\n        { skipInitialization: false }\n      )\n    )\n  }, [editor, tableResizeObserver])\n\n  const insertAction = (insertRow: boolean) => {\n    editor.update(() => {\n      if (tableCellDOMNodeRef.current) {\n        const maybeTableNode = $getNearestNodeFromDOMNode(\n          tableCellDOMNodeRef.current\n        )\n        maybeTableNode?.selectEnd()\n        if (insertRow) {\n          $insertTableRow__EXPERIMENTAL()\n          setShownRow(false)\n        } else {\n          $insertTableColumn__EXPERIMENTAL()\n          setShownColumn(false)\n        }\n      }\n    })\n  }\n\n  if (!isEditable) {\n    return null\n  }\n\n  return (\n    <>\n      {isShownRow && (\n        <button\n          className={\n            'EditorTheme__tableAddRows absolute flex w-[calc(100%-25px)] cursor-pointer items-center justify-center border-0 bg-accent hover:bg-accent/80'\n          }\n          style={{ ...position }}\n          onClick={() => insertAction(true)}\n        >\n          <PlusIcon className=\"h-4 w-4\" />\n        </button>\n      )}\n      {isShownColumn && (\n        <button\n          className={\n            'EditorTheme__tableAddColumns absolute flex w-[calc(100%-25px)] cursor-pointer items-center justify-center border-0 bg-accent hover:bg-accent/80'\n          }\n          style={{ ...position }}\n          onClick={() => insertAction(false)}\n        >\n          <PlusIcon className=\"h-4 w-4\" />\n        </button>\n      )}\n    </>\n  )\n}\n\nfunction getMouseInfo(event: MouseEvent): {\n  tableDOMNode: HTMLElement | null\n  isOutside: boolean\n} {\n  const target = event.target\n\n  if (target && target instanceof HTMLElement) {\n    const tableDOMNode = target.closest<HTMLElement>(\n      'td.EditorTheme__tableCell, th.EditorTheme__tableCell'\n    )\n\n    const isOutside = !(\n      tableDOMNode ||\n      target.closest<HTMLElement>('button.EditorTheme__tableAddRows') ||\n      target.closest<HTMLElement>('button.EditorTheme__tableAddColumns') ||\n      target.closest<HTMLElement>('div.TableCellResizer__resizer')\n    )\n\n    return { isOutside, tableDOMNode }\n  } else {\n    return { isOutside: true, tableDOMNode: null }\n  }\n}\n\nexport function TableHoverActionsPlugin({\n  anchorElem,\n}: {\n  anchorElem: HTMLDivElement | null\n}): React.ReactPortal | null {\n  const isEditable = useLexicalEditable()\n\n  if (!anchorElem) {\n    return null\n  }\n\n  return isEditable\n    ? createPortal(\n        <TableHoverActionsContainer anchorElem={anchorElem} />,\n        anchorElem\n      )\n    : null\n}\n"]}