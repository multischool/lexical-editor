{"version":3,"file":"set-floating-elem-position.js","sourceRoot":"","sources":["set-floating-elem-position.ts"],"names":[],"mappings":"AAAA,MAAM,YAAY,GAAG,EAAE,CAAA;AACvB,MAAM,iBAAiB,GAAG,CAAC,CAAA;AAE3B,MAAM,UAAU,uBAAuB,CACrC,UAA0B,EAC1B,YAAyB,EACzB,UAAuB,EACvB,SAAkB,KAAK,EACvB,cAAsB,YAAY,EAClC,mBAA2B,iBAAiB;IAE5C,MAAM,YAAY,GAAG,UAAU,CAAC,aAAa,CAAA;IAE7C,IAAI,UAAU,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QACzC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAA;QAChC,YAAY,CAAC,KAAK,CAAC,SAAS,GAAG,+BAA+B,CAAA;QAC9D,OAAM;IACR,CAAC;IAED,MAAM,gBAAgB,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAA;IAC7D,MAAM,iBAAiB,GAAG,UAAU,CAAC,qBAAqB,EAAE,CAAA;IAC5D,MAAM,kBAAkB,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAA;IAE/D,IAAI,GAAG,GAAG,UAAU,CAAC,GAAG,GAAG,gBAAgB,CAAC,MAAM,GAAG,WAAW,CAAA;IAChE,IAAI,IAAI,GAAG,UAAU,CAAC,IAAI,GAAG,gBAAgB,CAAA;IAE7C,IAAI,GAAG,GAAG,kBAAkB,CAAC,GAAG,EAAE,CAAC;QACjC,4DAA4D;QAC5D,GAAG;YACD,gBAAgB,CAAC,MAAM;gBACvB,UAAU,CAAC,MAAM;gBACjB,WAAW,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;IAClC,CAAC;IAED,IAAI,IAAI,GAAG,gBAAgB,CAAC,KAAK,GAAG,kBAAkB,CAAC,KAAK,EAAE,CAAC;QAC7D,IAAI,GAAG,kBAAkB,CAAC,KAAK,GAAG,gBAAgB,CAAC,KAAK,GAAG,gBAAgB,CAAA;IAC7E,CAAC;IAED,GAAG,IAAI,iBAAiB,CAAC,GAAG,CAAA;IAC5B,IAAI,IAAI,iBAAiB,CAAC,IAAI,CAAA;IAE9B,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAA;IAChC,YAAY,CAAC,KAAK,CAAC,SAAS,GAAG,aAAa,IAAI,OAAO,GAAG,KAAK,CAAA;AACjE,CAAC","sourcesContent":["const VERTICAL_GAP = 10\nconst HORIZONTAL_OFFSET = 5\n\nexport function setFloatingElemPosition(\n  targetRect: DOMRect | null,\n  floatingElem: HTMLElement,\n  anchorElem: HTMLElement,\n  isLink: boolean = false,\n  verticalGap: number = VERTICAL_GAP,\n  horizontalOffset: number = HORIZONTAL_OFFSET\n): void {\n  const scrollerElem = anchorElem.parentElement\n\n  if (targetRect === null || !scrollerElem) {\n    floatingElem.style.opacity = '0'\n    floatingElem.style.transform = 'translate(-10000px, -10000px)'\n    return\n  }\n\n  const floatingElemRect = floatingElem.getBoundingClientRect()\n  const anchorElementRect = anchorElem.getBoundingClientRect()\n  const editorScrollerRect = scrollerElem.getBoundingClientRect()\n\n  let top = targetRect.top - floatingElemRect.height - verticalGap\n  let left = targetRect.left - horizontalOffset\n\n  if (top < editorScrollerRect.top) {\n    // adjusted height for link element if the element is at top\n    top +=\n      floatingElemRect.height +\n      targetRect.height +\n      verticalGap * (isLink ? 9 : 2)\n  }\n\n  if (left + floatingElemRect.width > editorScrollerRect.right) {\n    left = editorScrollerRect.right - floatingElemRect.width - horizontalOffset\n  }\n\n  top -= anchorElementRect.top\n  left -= anchorElementRect.left\n\n  floatingElem.style.opacity = '1'\n  floatingElem.style.transform = `translate(${left}px, ${top}px)`\n}\n"]}