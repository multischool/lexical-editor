{"version":3,"file":"images-plugin.jsx","sourceRoot":"","sources":["images-plugin.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAA;AAEZ;;;;;;GAMG;AACH,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAO,MAAM,OAAO,CAAA;AACxD,OAAO,KAAK,KAAK,MAAM,OAAO,CAAA;AAE9B,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAA;AACjF,OAAO,EAAE,kBAAkB,EAAE,aAAa,EAAE,MAAM,gBAAgB,CAAA;AAClE,OAAO,EACL,oBAAoB,EACpB,qBAAqB,EACrB,aAAa,EACb,YAAY,EACZ,gBAAgB,EAChB,mBAAmB,EACnB,aAAa,EACb,uBAAuB,EACvB,qBAAqB,EACrB,oBAAoB,EACpB,gBAAgB,EAChB,iBAAiB,EACjB,YAAY,EAGZ,aAAa,GACd,MAAM,SAAS,CAAA;AAEhB,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAA;AACxC,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAA;AAC9C,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAA;AACtC,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAA;AACtC,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,eAAe,CAAA;AAExE,OAAO,EACL,gBAAgB,EAChB,YAAY,EACZ,SAAS,GAEV,MAAM,qBAAqB,CAAA;AAC5B,OAAO,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAA;AAInD,MAAM,eAAe,GAAG,CAAC,YAA2B,EAAoB,EAAE,CACxE,WAAW,CAAC,CAAC,CAAC,CAAC,YAAY,IAAI,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;AAE9D,MAAM,CAAC,MAAM,oBAAoB,GAC/B,aAAa,CAAC,sBAAsB,CAAC,CAAA;AAEvC,+CAA+C;AAC/C,MAAM,CAAC,MAAM,oBAAoB,GAC/B,aAAa,CAAC,sBAAsB,CAAC,CAAA;AAEvC;;;;GAIG;AACH,KAAK,UAAU,0BAA0B,CAAC,IAAU;IAClD,IAAI,CAAC;QACH,8CAA8C;QAC9C,MAAM,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;QAChC,QAAQ,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAE/B,+CAA+C;QAC/C,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,mBAAmB,EAAE;YAChD,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,QAAQ;SACf,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC;YACjB,MAAM,IAAI,KAAK,CAAC,8BAA8B,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC;QACnE,CAAC;QAED,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;QAEnC,gEAAgE;QAChE,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;QAC/C,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC;AAED,MAAM,UAAU,wBAAwB,CAAC,EACvC,OAAO,GAGR;IACC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAA;IAClC,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAA;IAE1C,MAAM,UAAU,GAAG,GAAG,KAAK,EAAE,CAAA;IAE7B,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,iBAAiB,CAC9B;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,YAAY,CACzB;QAAA,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,EAAE,KAAK,CAC3C;QAAA,CAAC,KAAK,CACJ,EAAE,CAAC,WAAW,CACd,WAAW,CAAC,yCAAyC,CACrD,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CACxC,KAAK,CAAC,CAAC,GAAG,CAAC,CACX,YAAY,CAAC,uBAAuB,EAExC;MAAA,EAAE,GAAG,CACL;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,YAAY,CACzB;QAAA,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,CACzC;QAAA,CAAC,KAAK,CACJ,EAAE,CAAC,UAAU,CACb,WAAW,CAAC,uBAAuB,CACnC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAC5C,KAAK,CAAC,CAAC,OAAO,CAAC,CACf,YAAY,CAAC,4BAA4B,EAE7C;MAAA,EAAE,GAAG,CACL;MAAA,CAAC,YAAY,CACX;QAAA,CAAC,MAAM,CACL,IAAI,CAAC,QAAQ,CACb,QAAQ,CAAC,CAAC,UAAU,CAAC,CACrB,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC,CACzC,YAAY,CAAC,yBAAyB,CAEtC;;QACF,EAAE,MAAM,CACV;MAAA,EAAE,YAAY,CAChB;IAAA,EAAE,GAAG,CAAC,CACP,CAAA;AACH,CAAC;AAED,MAAM,UAAU,6BAA6B,CAAC,EAC5C,OAAO,EACP,OAAO,EACP,aAAa,GAKd;IACC,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,GAAG,QAAQ,CAAS,EAAE,CAAC,CAAC;IAC3C,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAS,EAAE,CAAC,CAAC;IACnD,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAC/D,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAc,IAAI,CAAC,CAAC;IACpD,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC,CAAC;IACpE,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,QAAQ,CAAS,EAAE,CAAC,CAAC;IAEzD,MAAM,UAAU,GAAG,CAAC,IAAI,IAAI,WAAW,CAAC;IAExC,MAAM,gBAAgB,GAAG,CAAC,KAAsB,EAAE,EAAE;QAClD,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC9B,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAClB,cAAc,CAAC,IAAI,CAAC,CAAC;YAErB,mBAAmB;YACnB,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;YAChC,MAAM,CAAC,MAAM,GAAG;gBACd,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,QAAQ,EAAE,CAAC;oBACtC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;gBAC/B,CAAC;YACH,CAAC,CAAC;YACF,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAE/B,yCAAyC;YACzC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACb,MAAM,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC/B,iEAAiE;gBACjE,MAAM,oBAAoB,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACxE,MAAM,aAAa,GAAG,oBAAoB,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;gBACjE,UAAU,CAAC,aAAa,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC;IACH,CAAC,CAAC;IAEF,MAAM,YAAY,GAAG,KAAK,IAAI,EAAE;QAC9B,IAAI,CAAC,IAAI;YAAE,OAAO;QAElB,cAAc,CAAC,IAAI,CAAC,CAAC;QACrB,cAAc,CAAC,IAAI,CAAC,CAAC;QAErB,IAAI,CAAC;YACH,qCAAqC;YACrC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAE3B,IAAI,CAAC,aAAa,EAAE,CAAC;gBACnB,mDAAmD;gBACnD,IAAI,CAAC;oBACH,MAAM,GAAG,GAAG,MAAM,0BAA0B,CAAC,IAAI,CAAC,CAAC;oBACnD,MAAM,CAAC,GAAG,CAAC,CAAC;oBACZ,OAAO,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;oBAC/B,IAAI,OAAO;wBAAE,OAAO,EAAE,CAAC;gBACzB,CAAC;gBAAC,OAAO,WAAW,EAAE,CAAC;oBACrB,cAAc,CAAC,mFAAmF,CAAC,CAAC;oBACpG,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,WAAW,CAAC,CAAC;gBACtD,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,yCAAyC;gBACzC,MAAM,MAAM,GAAG,MAAM,aAAa,CAAC,IAAI,CAAC,CAAC;gBACzC,MAAM,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC;gBAElC,qCAAqC;gBACrC,MAAM,CAAC,cAAc,CAAC,CAAC;gBAEvB,+CAA+C;gBAC/C,OAAO,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,cAAc,EAAE,CAAC,CAAC;gBAE1C,6BAA6B;gBAC7B,IAAI,OAAO;oBAAE,OAAO,EAAE,CAAC;YACzB,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,cAAc,CAAC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,qDAAqD,CAAC,CAAC;YAC/G,OAAO,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QACxC,CAAC;gBAAS,CAAC;YACT,cAAc,CAAC,KAAK,CAAC,CAAC;QACxB,CAAC;IACH,CAAC,CAAC;IAEF,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,iBAAiB,CAC9B;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,YAAY,CACzB;QAAA,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,YAAY,EAAE,KAAK,CACjD;QAAA,CAAC,KAAK,CACJ,EAAE,CAAC,cAAc,CACjB,IAAI,CAAC,MAAM,CACX,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAClD,MAAM,CAAC,SAAS,CAChB,YAAY,CAAC,yBAAyB,EAE1C;MAAA,EAAE,GAAG,CAEL;;MAAA,CAAC,UAAU,IAAI,CACb,CAAC,GAAG,CAAC,SAAS,CAAC,yBAAyB,CACtC;UAAA,CAAC,GAAG,CACF,GAAG,CAAC,CAAC,UAAU,CAAC,CAChB,GAAG,CAAC,SAAS,CACb,SAAS,CAAC,sEAAsE,EAEpF;QAAA,EAAE,GAAG,CAAC,CACP,CAED;;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,YAAY,CACzB;QAAA,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,CACzC;QAAA,CAAC,KAAK,CACJ,EAAE,CAAC,UAAU,CACb,WAAW,CAAC,8BAA8B,CAC1C,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAC5C,KAAK,CAAC,CAAC,OAAO,CAAC,CACf,YAAY,CAAC,4BAA4B,EAE7C;MAAA,EAAE,GAAG,CAEL;;MAAA,CAAC,WAAW,IAAI,CACd,CAAC,GAAG,CAAC,SAAS,CAAC,4CAA4C,CAAC,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAChF,CAED;;MAAA,CAAC,YAAY,CACX;QAAA,CAAC,MAAM,CACL,IAAI,CAAC,QAAQ,CACb,QAAQ,CAAC,CAAC,UAAU,CAAC,CACrB,OAAO,CAAC,CAAC,YAAY,CAAC,CACtB,YAAY,CAAC,6BAA6B,CAE1C;UAAA,CAAC,WAAW,CAAC,CAAC,CAAC,CACb,CAAC,IAAI,CAAC,SAAS,CAAC,yBAAyB,CACvC;cAAA,CAAC,GAAG,CAAC,SAAS,CAAC,4CAA4C,CAAC,KAAK,CAAC,4BAA4B,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAC5H;gBAAA,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,MAAM,CACpG;gBAAA,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,iHAAiH,CAAC,EAAE,IAAI,CAC7K;cAAA,EAAE,GAAG,CACL;;YACF,EAAE,IAAI,CAAC,CACR,CAAC,CAAC,CAAC,CACF,iBAAiB,CAClB,CACH;QAAA,EAAE,MAAM,CACV;MAAA,EAAE,YAAY,CAChB;IAAA,EAAE,GAAG,CAAC,CACP,CAAC;AACJ,CAAC;AACD,MAAM,UAAU,iBAAiB,CAAC,EAChC,YAAY,EACZ,OAAO,EACP,aAAa,GAKd;IACC,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;IAEjC,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;IAG5C,SAAS,CAAC,GAAG,EAAE;QACb,WAAW,CAAC,OAAO,GAAG,KAAK,CAAA;QAC3B,MAAM,OAAO,GAAG,CAAC,CAAgB,EAAE,EAAE;YACnC,WAAW,CAAC,OAAO,GAAG,CAAC,CAAC,MAAM,CAAA;QAChC,CAAC,CAAA;QACD,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;QAC7C,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;QAClD,CAAC,CAAA;IACH,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC,CAAA;IAElB,MAAM,OAAO,GAAG,CAAC,OAA2B,EAAE,EAAE;QAC9C,YAAY,CAAC,eAAe,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAA;QAC3D,OAAO,EAAE,CAAA;IACX,CAAC,CAAA;IAED,OAAO,CACL,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CACtB;MAAA,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAC1B;QAAA,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CACzC;;QACF,EAAE,WAAW,CACb;QAAA,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAC1C;;QACF,EAAE,WAAW,CACf;MAAA,EAAE,QAAQ,CACV;MAAA,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CACtB;QAAA,CAAC,wBAAwB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,EAC7C;MAAA,EAAE,WAAW,CACb;MAAA,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,CACvB;QAAA,CAAC,6BAA6B,CAC5B,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,aAAa,CAAC,CAAC,aAAa,CAAC,EAEjC;MAAA,EAAE,WAAW,CACf;IAAA,EAAE,IAAI,CAAC,CACR,CAAA;AACH,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,EAC3B,eAAe,GAIhB;IACC,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAA;IAK5C,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC;YAClC,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAA;QACrE,CAAC;QAED,OAAO,aAAa,CAClB,MAAM,CAAC,eAAe,CACpB,oBAAoB,EACpB,CAAC,OAAO,EAAE,EAAE;YACV,MAAM,SAAS,GAAG,gBAAgB,CAAC,OAAO,CAAC,CAAA;YAC3C,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC,CAAA;YACzB,IAAI,mBAAmB,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC,EAAE,CAAC;gBACtD,kBAAkB,CAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,SAAS,EAAE,CAAA;YACjE,CAAC;YAED,OAAO,IAAI,CAAA;QACb,CAAC,EACD,uBAAuB,CACxB,EACD,MAAM,CAAC,eAAe,CACpB,iBAAiB,EACjB,CAAC,KAAK,EAAE,EAAE;YACR,OAAO,YAAY,CAAC,KAAK,CAAC,CAAA;QAC5B,CAAC,EACD,qBAAqB,CACtB,EACD,MAAM,CAAC,eAAe,CACpB,gBAAgB,EAChB,CAAC,KAAK,EAAE,EAAE;YACR,OAAO,WAAW,CAAC,KAAK,CAAC,CAAA;QAC3B,CAAC,EACD,oBAAoB,CACrB,EACD,MAAM,CAAC,eAAe,CACpB,YAAY,EACZ,CAAC,KAAK,EAAE,EAAE;YACR,OAAO,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAA;QAC/B,CAAC,EACD,qBAAqB,CACtB,CAEF,CAAA;IACH,CAAC,EAAE,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAA;IAE7B,OAAO,IAAI,CAAA;AACb,CAAC;AAID,SAAS,YAAY,CAAC,KAAgB;IACpC,MAAM,IAAI,GAAG,wBAAwB,EAAE,CAAA;IACvC,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO,KAAK,CAAA;IACd,CAAC;IACD,MAAM,YAAY,GAAG,KAAK,CAAC,YAAY,CAAA;IACvC,IAAI,CAAC,YAAY,EAAE,CAAC;QAClB,OAAO,KAAK,CAAA;IACd,CAAC;IACD,MAAM,iBAAiB,GACrB,gFAAgF,CAAA;IAClF,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;IACzC,GAAG,CAAC,GAAG,GAAG,iBAAiB,CAAA;IAC3B,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,GAAG,CAAC,CAAA;IACvC,YAAY,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IACpC,YAAY,CAAC,OAAO,CAClB,4BAA4B,EAC5B,IAAI,CAAC,SAAS,CAAC;QACb,IAAI,EAAE;YACJ,OAAO,EAAE,IAAI,CAAC,SAAS;YACvB,OAAO,EAAE,IAAI,CAAC,SAAS;YACvB,MAAM,EAAE,IAAI,CAAC,QAAQ;YACrB,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE;YAClB,QAAQ,EAAE,IAAI,CAAC,UAAU;YACzB,WAAW,EAAE,IAAI,CAAC,aAAa;YAC/B,GAAG,EAAE,IAAI,CAAC,KAAK;YACf,KAAK,EAAE,IAAI,CAAC,OAAO;SACpB;QACD,IAAI,EAAE,OAAO;KACd,CAAC,CACH,CAAA;IAED,OAAO,IAAI,CAAA;AACb,CAAC;AAED,SAAS,WAAW,CAAC,KAAgB;IACnC,MAAM,IAAI,GAAG,wBAAwB,EAAE,CAAA;IACvC,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO,KAAK,CAAA;IACd,CAAC;IACD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC;QACzB,KAAK,CAAC,cAAc,EAAE,CAAA;IACxB,CAAC;IACD,OAAO,IAAI,CAAA;AACb,CAAC;AAED,SAAS,OAAO,CAAC,KAAgB,EAAE,MAAqB;IACtD,MAAM,IAAI,GAAG,wBAAwB,EAAE,CAAA;IACvC,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO,KAAK,CAAA;IACd,CAAC;IACD,MAAM,IAAI,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAA;IACpC,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO,KAAK,CAAA;IACd,CAAC;IACD,KAAK,CAAC,cAAc,EAAE,CAAA;IACtB,IAAI,YAAY,CAAC,KAAK,CAAC,EAAE,CAAC;QACxB,MAAM,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAA;QACrC,IAAI,CAAC,MAAM,EAAE,CAAA;QACb,MAAM,cAAc,GAAG,qBAAqB,EAAE,CAAA;QAC9C,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE,CAAC;YAC1C,cAAc,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;QACrC,CAAC;QACD,aAAa,CAAC,cAAc,CAAC,CAAA;QAC7B,MAAM,CAAC,eAAe,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAA;IACpD,CAAC;IACD,OAAO,IAAI,CAAA;AACb,CAAC;AAED,SAAS,wBAAwB;IAC/B,MAAM,SAAS,GAAG,aAAa,EAAE,CAAA;IACjC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,CAAC;QACjC,OAAO,IAAI,CAAA;IACb,CAAC;IACD,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAA;IAClC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;IACrB,OAAO,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAA;AACzC,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAgB;;IACxC,MAAM,QAAQ,GAAG,MAAA,KAAK,CAAC,YAAY,0CAAE,OAAO,CAAC,4BAA4B,CAAC,CAAA;IAC1E,IAAI,CAAC,QAAQ,EAAE,CAAC;QACd,OAAO,IAAI,CAAA;IACb,CAAC;IACD,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;IAC3C,IAAI,IAAI,KAAK,OAAO,EAAE,CAAC;QACrB,OAAO,IAAI,CAAA;IACb,CAAC;IAED,OAAO,IAAI,CAAA;AACb,CAAC;AASD,SAAS,YAAY,CAAC,KAAgB;IACpC,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAA;IAC3B,OAAO,CAAC,CAAC,CACP,MAAM;QACN,MAAM,YAAY,WAAW;QAC7B,CAAC,MAAM,CAAC,OAAO,CAAC,yBAAyB,CAAC;QAC1C,MAAM,CAAC,aAAa;QACpB,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAC1D,CAAA;AACH,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAgB;IACxC,IAAI,KAAK,CAAA;IACT,MAAM,MAAM,GAAG,KAAK,CAAC,MAAmC,CAAA;IACxD,MAAM,YAAY,GAChB,MAAM,IAAI,IAAI;QACZ,CAAC,CAAC,IAAI;QACN,CAAC,CAAC,MAAM,CAAC,QAAQ,KAAK,CAAC;YACrB,CAAC,CAAE,MAAmB,CAAC,WAAW;YAClC,CAAC,CAAE,MAAkB,CAAC,aAAa,CAAC,WAAW,CAAA;IACrD,MAAM,YAAY,GAAG,eAAe,CAAC,YAAY,CAAC,CAAA;IAClD,IAAI,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACjC,KAAK,GAAG,QAAQ,CAAC,mBAAmB,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,CAAA;IACpE,CAAC;SAAM,IAAI,KAAK,CAAC,WAAW,IAAI,YAAY,KAAK,IAAI,EAAE,CAAC;QACtD,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,WAAW,IAAI,CAAC,CAAC,CAAA;QAChE,KAAK,GAAG,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;IACpC,CAAC;SAAM,CAAC;QACN,MAAM,KAAK,CAAC,wCAAwC,CAAC,CAAA;IACvD,CAAC;IAED,OAAO,KAAK,CAAA;AACd,CAAC","sourcesContent":["'use client'\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { useEffect, useRef, useState, JSX } from 'react'\nimport * as React from 'react'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { $wrapNodeInElement, mergeRegister } from '@lexical/utils'\nimport {\n  $createParagraphNode,\n  $createRangeSelection,\n  $getSelection,\n  $insertNodes,\n  $isNodeSelection,\n  $isRootOrShadowRoot,\n  $setSelection,\n  COMMAND_PRIORITY_EDITOR,\n  COMMAND_PRIORITY_HIGH,\n  COMMAND_PRIORITY_LOW,\n  DRAGOVER_COMMAND,\n  DRAGSTART_COMMAND,\n  DROP_COMMAND,\n  LexicalCommand,\n  LexicalEditor,\n  createCommand,\n} from 'lexical'\n\nimport { Button } from '../../ui/button'\nimport { DialogFooter } from '../../ui/dialog'\nimport { Input } from '../../ui/input'\nimport { Label } from '../../ui/label'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../../ui/tabs'\n\nimport {\n  $createImageNode,\n  $isImageNode,\n  ImageNode,\n  ImagePayload,\n} from '../nodes/image-node'\nimport { CAN_USE_DOM } from '../shared/can-use-dom'\n\nexport type InsertImagePayload = Readonly<ImagePayload>\n\nconst getDOMSelection = (targetWindow: Window | null): Selection | null =>\n  CAN_USE_DOM ? (targetWindow || window).getSelection() : null\n\nexport const INSERT_IMAGE_COMMAND: LexicalCommand<InsertImagePayload> =\n  createCommand('INSERT_IMAGE_COMMAND')\n\n// Command for uploading and inserting an image\nexport const UPLOAD_IMAGE_COMMAND: LexicalCommand<File> =\n  createCommand('UPLOAD_IMAGE_COMMAND')\n\n/**\n * Default image upload handler that sends to the server\n * @param file The image file to upload\n * @returns Promise resolving to the URL of the uploaded image\n */\nasync function defaultUploadImageToServer(file: File): Promise<string> {\n  try {\n    // Create a FormData instance to send the file\n    const formData = new FormData();\n    formData.append('image', file);\n    \n    // Make the API request to your server endpoint\n    const response = await fetch('/api/upload-image', {\n      method: 'POST',\n      body: formData,\n    });\n    \n    if (!response.ok) {\n      throw new Error(`Upload failed with status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    \n    // Return the URL of the uploaded image from the server response\n    return data.imageUrl;\n  } catch (error) {\n    console.error('Error uploading image:', error);\n    throw error;\n  }\n}\n\nexport function InsertImageUriDialogBody({\n  onClick,\n}: {\n  onClick: (payload: InsertImagePayload) => void\n}) {\n  const [src, setSrc] = useState('')\n  const [altText, setAltText] = useState('')\n\n  const isDisabled = src === ''\n\n  return (\n    <div className=\"grid gap-4 py-4\">\n      <div className=\"grid gap-2\">\n        <Label htmlFor=\"image-url\">Image URL</Label>\n        <Input\n          id=\"image-url\"\n          placeholder=\"i.e. https://source.unsplash.com/random\"\n          onChange={(e) => setSrc(e.target.value)}\n          value={src}\n          data-test-id=\"image-modal-url-input\"\n        />\n      </div>\n      <div className=\"grid gap-2\">\n        <Label htmlFor=\"alt-text\">Alt Text</Label>\n        <Input\n          id=\"alt-text\"\n          placeholder=\"Random unsplash image\"\n          onChange={(e) => setAltText(e.target.value)}\n          value={altText}\n          data-test-id=\"image-modal-alt-text-input\"\n        />\n      </div>\n      <DialogFooter>\n        <Button\n          type=\"submit\"\n          disabled={isDisabled}\n          onClick={() => onClick({ altText, src })}\n          data-test-id=\"image-modal-confirm-btn\"\n        >\n          Confirm\n        </Button>\n      </DialogFooter>\n    </div>\n  )\n}\n\nexport function InsertImageUploadedDialogBody({\n  onClick,\n  onClose,\n  onImageUpload,\n}: {\n  onClick: (payload: InsertImagePayload) => void;\n  onClose?: () => void;\n  onImageUpload?: (file: File) => Promise<{ url: string }>;\n}) {\n  const [editor] = useLexicalComposerContext();\n  const [src, setSrc] = useState<string>('');\n  const [altText, setAltText] = useState<string>('');\n  const [isUploading, setIsUploading] = useState<boolean>(false);\n  const [file, setFile] = useState<File | null>(null);\n  const [uploadError, setUploadError] = useState<string | null>(null);\n  const [previewSrc, setPreviewSrc] = useState<string>('');\n\n  const isDisabled = !file || isUploading;\n\n  const handleFileChange = (files: FileList | null) => {\n    if (files && files.length > 0) {\n      setFile(files[0]);\n      setUploadError(null);\n      \n      // Generate preview\n      const reader = new FileReader();\n      reader.onload = function() {\n        if (typeof reader.result === 'string') {\n          setPreviewSrc(reader.result);\n        }\n      };\n      reader.readAsDataURL(files[0]);\n      \n      // Set default alt text based on filename\n      if (!altText) {\n        const fileName = files[0].name;\n        // Remove file extension and convert dashes/underscores to spaces\n        const nameWithoutExtension = fileName.split('.').slice(0, -1).join('.');\n        const formattedName = nameWithoutExtension.replace(/[-_]/g, ' ');\n        setAltText(formattedName);\n      }\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file) return;\n    \n    setIsUploading(true);\n    setUploadError(null);\n    \n    try {\n      // Check if onImageUpload is provided\n      console.log(onImageUpload);\n      \n      if (!onImageUpload) {\n        // Fall back to default upload handler if available\n        try {\n          const url = await defaultUploadImageToServer(file);\n          setSrc(url);\n          onClick({ altText, src: url });\n          if (onClose) onClose();\n        } catch (uploadError) {\n          setUploadError(\"Failed to upload image using default handler. Please try again or use URL option.\");\n          console.error('Default upload error:', uploadError);\n        }\n      } else {\n        // Use the provided custom upload handler\n        const result = await onImageUpload(file);\n        const serverImageUrl = result.url;\n        \n        // Update the src with the server URL\n        setSrc(serverImageUrl);\n        \n        // Call the onClick handler with the server URL\n        onClick({ altText, src: serverImageUrl });\n        \n        // Close the dialog if needed\n        if (onClose) onClose();\n      }\n    } catch (error) {\n      setUploadError(error instanceof Error ? error.message : 'Failed to upload image to server. Please try again.');\n      console.error('Upload error:', error);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  return (\n    <div className=\"grid gap-4 py-4\">\n      <div className=\"grid gap-2\">\n        <Label htmlFor=\"image-upload\">Image Upload</Label>\n        <Input\n          id=\"image-upload\"\n          type=\"file\"\n          onChange={(e) => handleFileChange(e.target.files)}\n          accept=\"image/*\"\n          data-test-id=\"image-modal-file-upload\"\n        />\n      </div>\n      \n      {previewSrc && (\n        <div className=\"grid place-items-center\">\n          <img \n            src={previewSrc} \n            alt=\"Preview\" \n            className=\"max-h-48 max-w-full object-contain rounded-md border border-gray-200\"\n          />\n        </div>\n      )}\n      \n      <div className=\"grid gap-2\">\n        <Label htmlFor=\"alt-text\">Alt Text</Label>\n        <Input\n          id=\"alt-text\"\n          placeholder=\"Descriptive alternative text\"\n          onChange={(e) => setAltText(e.target.value)}\n          value={altText}\n          data-test-id=\"image-modal-alt-text-input\"\n        />\n      </div>\n      \n      {uploadError && (\n        <div className=\"text-red-500 text-sm p-2 bg-red-50 rounded\">{uploadError}</div>\n      )}\n      \n      <DialogFooter>\n        <Button\n          type=\"submit\"\n          disabled={isDisabled}\n          onClick={handleUpload}\n          data-test-id=\"image-modal-file-upload-btn\"\n        >\n          {isUploading ? (\n            <span className=\"flex items-center gap-2\">\n              <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Uploading...\n            </span>\n          ) : (\n            'Upload & Insert'\n          )}\n        </Button>\n      </DialogFooter>\n    </div>\n  );\n}\nexport function InsertImageDialog({\n  activeEditor,\n  onClose,\n  onImageUpload,\n}: {\n  activeEditor: LexicalEditor\n  onClose: () => void\n  onImageUpload?: (file: File) => Promise<any | { url: string }>;\n}): JSX.Element {\n  const hasModifier = useRef(false)\n\n  console.log('onImageUpload', onImageUpload);\n  \n\n  useEffect(() => {\n    hasModifier.current = false\n    const handler = (e: KeyboardEvent) => {\n      hasModifier.current = e.altKey\n    }\n    document.addEventListener('keydown', handler)\n    return () => {\n      document.removeEventListener('keydown', handler)\n    }\n  }, [activeEditor])\n\n  const onClick = (payload: InsertImagePayload) => {\n    activeEditor.dispatchCommand(INSERT_IMAGE_COMMAND, payload)\n    onClose()\n  }\n\n  return (\n    <Tabs defaultValue=\"url\">\n      <TabsList className=\"w-full\">\n        <TabsTrigger value=\"url\" className=\"w-full\">\n          URL\n        </TabsTrigger>\n        <TabsTrigger value=\"file\" className=\"w-full\">\n          File\n        </TabsTrigger>\n      </TabsList>\n      <TabsContent value=\"url\">\n        <InsertImageUriDialogBody onClick={onClick} />\n      </TabsContent>\n      <TabsContent value=\"file\">\n        <InsertImageUploadedDialogBody \n          onClick={onClick} \n          onClose={onClose}\n          onImageUpload={onImageUpload}\n        />\n      </TabsContent>\n    </Tabs>\n  )\n}\n\nexport function ImagesPlugin({\n  captionsEnabled,\n}: {\n  captionsEnabled?: boolean;\n  onImageUpload?: (file: File) => Promise<{ url: string }>;\n}): JSX.Element | null {\n  const [editor] = useLexicalComposerContext()\n  \n\n  \n\n  useEffect(() => {\n    if (!editor.hasNodes([ImageNode])) {\n      throw new Error('ImagesPlugin: ImageNode not registered on editor')\n    }\n\n    return mergeRegister(\n      editor.registerCommand<InsertImagePayload>(\n        INSERT_IMAGE_COMMAND,\n        (payload) => {\n          const imageNode = $createImageNode(payload)\n          $insertNodes([imageNode])\n          if ($isRootOrShadowRoot(imageNode.getParentOrThrow())) {\n            $wrapNodeInElement(imageNode, $createParagraphNode).selectEnd()\n          }\n\n          return true\n        },\n        COMMAND_PRIORITY_EDITOR\n      ),\n      editor.registerCommand<DragEvent>(\n        DRAGSTART_COMMAND,\n        (event) => {\n          return $onDragStart(event)\n        },\n        COMMAND_PRIORITY_HIGH\n      ),\n      editor.registerCommand<DragEvent>(\n        DRAGOVER_COMMAND,\n        (event) => {\n          return $onDragover(event)\n        },\n        COMMAND_PRIORITY_LOW\n      ),\n      editor.registerCommand<DragEvent>(\n        DROP_COMMAND,\n        (event) => {\n          return $onDrop(event, editor)\n        },\n        COMMAND_PRIORITY_HIGH\n      ),\n      \n    )\n  }, [captionsEnabled, editor])\n\n  return null\n}\n\n\n\nfunction $onDragStart(event: DragEvent): boolean {\n  const node = $getImageNodeInSelection()\n  if (!node) {\n    return false\n  }\n  const dataTransfer = event.dataTransfer\n  if (!dataTransfer) {\n    return false\n  }\n  const TRANSPARENT_IMAGE =\n    'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n  const img = document.createElement('img')\n  img.src = TRANSPARENT_IMAGE\n  dataTransfer.setData('text/plain', '_')\n  dataTransfer.setDragImage(img, 0, 0)\n  dataTransfer.setData(\n    'application/x-lexical-drag',\n    JSON.stringify({\n      data: {\n        altText: node.__altText,\n        caption: node.__caption,\n        height: node.__height,\n        key: node.getKey(),\n        maxWidth: node.__maxWidth,\n        showCaption: node.__showCaption,\n        src: node.__src,\n        width: node.__width,\n      },\n      type: 'image',\n    })\n  )\n\n  return true\n}\n\nfunction $onDragover(event: DragEvent): boolean {\n  const node = $getImageNodeInSelection()\n  if (!node) {\n    return false\n  }\n  if (!canDropImage(event)) {\n    event.preventDefault()\n  }\n  return true\n}\n\nfunction $onDrop(event: DragEvent, editor: LexicalEditor): boolean {\n  const node = $getImageNodeInSelection()\n  if (!node) {\n    return false\n  }\n  const data = getDragImageData(event)\n  if (!data) {\n    return false\n  }\n  event.preventDefault()\n  if (canDropImage(event)) {\n    const range = getDragSelection(event)\n    node.remove()\n    const rangeSelection = $createRangeSelection()\n    if (range !== null && range !== undefined) {\n      rangeSelection.applyDOMRange(range)\n    }\n    $setSelection(rangeSelection)\n    editor.dispatchCommand(INSERT_IMAGE_COMMAND, data)\n  }\n  return true\n}\n\nfunction $getImageNodeInSelection(): ImageNode | null {\n  const selection = $getSelection()\n  if (!$isNodeSelection(selection)) {\n    return null\n  }\n  const nodes = selection.getNodes()\n  const node = nodes[0]\n  return $isImageNode(node) ? node : null\n}\n\nfunction getDragImageData(event: DragEvent): null | InsertImagePayload {\n  const dragData = event.dataTransfer?.getData('application/x-lexical-drag')\n  if (!dragData) {\n    return null\n  }\n  const { type, data } = JSON.parse(dragData)\n  if (type !== 'image') {\n    return null\n  }\n\n  return data\n}\n\ndeclare global {\n  interface DragEvent {\n    rangeOffset?: number\n    rangeParent?: Node\n  }\n}\n\nfunction canDropImage(event: DragEvent): boolean {\n  const target = event.target\n  return !!(\n    target &&\n    target instanceof HTMLElement &&\n    !target.closest('code, span.editor-image') &&\n    target.parentElement &&\n    target.parentElement.closest('div.ContentEditable__root')\n  )\n}\n\nfunction getDragSelection(event: DragEvent): Range | null | undefined {\n  let range\n  const target = event.target as null | Element | Document\n  const targetWindow =\n    target == null\n      ? null\n      : target.nodeType === 9\n        ? (target as Document).defaultView\n        : (target as Element).ownerDocument.defaultView\n  const domSelection = getDOMSelection(targetWindow)\n  if (document.caretRangeFromPoint) {\n    range = document.caretRangeFromPoint(event.clientX, event.clientY)\n  } else if (event.rangeParent && domSelection !== null) {\n    domSelection.collapse(event.rangeParent, event.rangeOffset || 0)\n    range = domSelection.getRangeAt(0)\n  } else {\n    throw Error(`Cannot get the selection when dragging`)\n  }\n\n  return range\n}"]}