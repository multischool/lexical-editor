{"version":3,"file":"JsonRenderer.jsx","sourceRoot":"","sources":["JsonRenderer.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\r\n\r\n/** -------------------------------------------------------------------------\r\n * Type Definitions\r\n * ------------------------------------------------------------------------- */\r\n\r\ntype HeadingData = {\r\n  level: number;\r\n  text: string;\r\n  id: string;\r\n};\r\n\r\ntype LexicalState = {\r\n  root?: {\r\n    children?: LexicalNode[];\r\n  };\r\n};\r\n\r\n// A minimal definition for any Lexical node shape\r\n// (You can expand this if you want stricter types per node type.)\r\ntype LexicalNode = {\r\n  type?: string;\r\n  text?: string;\r\n  style?: string;\r\n  format?: any;\r\n  mode?: string;\r\n  children?: LexicalNode[];\r\n\r\n  // List\r\n  listType?: string;\r\n  checked?: boolean;\r\n\r\n  // Heading\r\n  tag?: string;\r\n  level?: number;\r\n\r\n  // Link\r\n  url?: string;\r\n  newTab?: boolean;\r\n  target?: string;\r\n\r\n  // Image\r\n  src?: string;\r\n  altText?: string;\r\n  width?: number ;\r\n  height?: number ;\r\n  caption?: string;\r\n  showCaption?: boolean;\r\n  alignment?: string;\r\n\r\n  // Code\r\n  language?: string;\r\n  highlightType?: string;\r\n\r\n  // Table\r\n  colWidths?: number[];\r\n  headerState?: number;\r\n  header?: boolean;\r\n  isHeader?: boolean;\r\n  colSpan?: number;\r\n  rowSpan?: number;\r\n  backgroundColor?: string;\r\n\r\n  // Collapsible\r\n  open?: boolean;\r\n\r\n  // Poll\r\n  question?: string;\r\n  options?: {\r\n    uid?: string;\r\n    text?: string;\r\n  }[];\r\n\r\n  // Layout\r\n  templateColumns?: string;\r\n  columns?: number;\r\n\r\n  // Equation\r\n  equation?: string;\r\n  latex?: string;\r\n\r\n  // Emoji\r\n  emoji?: string;\r\n\r\n  // Hashtag\r\n  hashtag?: string;\r\n\r\n  // Mentions\r\n  trigger?: string;\r\n  value?: string;\r\n  data?: any; // Usually mention-specific or excalidraw data\r\n\r\n  tweetId?: string;\r\n    videoId?: string;\r\n    figmaUrl?: string;\r\n\r\n  // (Excalidraw)\r\n  // node.data could be a JSON string, etc.\r\n};\r\n\r\n/** -------------------------------------------------------------------------\r\n * Component Props\r\n * ------------------------------------------------------------------------- */\r\ninterface LexicalJsonRendererProps {\r\n  /**\r\n   * The Lexical editor state JSON from the database\r\n   */\r\n  lexicalState?: LexicalState | null;\r\n\r\n  /**\r\n   * Whether to display a Table of Contents at the top\r\n   * @default false\r\n   */\r\n  showTOC?: boolean;\r\n\r\n  /**\r\n   * Additional CSS classes for the container\r\n   */\r\n  className?: string;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * React Component\r\n * ------------------------------------------------------------------------- */\r\nconst LexicalJsonRenderer: React.FC<LexicalJsonRendererProps> = ({\r\n  lexicalState,\r\n  showTOC = false,\r\n  className = '',\r\n}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current || !lexicalState) return;\r\n\r\n    // Clear previous content\r\n    containerRef.current.innerHTML = '';\r\n\r\n    // Generate HTML content and headings list from the lexical JSON state\r\n    const { contentContainer, headings } = generateHtmlAndTOC(lexicalState);\r\n\r\n    // If showTOC is true and we have headings, prepend the Table of Contents\r\n    if (showTOC && headings.length > 0) {\r\n      const tocElement = createTOCElement(headings);\r\n      containerRef.current.appendChild(tocElement);\r\n    }\r\n\r\n    // Append the main content\r\n    containerRef.current.appendChild(contentContainer);\r\n  }, [lexicalState, showTOC]);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className={`lexical-rendered-content ${className}`}\r\n      data-lexical-renderer=\"true\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default LexicalJsonRenderer;\r\n\r\n/** -------------------------------------------------------------------------\r\n * generateHtmlAndTOC\r\n *\r\n * Given a LexicalState object, creates a parent <div> containing the rendered\r\n * HTML, and also returns a list of headings for the Table of Contents.\r\n * ------------------------------------------------------------------------- */\r\nfunction generateHtmlAndTOC(lexicalState: LexicalState): {\r\n  contentContainer: HTMLDivElement;\r\n  headings: HeadingData[];\r\n} {\r\n  const contentContainer = document.createElement('div');\r\n  contentContainer.className = 'lexical-content';\r\n\r\n  const headings: HeadingData[] = [];\r\n\r\n  if (lexicalState.root?.children) {\r\n    lexicalState.root.children.forEach((node) => {\r\n      const nodeElement = processNode(node, headings);\r\n      if (nodeElement) {\r\n        contentContainer.appendChild(nodeElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return { contentContainer, headings };\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createTOCElement\r\n *\r\n * Builds an HTML <div> containing a \"Table of Contents\" heading + a list of\r\n * links to each heading found in the Lexical JSON.\r\n * ------------------------------------------------------------------------- */\r\nfunction createTOCElement(headings: HeadingData[]): HTMLDivElement {\r\n  const tocWrapper = document.createElement('div');\r\n  tocWrapper.className = 'mb-6 border border-gray-200 p-4 rounded bg-gray-50';\r\n\r\n  // TOC title\r\n  const tocTitle = document.createElement('h2');\r\n  tocTitle.className = 'text-lg font-semibold mb-3';\r\n  tocTitle.textContent = 'Table of Contents';\r\n  tocWrapper.appendChild(tocTitle);\r\n\r\n  // TOC list\r\n  const tocList = document.createElement('ul');\r\n  tocList.className = 'space-y-1';\r\n  tocWrapper.appendChild(tocList);\r\n\r\n  headings.forEach(({ level, text, id }) => {\r\n    const listItem = document.createElement('li');\r\n    // Indentation based on heading level\r\n    listItem.style.marginLeft = `${(level - 1) * 12}px`;\r\n\r\n    // Create anchor\r\n    const link = document.createElement('a');\r\n    link.href = `#${id}`;\r\n    link.className = 'text-blue-600 hover:underline';\r\n    link.textContent = text;\r\n\r\n    listItem.appendChild(link);\r\n    tocList.appendChild(listItem);\r\n  });\r\n\r\n  return tocWrapper;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * processNode\r\n *\r\n * Takes a single Lexical node from the JSON tree, and returns an HTMLElement\r\n * or Text node. Also populates the `headings` array for the TOC if it\r\n * encounters heading nodes.\r\n * ------------------------------------------------------------------------- */\r\nfunction processNode(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLElement | Text | null {\r\n  if (!node || !node.type) return null;\r\n\r\n  // Handle text nodes\r\n  if (node.type === 'text') {\r\n    // If it's just plain text with no formatting\r\n    if (!node.format && !node.style && !node.mode) {\r\n      return document.createTextNode(node.text || '');\r\n    }\r\n\r\n    // Otherwise, create a span for formatted text\r\n    const span = document.createElement('span');\r\n    span.textContent = node.text || '';\r\n\r\n    // Apply text formatting with Tailwind classes\r\n    if (node.format) {\r\n      // Each bit in the format is a separate style. Lexical uses numeric bitmasks:\r\n      // 1: bold, 2: italic, 4: underline, 8: strikethrough, 16: superscript,\r\n      // 32: subscript, 64: code.\r\n      if (node.format & 1) span.classList.add('font-bold'); // Bold\r\n      if (node.format & 2) span.classList.add('italic'); // Italic\r\n      if (node.format & 4) span.classList.add('underline'); // Underline\r\n      if (node.format & 8) span.classList.add('line-through'); // Strikethrough\r\n      if (node.format & 16) span.classList.add('text-xs', 'align-super'); // Superscript\r\n      if (node.format & 32) span.classList.add('text-xs', 'align-sub'); // Subscript\r\n      if (node.format & 64)\r\n        span.classList.add(\r\n          'font-mono',\r\n          'bg-gray-100',\r\n          'px-1',\r\n          'rounded'\r\n        ); // Code\r\n    }\r\n\r\n    // Apply custom inline styles\r\n    if (node.style) {\r\n      applyStyleToElement(span, node.style);\r\n    }\r\n\r\n    return span;\r\n  }\r\n\r\n  // Handle different element types\r\n  switch (node.type) {\r\n    case 'paragraph':\r\n      return createParagraph(node, headings);\r\n\r\n    case 'heading':\r\n      return createHeading(node, headings);\r\n\r\n    case 'list':\r\n      if (node.listType === 'check') {\r\n        return createCheckList(node, headings);\r\n      } else {\r\n        return createList(node, headings);\r\n      }\r\n\r\n    case 'listitem':\r\n      if (Object.prototype.hasOwnProperty.call(node, 'checked')) {\r\n        return createCheckListItem(node, headings);\r\n      }\r\n      return createListItem(node, headings);\r\n\r\n    case 'check-list':\r\n    case 'checkList':\r\n    case 'checklist':\r\n      return createCheckList(node, headings);\r\n\r\n    case 'check-list-item':\r\n    case 'checkListItem':\r\n    case 'checklistitem':\r\n      return createCheckListItem(node, headings);\r\n\r\n    case 'quote':\r\n      return createQuote(node, headings);\r\n\r\n    case 'code':\r\n      return createCode(node, headings);\r\n\r\n    case 'horizontalrule':\r\n    case 'hr':\r\n      return createHorizontalRule();\r\n\r\n    case 'page-break':\r\n      return createPageBreak();\r\n\r\n    case 'link':\r\n      return createLink(node, headings);\r\n\r\n    case 'image':\r\n      return createImage(node);\r\n\r\n    case 'inline-image':\r\n      return createInlineImage(node);\r\n\r\n    case 'tweet':\r\n    case 'twitter':\r\n      return createEmbedElement(node, 'twitter');\r\n\r\n    case 'youtube':\r\n      return createEmbedElement(node, 'youtube');\r\n\r\n    case 'figma':\r\n      return createEmbedElement(node, 'figma');\r\n\r\n    case 'table':\r\n      return createTable(node, headings);\r\n\r\n    case 'tablerow':\r\n      return createTableRow(node, headings);\r\n\r\n    case 'tablecell':\r\n      return createTableCell(node);\r\n\r\n    case 'collapsible':\r\n    case 'collapsible-container':\r\n      return createCollapsible(node, headings);\r\n\r\n    case 'collapsible-title':\r\n      return createCollapsibleTitle(node, headings);\r\n\r\n    case 'collapsible-content':\r\n      return createCollapsibleContent(node, headings);\r\n\r\n    case 'excalidraw':\r\n      return createExcalidraw(node);\r\n\r\n    case 'columns':\r\n    case 'layout-container':\r\n      return createColumnsLayout(node, headings);\r\n\r\n    case 'layout-item':\r\n    case 'column':\r\n      return createColumn(node, headings);\r\n\r\n    case 'equation':\r\n      return createEquation(node);\r\n\r\n    case 'emoji':\r\n      return createEmoji(node);\r\n\r\n    case 'hashtag':\r\n      return createHashtag(node);\r\n\r\n    case 'beautifulMention':\r\n      return createMention(node);\r\n\r\n    case 'poll':\r\n      return createPoll(node);\r\n  }\r\n\r\n  // Fallback: if unknown node type or has children, process recursively\r\n  if (node.children) {\r\n    const div = document.createElement('div');\r\n    node.children.forEach((child) => {\r\n      const childElement = processNode(child, headings);\r\n      if (childElement) {\r\n        div.appendChild(childElement);\r\n      }\r\n    });\r\n    return div;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createParagraph\r\n * ------------------------------------------------------------------------- */\r\nfunction createParagraph(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  const paragraph = document.createElement('p');\r\n  paragraph.className = 'mb-4';\r\n\r\n  // If node.format includes alignment info\r\n  if (node.format && node.format.includes('align')) {\r\n    const alignClass = getAlignmentClass(node.format);\r\n    if (alignClass) paragraph.classList.add(alignClass);\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        paragraph.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return paragraph;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createHeading\r\n * ------------------------------------------------------------------------- */\r\nfunction createHeading(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  // Determine heading level (try node.tag first, else node.level, else default 1)\r\n  let level = 1;\r\n  if (node.tag) {\r\n    const extracted = parseInt(node.tag.replace('h', ''), 10);\r\n    level = isNaN(extracted) ? 1 : extracted;\r\n  } else if (node.level) {\r\n    level = node.level;\r\n  }\r\n\r\n  // Clamp level to 1–6\r\n  if (level < 1 || level > 6) {\r\n    level = 1;\r\n  }\r\n\r\n  // Construct the heading\r\n  const headingTag = `h${level}` as keyof HTMLElementTagNameMap;\r\n  const heading = document.createElement(headingTag);\r\n\r\n  let headingText = '';\r\n\r\n  // Basic Tailwind style by level\r\n  switch (level) {\r\n    case 1:\r\n      heading.className = 'text-3xl font-bold mb-4';\r\n      break;\r\n    case 2:\r\n      heading.className = 'text-2xl font-bold mb-3';\r\n      break;\r\n    case 3:\r\n      heading.className = 'text-xl font-bold mb-2';\r\n      break;\r\n    default:\r\n      heading.className = 'text-lg font-semibold mb-2';\r\n      break;\r\n  }\r\n\r\n  // If node.format includes alignment\r\n  if (node.format && node.format.includes('align')) {\r\n    const alignClass = getAlignmentClass(node.format);\r\n    if (alignClass) heading.classList.add(alignClass);\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        heading.appendChild(childElement);\r\n\r\n        // Gather text content for the TOC\r\n        if (childNode.type === 'text' && childNode.text) {\r\n          headingText += childNode.text;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  if (node.text) {\r\n    headingText += node.text;\r\n    heading.textContent = headingText;\r\n  }\r\n\r\n  // Create an ID for anchor linking\r\n  const headingId = createUniqueHeadingId(headingText);\r\n  heading.setAttribute('id', headingId);\r\n\r\n  // Add to headings array\r\n  headings.push({\r\n    level,\r\n    text: headingText.trim() || 'Untitled Heading',\r\n    id: headingId,\r\n  });\r\n\r\n  return heading;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createList\r\n * ------------------------------------------------------------------------- */\r\nfunction createList(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  const listType = node.listType || node.tag || 'bullet';\r\n  const isNumbered = listType === 'number' || listType === 'ordered';\r\n\r\n  const list = document.createElement(isNumbered ? 'ol' : 'ul');\r\n  list.className = 'pl-5 mb-4';\r\n\r\n  if (isNumbered) {\r\n    list.classList.add('list-decimal');\r\n  } else {\r\n    list.classList.add('list-disc');\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        list.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return list;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createListItem\r\n * ------------------------------------------------------------------------- */\r\nfunction createListItem(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  const item = document.createElement('li');\r\n  item.className = 'mb-1';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        item.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return item;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createCheckList\r\n * ------------------------------------------------------------------------- */\r\nfunction createCheckList(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  const list = document.createElement('ul');\r\n  list.className = 'pl-5 mb-4 list-none';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        list.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return list;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createCheckListItem\r\n * ------------------------------------------------------------------------- */\r\nfunction createCheckListItem(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLElement {\r\n  const item = document.createElement('li');\r\n  item.className = 'mb-1 flex items-start';\r\n\r\n  // Create checkbox\r\n  const checkbox = document.createElement('input');\r\n  checkbox.type = 'checkbox';\r\n  checkbox.className = 'mr-2 mt-1';\r\n  checkbox.disabled = true;\r\n  if (node.checked) checkbox.checked = true;\r\n\r\n  item.appendChild(checkbox);\r\n\r\n  // Container for text\r\n  const content = document.createElement('div');\r\n  content.className = 'flex-1';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        content.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  item.appendChild(content);\r\n  return item;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createQuote\r\n * ------------------------------------------------------------------------- */\r\nfunction createQuote(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  const quote = document.createElement('blockquote');\r\n  quote.className = 'pl-4 border-l-4 border-gray-300 italic my-4';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        quote.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return quote;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createCode\r\n * ------------------------------------------------------------------------- */\r\nfunction createCode(node: LexicalNode, headings: HeadingData[]): HTMLElement {\r\n  // Wrapper for code block + copy button\r\n  const codeBlockWrapper = document.createElement('div');\r\n  codeBlockWrapper.className = 'relative my-4';\r\n\r\n  // <pre><code> container\r\n  const pre = document.createElement('pre');\r\n  pre.className = 'bg-gray-100 p-4 rounded font-mono text-sm overflow-x-auto';\r\n\r\n  // If a language is specified\r\n  if (node.language) {\r\n    const lang = node.language.toLowerCase();\r\n    pre.classList.add(`language-${lang}`);\r\n\r\n    // Add a small language tag in top-right corner\r\n    const langTag = document.createElement('div');\r\n    langTag.className =\r\n      'absolute top-0 right-0 bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded-bl';\r\n    langTag.textContent = node.language;\r\n    codeBlockWrapper.appendChild(langTag);\r\n  }\r\n\r\n  // Copy button\r\n  const copyButton = document.createElement('button');\r\n  copyButton.className =\r\n    'absolute top-2 right-2 bg-gray-200 hover:bg-gray-300 text-gray-600 p-1 rounded';\r\n  copyButton.title = 'Copy code';\r\n  copyButton.innerHTML =\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect><path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"></path></svg>';\r\n\r\n  copyButton.addEventListener('click', () => {\r\n    const codeText = code.textContent || '';\r\n    navigator.clipboard.writeText(codeText).then(() => {\r\n      // Show a small checkmark as feedback\r\n      const original = copyButton.innerHTML;\r\n      copyButton.innerHTML =\r\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>';\r\n      setTimeout(() => {\r\n        copyButton.innerHTML = original;\r\n      }, 2000);\r\n    });\r\n  });\r\n\r\n  // Create code area with line numbers\r\n  const codeContainer = document.createElement('div');\r\n  codeContainer.className = 'flex';\r\n\r\n  // Column for line numbers\r\n  const lineNumbers = document.createElement('div');\r\n  lineNumbers.className = 'text-gray-400 pr-4 text-right select-none';\r\n  lineNumbers.style.minWidth = '2rem';\r\n\r\n  // Actual code output\r\n  const code = document.createElement('code');\r\n  code.className = 'flex-1';\r\n\r\n  // We track line breaks. If children contain code-highlight tokens or linebreak\r\n  let lineCount = 1;\r\n  let currentLineSpan = document.createElement('span');\r\n\r\n  if (node.children) {\r\n    node.children.forEach((child) => {\r\n      if (child.type === 'linebreak') {\r\n        code.appendChild(currentLineSpan);\r\n        code.appendChild(document.createElement('br'));\r\n        lineCount++;\r\n        currentLineSpan = document.createElement('span');\r\n      } else if (child.type === 'code-highlight') {\r\n        const tokenSpan = document.createElement('span');\r\n        tokenSpan.textContent = child.text || '';\r\n        if (child.highlightType) {\r\n          tokenSpan.classList.add(`token-${child.highlightType}`);\r\n        }\r\n        currentLineSpan.appendChild(tokenSpan);\r\n      } else {\r\n        const fallback = document.createElement('span');\r\n        fallback.textContent = child.text || '';\r\n        currentLineSpan.appendChild(fallback);\r\n      }\r\n    });\r\n    // Add the final line if any content is present\r\n    if (currentLineSpan.childNodes.length > 0) {\r\n      code.appendChild(currentLineSpan);\r\n    }\r\n  }\r\n\r\n  // Generate line numbers\r\n  for (let i = 1; i <= lineCount; i++) {\r\n    const lineSpan = document.createElement('span');\r\n    lineSpan.textContent = String(i);\r\n    lineSpan.className = 'block';\r\n    lineNumbers.appendChild(lineSpan);\r\n  }\r\n\r\n  codeContainer.appendChild(lineNumbers);\r\n  codeContainer.appendChild(code);\r\n  pre.appendChild(codeContainer);\r\n\r\n  codeBlockWrapper.appendChild(pre);\r\n  codeBlockWrapper.appendChild(copyButton);\r\n\r\n  return codeBlockWrapper;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createHorizontalRule\r\n * ------------------------------------------------------------------------- */\r\nfunction createHorizontalRule(): HTMLHRElement {\r\n  const hr = document.createElement('hr');\r\n  hr.className = 'my-6 border-t border-gray-300';\r\n  return hr;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createPageBreak\r\n * ------------------------------------------------------------------------- */\r\nfunction createPageBreak(): HTMLDivElement {\r\n  const pageBreak = document.createElement('div');\r\n  pageBreak.className = 'page-break flex items-center justify-center my-8';\r\n\r\n  const line = document.createElement('div');\r\n  line.className = 'border-t border-dashed border-gray-300 flex-grow';\r\n\r\n  const label = document.createElement('div');\r\n  label.className = 'mx-4 text-xs text-gray-500';\r\n  label.textContent = 'Page Break';\r\n\r\n  pageBreak.appendChild(line);\r\n  pageBreak.appendChild(label);\r\n  pageBreak.appendChild(line.cloneNode());\r\n\r\n  return pageBreak;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createLink\r\n * ------------------------------------------------------------------------- */\r\nfunction createLink(node: LexicalNode, headings: HeadingData[]): HTMLAnchorElement {\r\n  const link = document.createElement('a');\r\n  link.href = node.url || '#';\r\n  link.className = 'text-blue-600 hover:underline';\r\n  link.rel = 'noopener noreferrer';\r\n  if (node.newTab || node.target === '_blank') {\r\n    link.target = '_blank';\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        link.appendChild(childElement);\r\n      }\r\n    });\r\n  } else if (node.text) {\r\n    link.textContent = node.text;\r\n  }\r\n\r\n  return link;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createImage\r\n * ------------------------------------------------------------------------- */\r\nfunction createImage(node: LexicalNode): HTMLElement {\r\n  const figure = document.createElement('figure');\r\n  figure.className = 'my-4';\r\n\r\n  const img = document.createElement('img');\r\n  img.src = node.src || '';\r\n  img.alt = node.altText || '';\r\n\r\n  // Sizing\r\n  if (node.width) {\r\n    if (typeof node.width === 'number') {\r\n      img.style.width = `${node.width}px`;\r\n    } else {\r\n      img.style.width = node.width;\r\n    }\r\n  }\r\n  if (node.height) {\r\n    if (typeof node.height === 'number') {\r\n      img.style.height = `${node.height}px`;\r\n    } else {\r\n      img.style.height = node.height;\r\n    }\r\n  }\r\n\r\n  // Alignment\r\n  if (node.alignment) {\r\n    const alignClass = getAlignmentClass(node.alignment);\r\n    if (alignClass) figure.classList.add(alignClass);\r\n\r\n    if (node.alignment === 'center') {\r\n      figure.classList.add('flex', 'justify-center');\r\n    } else if (\r\n      node.alignment === 'start' ||\r\n      node.alignment === 'left'\r\n    ) {\r\n      figure.classList.add('float-left', 'mr-4');\r\n    } else if (\r\n      node.alignment === 'end' ||\r\n      node.alignment === 'right'\r\n    ) {\r\n      figure.classList.add('float-right', 'ml-4');\r\n    }\r\n  }\r\n\r\n  figure.appendChild(img);\r\n\r\n  // Caption\r\n  if (node.caption) {\r\n    const figcaption = document.createElement('figcaption');\r\n    figcaption.className = 'text-center text-sm text-gray-500 mt-2';\r\n    figcaption.textContent = node.caption;\r\n    figure.appendChild(figcaption);\r\n  }\r\n\r\n  return figure;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createInlineImage\r\n *\r\n * Renders an image node within a figure, optionally with a caption.\r\n * ------------------------------------------------------------------------- */\r\nfunction createInlineImage(node: LexicalNode): HTMLElement {\r\n  const figure = document.createElement('figure');\r\n  figure.className = 'my-4';\r\n\r\n  const img = document.createElement('img');\r\n  img.src = node.src || '';\r\n  img.alt = node.altText || '';\r\n  img.className = 'max-w-full h-auto rounded';\r\n\r\n  // Sizing\r\n  if (node.width && node.width > 0) {\r\n    if (typeof node.width === 'number') {\r\n      img.style.width = `${node.width}px`;\r\n    } else {\r\n      img.style.width = node.width;\r\n    }\r\n  }\r\n  if (node.height && node.height > 0) {\r\n    if (typeof node.height === 'number') {\r\n      img.style.height = `${node.height}px`;\r\n    } else {\r\n      img.style.height = node.height;\r\n    }\r\n  }\r\n\r\n  figure.appendChild(img);\r\n\r\n  // Add caption if present and showCaption is true\r\n  if (node.showCaption && node.caption && typeof node.caption === 'object') {\r\n    // In some Lexical setups, node.caption might hold an editorState\r\n    // For brevity, just handle as needed in your code.\r\n  } else if (node.showCaption && node.caption && typeof node.caption === 'string') {\r\n    const figcaption = document.createElement('figcaption');\r\n    figcaption.className = 'text-center text-sm text-gray-500 mt-2';\r\n    figcaption.textContent = node.caption;\r\n    figure.appendChild(figcaption);\r\n  }\r\n\r\n  return figure;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createEmbedElement\r\n *\r\n * Renders an embedded widget (Twitter, YouTube, Figma, etc.)\r\n * ------------------------------------------------------------------------- */\r\nfunction createEmbedElement(node: LexicalNode, type: string): HTMLDivElement {\r\n  const embed = document.createElement('div');\r\n  embed.className = 'my-4 p-4 border rounded bg-gray-50';\r\n\r\n  const embedTitle = document.createElement('div');\r\n  embedTitle.className = 'font-medium mb-2';\r\n\r\n  switch (type) {\r\n    case 'twitter':\r\n      embedTitle.textContent = 'Twitter Embed';\r\n      break;\r\n    case 'youtube':\r\n      embedTitle.textContent = 'YouTube Video';\r\n      break;\r\n    case 'figma':\r\n      embedTitle.textContent = 'Figma Design';\r\n      break;\r\n    default:\r\n      embedTitle.textContent = 'Embedded Content';\r\n  }\r\n\r\n  embed.appendChild(embedTitle);\r\n\r\n  const content = document.createElement('div');\r\n  content.className = 'text-sm text-gray-600';\r\n\r\n  if (type === 'twitter' && node.tweetId) {\r\n    content.textContent = `Tweet ID: ${node.tweetId}`;\r\n  } else if (type === 'youtube' && node.videoId) {\r\n    content.textContent = `YouTube Video ID: ${node.videoId}`;\r\n  } else if (type === 'figma' && node.figmaUrl) {\r\n    content.textContent = `Figma URL: ${node.figmaUrl}`;\r\n  } else if (node.url) {\r\n    content.textContent = node.url;\r\n  } else {\r\n    content.textContent = 'Embedded content (rendered dynamically)';\r\n  }\r\n\r\n  embed.appendChild(content);\r\n  return embed;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createTable\r\n * ------------------------------------------------------------------------- */\r\nfunction createTable(node: LexicalNode, headings: HeadingData[]): HTMLTableElement {\r\n  const table = document.createElement('table');\r\n  table.className = 'w-full border-collapse table-auto my-4';\r\n\r\n  // Column widths\r\n  if (node.colWidths && Array.isArray(node.colWidths)) {\r\n    const colgroup = document.createElement('colgroup');\r\n    node.colWidths.forEach((width) => {\r\n      const col = document.createElement('col');\r\n      col.style.width = `${width}px`;\r\n      colgroup.appendChild(col);\r\n    });\r\n    table.appendChild(colgroup);\r\n  }\r\n\r\n  if (node.children) {\r\n    // Check if we have header rows\r\n    const hasHeaderRows = node.children.some(\r\n      (row) =>\r\n        row.children &&\r\n        row.children.some(\r\n          (cell) => cell.headerState === 1 || cell.headerState === 3\r\n        )\r\n    );\r\n\r\n    if (hasHeaderRows) {\r\n      const thead = document.createElement('thead');\r\n      thead.className = 'bg-gray-50';\r\n      const tbody = document.createElement('tbody');\r\n\r\n      node.children.forEach((rowNode) => {\r\n        const rowElement = processNode(rowNode, headings);\r\n        if (!rowElement) return;\r\n        // is header row if any cell has headerState 1 or 3\r\n        const isHeaderRow =\r\n          rowNode.children &&\r\n          rowNode.children.some(\r\n            (cell) => cell.headerState === 1 || cell.headerState === 3\r\n          );\r\n        if (isHeaderRow) {\r\n          thead.appendChild(rowElement);\r\n        } else {\r\n          tbody.appendChild(rowElement);\r\n        }\r\n      });\r\n\r\n      if (thead.children.length > 0) table.appendChild(thead);\r\n      if (tbody.children.length > 0) table.appendChild(tbody);\r\n    } else {\r\n      node.children.forEach((childNode) => {\r\n        const childElement = processNode(childNode, headings);\r\n        if (childElement) table.appendChild(childElement);\r\n      });\r\n    }\r\n  }\r\n\r\n  return table;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createTableRow\r\n * ------------------------------------------------------------------------- */\r\nfunction createTableRow(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLTableRowElement {\r\n  const row = document.createElement('tr');\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        row.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return row;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createTableCell\r\n * ------------------------------------------------------------------------- */\r\nfunction createTableCell(node: LexicalNode): HTMLTableCellElement {\r\n  const headerState = node.headerState ?? 0;\r\n  const isHeader = headerState === 1 || headerState === 3 || node.header || node.isHeader;\r\n\r\n  const cell = document.createElement(isHeader ? 'th' : 'td');\r\n\r\n  // Basic styling\r\n  if (headerState === 1) {\r\n    cell.className = 'border px-4 py-2 bg-gray-100 font-medium text-center';\r\n  } else if (headerState === 2) {\r\n    cell.className = 'border px-4 py-2 bg-gray-50 font-medium text-left';\r\n  } else if (headerState === 3) {\r\n    cell.className = 'border px-4 py-2 bg-gray-200 font-bold text-center';\r\n  } else {\r\n    cell.className = 'border px-4 py-2';\r\n  }\r\n\r\n  if (node.colSpan && node.colSpan > 1) {\r\n    cell.colSpan = node.colSpan;\r\n  }\r\n  if (node.rowSpan && node.rowSpan > 1) {\r\n    cell.rowSpan = node.rowSpan;\r\n  }\r\n\r\n  if (node.backgroundColor) {\r\n    cell.style.backgroundColor = node.backgroundColor;\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, []);\r\n      if (childElement) {\r\n        cell.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return cell;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createCollapsible\r\n * ------------------------------------------------------------------------- */\r\nfunction createCollapsible(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLDetailsElement {\r\n  const collapsible = document.createElement('details');\r\n  collapsible.className = 'border rounded-lg shadow-sm my-4 overflow-hidden';\r\n\r\n  if (typeof node.open !== 'undefined') {\r\n    collapsible.open = node.open;\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        collapsible.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return collapsible;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createCollapsibleTitle\r\n * ------------------------------------------------------------------------- */\r\nfunction createCollapsibleTitle(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLElement {\r\n  const title = document.createElement('summary');\r\n  title.className =\r\n    'px-4 py-3 cursor-pointer font-medium flex items-center bg-gray-50 hover:bg-gray-100 transition-colors duration-150';\r\n\r\n  // A simple style to hide the default marker in Chrome\r\n  const style = document.createElement('style');\r\n  style.textContent = `\r\n    summary::-webkit-details-marker {\r\n      display: none;\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n\r\n  const arrow = document.createElement('div');\r\n  arrow.className = 'mr-2 transition-transform duration-200';\r\n  arrow.innerHTML =\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>';\r\n\r\n  const contentWrapper = document.createElement('div');\r\n  contentWrapper.className = 'flex-1';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        contentWrapper.appendChild(childElement);\r\n      }\r\n    });\r\n  } else if (node.text) {\r\n    contentWrapper.textContent = node.text;\r\n  }\r\n\r\n  title.addEventListener('click', () => {\r\n    const details = title.parentElement as HTMLDetailsElement | null;\r\n    if (details) {\r\n      if (details.open) {\r\n        arrow.style.transform = 'rotate(0deg)';\r\n      } else {\r\n        arrow.style.transform = 'rotate(180deg)';\r\n      }\r\n    }\r\n  });\r\n\r\n  title.appendChild(arrow);\r\n  title.appendChild(contentWrapper);\r\n\r\n  return title;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createCollapsibleContent\r\n * ------------------------------------------------------------------------- */\r\nfunction createCollapsibleContent(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLDivElement {\r\n  const content = document.createElement('div');\r\n  content.className = 'p-4 border-t bg-white';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        content.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return content;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createExcalidraw\r\n *\r\n * Renders a minimal preview of an Excalidraw diagram if node.data is valid JSON.\r\n * ------------------------------------------------------------------------- */\r\nfunction createExcalidraw(node: LexicalNode): HTMLDivElement {\r\n  const container = document.createElement('div');\r\n  container.className = 'excalidraw-container border rounded my-4 p-4';\r\n\r\n  try {\r\n    const excalidrawData = JSON.parse(node.data);\r\n    if (!excalidrawData.elements || excalidrawData.elements.length === 0) {\r\n      const placeholder = document.createElement('div');\r\n      placeholder.className = 'text-center text-gray-500 py-4';\r\n      placeholder.textContent = 'Empty drawing';\r\n      container.appendChild(placeholder);\r\n      return container;\r\n    }\r\n\r\n    // Compute bounding box\r\n    let minX = Infinity,\r\n      minY = Infinity,\r\n      maxX = -Infinity,\r\n      maxY = -Infinity;\r\n\r\n    excalidrawData.elements.forEach((el: any) => {\r\n      if (el.isDeleted) return;\r\n      minX = Math.min(minX, el.x);\r\n      minY = Math.min(minY, el.y);\r\n      maxX = Math.max(maxX, el.x + el.width);\r\n      maxY = Math.max(maxY, el.y + el.height);\r\n    });\r\n\r\n    const padding = 20;\r\n    minX -= padding;\r\n    minY -= padding;\r\n    maxX += padding;\r\n    maxY += padding;\r\n\r\n    const width = maxX - minX;\r\n    const height = maxY - minY;\r\n\r\n    const bgColor = excalidrawData.appState?.viewBackgroundColor || '#fff';\r\n    const ratio = height / width;\r\n\r\n    container.innerHTML = `\r\n      <div style=\"width:100%; max-width:600px; margin:0 auto; position:relative;\">\r\n        <div style=\"padding-bottom:${Math.min(Math.max(ratio, 0.5), 1.5) * 100}%;\">\r\n          <svg\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            viewBox=\"${minX} ${minY} ${width} ${height}\"\r\n            style=\"position:absolute; top:0; left:0; background:${bgColor}\"\r\n          >\r\n            ${excalidrawData.elements\r\n              .map((el: any) => {\r\n                if (el.isDeleted) return '';\r\n                if (el.type === 'ellipse') {\r\n                  return `\r\n                    <ellipse\r\n                      cx=\"${el.x + el.width / 2}\"\r\n                      cy=\"${el.y + el.height / 2}\"\r\n                      rx=\"${el.width / 2}\"\r\n                      ry=\"${el.height / 2}\"\r\n                      stroke=\"${el.strokeColor}\"\r\n                      stroke-width=\"${el.strokeWidth}\"\r\n                      fill=\"${\r\n                        el.backgroundColor !== 'transparent'\r\n                          ? el.backgroundColor\r\n                          : 'transparent'\r\n                      }\"\r\n                      ${\r\n                        el.strokeStyle === 'dashed'\r\n                          ? 'stroke-dasharray=\"8 4\"'\r\n                          : ''\r\n                      }\r\n                      ${\r\n                        el.strokeStyle === 'dotted'\r\n                          ? 'stroke-dasharray=\"2 2\"'\r\n                          : ''\r\n                      }\r\n                      ${\r\n                        el.opacity < 100\r\n                          ? `opacity=\"${el.opacity / 100}\"`\r\n                          : ''\r\n                      }\r\n                    />\r\n                  `;\r\n                } else if (el.type === 'rectangle') {\r\n                  const rotation = el.angle\r\n                    ? `rotate(${(el.angle * 180) / Math.PI}, ${\r\n                        el.x + el.width / 2\r\n                      }, ${el.y + el.height / 2})`\r\n                    : '';\r\n                  return `\r\n                    <rect\r\n                      x=\"${el.x}\"\r\n                      y=\"${el.y}\"\r\n                      width=\"${el.width}\"\r\n                      height=\"${el.height}\"\r\n                      stroke=\"${el.strokeColor}\"\r\n                      stroke-width=\"${el.strokeWidth}\"\r\n                      fill=\"${\r\n                        el.backgroundColor !== 'transparent'\r\n                          ? el.backgroundColor\r\n                          : 'transparent'\r\n                      }\"\r\n                      ${\r\n                        el.strokeStyle === 'dashed'\r\n                          ? 'stroke-dasharray=\"8 4\"'\r\n                          : ''\r\n                      }\r\n                      ${\r\n                        el.strokeStyle === 'dotted'\r\n                          ? 'stroke-dasharray=\"2 2\"'\r\n                          : ''\r\n                      }\r\n                      ${\r\n                        el.opacity < 100\r\n                          ? `opacity=\"${el.opacity / 100}\"`\r\n                          : ''\r\n                      }\r\n                      ${\r\n                        rotation ? `transform=\"${rotation}\"` : ''\r\n                      }\r\n                    />\r\n                  `;\r\n                } else {\r\n                  // fallback\r\n                  return `\r\n                    <rect\r\n                      x=\"${el.x}\"\r\n                      y=\"${el.y}\"\r\n                      width=\"${el.width}\"\r\n                      height=\"${el.height}\"\r\n                      stroke=\"#888\"\r\n                      stroke-width=\"1\"\r\n                      fill=\"transparent\"\r\n                      stroke-dasharray=\"4 4\"\r\n                    />\r\n                  `;\r\n                }\r\n              })\r\n              .join('')}\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    `;\r\n  } catch (error) {\r\n    console.error('Error rendering excalidraw:', error);\r\n    container.innerHTML = `\r\n      <div class=\"bg-red-50 p-4 text-red-700 rounded\">\r\n        Error rendering drawing\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  return container;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createPoll\r\n * ------------------------------------------------------------------------- */\r\nfunction createPoll(node: LexicalNode): HTMLDivElement {\r\n  const poll = document.createElement('div');\r\n  poll.className = 'poll-container border rounded my-4 p-4';\r\n\r\n  // Question\r\n  if (node.question) {\r\n    const title = document.createElement('h3');\r\n    title.className = 'font-medium mb-3';\r\n    title.textContent = node.question;\r\n    poll.appendChild(title);\r\n  }\r\n\r\n  // Render options\r\n  if (node.options && Array.isArray(node.options)) {\r\n    const form = document.createElement('form');\r\n    form.className = 'space-y-2';\r\n\r\n    node.options.forEach((option, index) => {\r\n      const label = document.createElement('label');\r\n      label.className = 'flex items-center gap-2 cursor-pointer';\r\n\r\n      const radio = document.createElement('input');\r\n      radio.type = 'radio';\r\n      radio.name = 'poll-option';\r\n      radio.value = option.uid || `option-${index}`;\r\n      radio.className = 'poll-option-radio';\r\n\r\n      const labelText = document.createElement('span');\r\n      labelText.textContent = option.text || `Option ${index + 1}`;\r\n\r\n      label.appendChild(radio);\r\n      label.appendChild(labelText);\r\n      form.appendChild(label);\r\n    });\r\n\r\n    const voteButton = document.createElement('button');\r\n    voteButton.type = 'submit';\r\n    voteButton.className = 'px-3 py-1.5 border rounded bg-blue-500 text-white';\r\n    voteButton.textContent = 'Vote';\r\n\r\n    form.appendChild(voteButton);\r\n\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n      const selected = form.querySelector(\r\n        'input[name=\"poll-option\"]:checked'\r\n      ) as HTMLInputElement | null;\r\n      if (selected) {\r\n        alert(`You voted for: ${selected.value}`);\r\n      } else {\r\n        alert('Please select an option before voting.');\r\n      }\r\n    });\r\n\r\n    poll.appendChild(form);\r\n  }\r\n\r\n  return poll;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createColumnsLayout\r\n * ------------------------------------------------------------------------- */\r\nfunction createColumnsLayout(\r\n  node: LexicalNode,\r\n  headings: HeadingData[]\r\n): HTMLDivElement {\r\n  const columnsContainer = document.createElement('div');\r\n  columnsContainer.className = 'grid gap-4 my-4';\r\n\r\n  if (node.templateColumns) {\r\n    columnsContainer.style.gridTemplateColumns = node.templateColumns;\r\n  } else {\r\n    const columnsCount = node.columns || (node.children ? node.children.length : 2);\r\n    // Just clamp to 12 columns max if using Tailwind\r\n    const safeCount = Math.min(columnsCount, 12);\r\n    // Because \"grid-cols-N\" is a standard tailwind class only for N up to 12\r\n    columnsContainer.classList.add(`grid-cols-${safeCount}`);\r\n  }\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        columnsContainer.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return columnsContainer;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createColumn\r\n * ------------------------------------------------------------------------- */\r\nfunction createColumn(node: LexicalNode, headings: HeadingData[]): HTMLDivElement {\r\n  const column = document.createElement('div');\r\n  column.className = 'column p-2 border rounded';\r\n\r\n  if (node.children) {\r\n    node.children.forEach((childNode) => {\r\n      const childElement = processNode(childNode, headings);\r\n      if (childElement) {\r\n        column.appendChild(childElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  return column;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createEquation\r\n * ------------------------------------------------------------------------- */\r\nfunction createEquation(node: LexicalNode): HTMLDivElement {\r\n  const equation = document.createElement('div');\r\n  equation.className = 'equation my-2 text-center';\r\n\r\n  if (node.equation) {\r\n    equation.textContent = node.equation;\r\n  } else if (node.latex) {\r\n    equation.textContent = node.latex;\r\n  } else if (node.children && node.children[0] && node.children[0].text) {\r\n    equation.textContent = node.children[0].text;\r\n  } else {\r\n    equation.textContent = '[Equation]';\r\n  }\r\n\r\n  return equation;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createEmoji\r\n * ------------------------------------------------------------------------- */\r\nfunction createEmoji(node: LexicalNode): HTMLSpanElement {\r\n  const emoji = document.createElement('span');\r\n  emoji.className = 'emoji';\r\n  emoji.textContent = node.emoji || node.text || '😀';\r\n  return emoji;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createHashtag\r\n * ------------------------------------------------------------------------- */\r\nfunction createHashtag(node: LexicalNode): HTMLSpanElement {\r\n  const hashtag = document.createElement('span');\r\n  hashtag.className = 'hashtag text-blue-600';\r\n  hashtag.textContent = node.hashtag || node.text || '#hashtag';\r\n  return hashtag;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createMention\r\n * ------------------------------------------------------------------------- */\r\nfunction createMention(node: LexicalNode): HTMLSpanElement {\r\n  // The text for display in the inline mention (e.g., \"@Leanne Graham\")\r\n  const displayText = node.trigger ? node.trigger + node.value : node.value;\r\n  const userId = node.data?.id ?? 'N/A';\r\n  const avatarUrl = node.data?.avatarUrl ?? 'https://placehold.co/400';\r\n  const userBio =\r\n    node.data?.bio ?? 'Lorem ipsum dolor sit amet, consectetur adipiscing elit.';\r\n\r\n  const mentionWrapper = document.createElement('span');\r\n  mentionWrapper.className =\r\n    'mention bg-blue-100 text-blue-800 px-1 rounded cursor-pointer relative';\r\n  mentionWrapper.textContent = displayText || '@unknown';\r\n\r\n  // Hidden card\r\n  const card = document.createElement('div');\r\n  card.className =\r\n    'hidden absolute w-64 top-full left-0 mt-1 p-3 bg-white border rounded shadow text-sm z-10';\r\n\r\n  // Card header\r\n  const cardHeader = document.createElement('div');\r\n  cardHeader.className = 'flex items-center gap-2 mb-2';\r\n\r\n  const avatarImg = document.createElement('img');\r\n  avatarImg.src = avatarUrl;\r\n  avatarImg.alt = displayText || 'User';\r\n  avatarImg.className = 'w-12 h-12 rounded-full object-cover';\r\n\r\n  const nameAndBioWrapper = document.createElement('div');\r\n  const nameEl = document.createElement('div');\r\n  nameEl.className = 'font-semibold';\r\n  nameEl.textContent = node.value || 'Unknown User';\r\n\r\n  const bioEl = document.createElement('div');\r\n  bioEl.className = 'text-xs text-gray-600';\r\n  bioEl.textContent = userBio;\r\n\r\n  nameAndBioWrapper.appendChild(nameEl);\r\n  nameAndBioWrapper.appendChild(bioEl);\r\n\r\n  cardHeader.appendChild(avatarImg);\r\n  cardHeader.appendChild(nameAndBioWrapper);\r\n\r\n  // Card bottom buttons\r\n  const buttonRow = document.createElement('div');\r\n  buttonRow.className = 'flex gap-2';\r\n\r\n  const profileButton = document.createElement('button');\r\n  profileButton.className =\r\n    'bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition-colors';\r\n  profileButton.textContent = 'View Profile';\r\n\r\n  const chatButton = document.createElement('button');\r\n  chatButton.className =\r\n    'bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors';\r\n  chatButton.textContent = 'Chat';\r\n\r\n  buttonRow.appendChild(profileButton);\r\n  buttonRow.appendChild(chatButton);\r\n\r\n  card.appendChild(cardHeader);\r\n  card.appendChild(buttonRow);\r\n\r\n  mentionWrapper.appendChild(card);\r\n\r\n  // Show/hide card on hover\r\n  mentionWrapper.addEventListener('mouseenter', () => {\r\n    card.classList.remove('hidden');\r\n  });\r\n  mentionWrapper.addEventListener('mouseleave', () => {\r\n    card.classList.add('hidden');\r\n  });\r\n\r\n  return mentionWrapper;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * applyStyleToElement\r\n *\r\n * Apply a CSS style string (e.g. \"color: red; font-size: 16px\")\r\n * to the element, using Tailwind classes if possible.\r\n * ------------------------------------------------------------------------- */\r\nfunction applyStyleToElement(element: HTMLElement, styleString: string): void {\r\n  if (!styleString) return;\r\n\r\n  const styles = styleString.split(';').filter(Boolean);\r\n\r\n  styles.forEach((style) => {\r\n    const [property, value] = style.split(':').map((s) => s.trim());\r\n    if (property && value) {\r\n      switch (property) {\r\n        case 'color': {\r\n          const colorClass = mapColorToTailwind(value);\r\n          if (colorClass) {\r\n            element.classList.add(colorClass);\r\n          } else {\r\n            element.style.color = value;\r\n          }\r\n          break;\r\n        }\r\n        case 'background-color': {\r\n          const bgClass = mapBgColorToTailwind(value);\r\n          if (bgClass) {\r\n            element.classList.add(bgClass);\r\n          } else {\r\n            element.style.backgroundColor = value;\r\n          }\r\n          break;\r\n        }\r\n        case 'font-size': {\r\n          const sizeClass = mapFontSizeToTailwind(value);\r\n          if (sizeClass) {\r\n            element.classList.add(sizeClass);\r\n          } else {\r\n            element.style.fontSize = value;\r\n          }\r\n          break;\r\n        }\r\n        case 'text-align': {\r\n          const alignClass = getAlignmentClass(value);\r\n          if (alignClass) {\r\n            element.classList.add(alignClass);\r\n          } else {\r\n            element.style.textAlign = value;\r\n          }\r\n          break;\r\n        }\r\n        default:\r\n          // Fallback to inline\r\n          (element.style as any)[property] = value;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * mapColorToTailwind\r\n * ------------------------------------------------------------------------- */\r\nfunction mapColorToTailwind(color: string): string | null {\r\n  const colorMap: Record<string, string> = {\r\n    'rgb(0, 0, 0)': 'text-black',\r\n    black: 'text-black',\r\n    'rgb(255, 255, 255)': 'text-white',\r\n    white: 'text-white',\r\n    'rgb(239, 68, 68)': 'text-red-500',\r\n    red: 'text-red-500',\r\n    'rgb(34, 197, 94)': 'text-green-500',\r\n    green: 'text-green-500',\r\n    'rgb(59, 130, 246)': 'text-blue-500',\r\n    blue: 'text-blue-500',\r\n    'rgb(245, 158, 11)': 'text-amber-500',\r\n    orange: 'text-orange-500',\r\n    'rgb(139, 92, 246)': 'text-purple-500',\r\n    purple: 'text-purple-500',\r\n    'rgb(236, 72, 153)': 'text-pink-500',\r\n    pink: 'text-pink-500',\r\n    'rgb(107, 114, 128)': 'text-gray-500',\r\n    gray: 'text-gray-500',\r\n  };\r\n\r\n  return colorMap[color] || null;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * mapBgColorToTailwind\r\n * ------------------------------------------------------------------------- */\r\nfunction mapBgColorToTailwind(color: string): string | null {\r\n  const bgColorMap: Record<string, string> = {\r\n    'rgb(0, 0, 0)': 'bg-black',\r\n    black: 'bg-black',\r\n    'rgb(255, 255, 255)': 'bg-white',\r\n    white: 'bg-white',\r\n    'rgb(239, 68, 68)': 'bg-red-500',\r\n    red: 'bg-red-500',\r\n    'rgb(34, 197, 94)': 'bg-green-500',\r\n    green: 'bg-green-500',\r\n    'rgb(59, 130, 246)': 'bg-blue-500',\r\n    blue: 'bg-blue-500',\r\n    'rgb(245, 158, 11)': 'bg-amber-500',\r\n    orange: 'bg-orange-500',\r\n    'rgb(139, 92, 246)': 'bg-purple-500',\r\n    purple: 'bg-purple-500',\r\n    'rgb(236, 72, 153)': 'bg-pink-500',\r\n    pink: 'bg-pink-500',\r\n    'rgb(107, 114, 128)': 'bg-gray-500',\r\n    gray: 'bg-gray-500',\r\n  };\r\n\r\n  return bgColorMap[color] || null;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * mapFontSizeToTailwind\r\n * ------------------------------------------------------------------------- */\r\nfunction mapFontSizeToTailwind(fontSize: string): string | null {\r\n  const fontSizeMap: Record<string, string> = {\r\n    '12px': 'text-xs',\r\n    '14px': 'text-sm',\r\n    '16px': 'text-base',\r\n    '18px': 'text-lg',\r\n    '20px': 'text-xl',\r\n    '24px': 'text-2xl',\r\n    '30px': 'text-3xl',\r\n    '36px': 'text-4xl',\r\n    '48px': 'text-5xl',\r\n    '60px': 'text-6xl',\r\n  };\r\n\r\n  return fontSizeMap[fontSize] || null;\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * getAlignmentClass\r\n *\r\n * Return the appropriate Tailwind text alignment class for a given alignment\r\n * value (like \"left\", \"right\", \"center\", \"justify\").\r\n * ------------------------------------------------------------------------- */\r\nfunction getAlignmentClass(alignment: string): string | null {\r\n  if (!alignment) return null;\r\n  const val = alignment.toLowerCase();\r\n  switch (val) {\r\n    case 'left':\r\n    case 'start':\r\n      return 'text-left';\r\n    case 'center':\r\n    case 'middle':\r\n      return 'text-center';\r\n    case 'right':\r\n    case 'end':\r\n      return 'text-right';\r\n    case 'justify':\r\n      return 'text-justify';\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\n/** -------------------------------------------------------------------------\r\n * createUniqueHeadingId\r\n *\r\n * Creates a slug-like ID from heading text. If the text is missing or short,\r\n * returns a random ID.\r\n * ------------------------------------------------------------------------- */\r\nfunction createUniqueHeadingId(text: string): string {\r\n  const slug = text\r\n    .toLowerCase()\r\n    .replace(/[^\\w\\s-]/g, '') // remove non-alphanumerics\r\n    .replace(/\\s+/g, '-') // spaces to hyphens\r\n    .trim();\r\n\r\n  const randomSuffix = Math.random().toString(36).substring(2, 8);\r\n\r\n  if (!slug || slug.length < 2) {\r\n    return `heading-${randomSuffix}`;\r\n  }\r\n\r\n  // Limit length to ~50 chars\r\n  const trimmed = slug.slice(0, 50).replace(/-+$/, '');\r\n  return `${trimmed}-${randomSuffix}`;\r\n}\r\n"]}