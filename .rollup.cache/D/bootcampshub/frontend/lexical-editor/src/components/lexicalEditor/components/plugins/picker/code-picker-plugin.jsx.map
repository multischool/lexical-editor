{"version":3,"file":"code-picker-plugin.jsx","sourceRoot":"","sources":["code-picker-plugin.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAE,MAAM,SAAS,CAAA;AAC1D,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAA;AAEvC,OAAO,EAAE,eAAe,EAAE,MAAM,eAAe,CAAA;AAC/C,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAA;AAEnD,OAAO,EAAE,qBAAqB,EAAE,MAAM,8CAA8C,CAAC;AAErF,MAAM,UAAU,gBAAgB;IAC9B,OAAO,IAAI,qBAAqB,CAAC,MAAM,EAAE;QACvC,IAAI,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAG;QACrC,QAAQ,EAAE,CAAC,YAAY,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,CAAC;QACrD,QAAQ,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,CACtB,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAA;YAEjC,IAAI,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;gBACjC,IAAI,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC;oBAC5B,cAAc,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,eAAe,EAAE,CAAC,CAAA;gBACpD,CAAC;qBAAM,CAAC;oBACN,yBAAyB;oBACzB,MAAM,WAAW,GAAG,SAAS,CAAC,cAAc,EAAE,CAAA;oBAC9C,MAAM,QAAQ,GAAG,eAAe,EAAE,CAAA;oBAClC,SAAS,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAA;oBACjC,SAAS,CAAC,aAAa,CAAC,WAAW,CAAC,CAAA;gBACtC,CAAC;YACH,CAAC;QACH,CAAC,CAAC;KACL,CAAC,CAAA;AACJ,CAAC","sourcesContent":["import { $getSelection, $isRangeSelection } from \"lexical\"\nimport { CodeIcon } from \"lucide-react\"\n\nimport { $createCodeNode } from \"@lexical/code\"\nimport { $setBlocksType } from \"@lexical/selection\"\n\nimport { ComponentPickerOption } from \"../../plugins/picker/component-picker-option\";\n\nexport function CodePickerPlugin() {\n  return new ComponentPickerOption('Code', {\n    icon: <CodeIcon className=\"size-4\" />,\n    keywords: ['javascript', 'python', 'js', 'codeblock'],\n    onSelect: (_, editor) =>\n      editor.update(() => {\n        const selection = $getSelection()\n\n        if ($isRangeSelection(selection)) {\n          if (selection.isCollapsed()) {\n            $setBlocksType(selection, () => $createCodeNode())\n          } else {\n            // Will this ever happen?\n            const textContent = selection.getTextContent()\n            const codeNode = $createCodeNode()\n            selection.insertNodes([codeNode])\n            selection.insertRawText(textContent)\n          }\n        }\n      }),\n  })\n}"]}