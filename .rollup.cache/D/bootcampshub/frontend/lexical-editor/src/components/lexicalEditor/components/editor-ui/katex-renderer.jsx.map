{"version":3,"file":"katex-renderer.jsx","sourceRoot":"","sources":["katex-renderer.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAA;AAC9B,OAAO,EAAE,SAAS,EAAE,MAAM,EAAO,MAAM,OAAO,CAAA;AAE9C,OAAO,KAAK,MAAM,OAAO,CAAA;AAEzB,MAAM,CAAC,OAAO,UAAU,aAAa,CAAC,EACpC,QAAQ,EACR,MAAM,EACN,aAAa,GAKb;IACA,MAAM,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA;IAEpC,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,YAAY,GAAG,eAAe,CAAC,OAAO,CAAA;QAE5C,IAAI,YAAY,KAAK,IAAI,EAAE,CAAC;YAC1B,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,YAAY,EAAE;gBACnC,WAAW,EAAE,CAAC,MAAM,EAAE,4BAA4B;gBAClD,UAAU,EAAE,SAAS;gBACrB,MAAM,EAAE,MAAM;gBACd,MAAM,EAAE,MAAM;gBACd,YAAY,EAAE,KAAK;gBACnB,KAAK,EAAE,KAAK;aACb,CAAC,CAAA;QACJ,CAAC;IACH,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAA;IAEtB,OAAO;IACL,2FAA2F;IAC3F,oFAAoF;IACpF,mCAAmC;IACnC,EACE;MAAA,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EACnB;MAAA,CAAC,IAAI,CACH,IAAI,CAAC,QAAQ,CACb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CACb,aAAa,CAAC,CAAC,aAAa,CAAC,CAC7B,GAAG,CAAC,CAAC,eAAe,CAAC,EAEvB;MAAA,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EACrB;IAAA,GAAG,CACJ,CAAA;AACH,CAAC","sourcesContent":["import * as React from 'react'\nimport { useEffect, useRef, JSX } from 'react'\n\nimport katex from 'katex'\n\nexport default function KatexRenderer({\n  equation,\n  inline,\n  onDoubleClick,\n}: Readonly<{\n  equation: string\n  inline: boolean\n  onDoubleClick: () => void\n}>): JSX.Element {\n  const katexElementRef = useRef(null)\n\n  useEffect(() => {\n    const katexElement = katexElementRef.current\n\n    if (katexElement !== null) {\n      katex.render(equation, katexElement, {\n        displayMode: !inline, // true === block display //\n        errorColor: '#cc0000',\n        output: 'html',\n        strict: 'warn',\n        throwOnError: false,\n        trust: false,\n      })\n    }\n  }, [equation, inline])\n\n  return (\n    // We use an empty image tag either side to ensure Android doesn't try and compose from the\n    // inner text from Katex. There didn't seem to be any other way of making this work,\n    // without having a physical space.\n    <>\n      <img src=\"#\" alt=\"\" />\n      <span\n        role=\"button\"\n        tabIndex={-1}\n        onDoubleClick={onDoubleClick}\n        ref={katexElementRef}\n      />\n      <img src=\"#\" alt=\"\" />\n    </>\n  )\n}\n"]}